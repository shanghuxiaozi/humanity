var window=window||global,document=document||(window.document={}),Laya=window.Laya=function(t,e){var i={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(t,e){return 1==arguments.length?i.__presubstr.call(this,t):i.__presubstr.call(this,t,e>0?e:this.length+e)},__init:function(t){t.forEach(function(t){t.__init$&&t.__init$()})},__isClass:function(t){return t&&(t.__isclass||t==Object||t==String||t==Array)},__newvec:function(t,e){var i=[];i.length=t;for(var s=0;t>s;s++)i[s]=e;return i},__extend:function(t,e){function s(){i.un(this,"constructor",t)}for(var n in e)if(e.hasOwnProperty(n)){var o=Object.getOwnPropertyDescriptor(e,n),r=o.get,a=o.set;r||a?r&&a?Object.defineProperty(t,n,o):(r&&Object.defineProperty(t,n,r),a&&Object.defineProperty(t,n,a)):t[n]=e[n]}s.prototype=e.prototype,t.prototype=new s,i.un(t.prototype,"__imps",i.__copy({},e.prototype.__imps))},__copy:function(t,e){if(!e)return null;t=t||{};for(var i in e)t[i]=e[i];return t},__package:function(e,s){if(!i.__packages[e]){i.__packages[e]=!0;var n=t,o=e.split(".");if(o.length>1)for(var r=0,a=o.length-1;a>r;r++){var h=n[o[r]];n=h?h:n[o[r]]={}}n[o[o.length-1]]||(n[o[o.length-1]]=s||{})}},__hasOwnProperty:function(t,e){function i(t,e){if(Object.hasOwnProperty.call(e.prototype,t))return!0;var s=e.prototype.__super;return null==s?null:i(t,s)}return e=e||this,Object.hasOwnProperty.call(e,t)||i(t,e.__class)},__typeof:function(t,e){if(!t||!e)return!1;if(e===String)return"string"==typeof t;if(e===Number)return"number"==typeof t;if(e.__interface__)e=e.__interface__;else if("string"!=typeof e)return t instanceof e;return t.__imps&&t.__imps[e]||t.__class==e},__as:function(t,e){return this.__typeof(t,e)?t:null},"interface":function(e,s){i.__package(e,{});var n=i.__internals,o=n[e]=n[e]||{self:e};if(s){var r=s.split(",");o.extend=[];for(var a=0;a<r.length;a++){var h=r[a];n[h]=n[h]||{self:h},o.extend.push(n[h])}}for(var l=t,c=e.split("."),a=0;a<c.length-1;a++)l=l[c[a]];l[c[c.length-1]]={__interface__:e}},"class":function(e,s,n,o){if(n&&i.__extend(e,n),s)if(i.__package(s,e),i.__classmap[s]=e,s.indexOf(".")>0){if(0==s.indexOf("laya.")){var r=s.split(".");o=o||r[r.length-1],i[o]&&console.log("Warning!,this class["+o+"] already exist:",i[o]),i[o]=e}}else"Main"==s?t.Main=e:(i[s]&&console.log("Error!,this class["+s+"] already exist:",i[s]),i[s]=e);var a=i.un,h=e.prototype;a(h,"hasOwnProperty",i.__hasOwnProperty),a(h,"__class",e),a(h,"__super",n),a(h,"__className",s),a(e,"__super",n),a(e,"__className",s),a(e,"__isclass",!0),a(e,"super",function(t){this.__super.call(t)})},imps:function(t,e){function s(t){var e,o;if((e=i.__internals[t])&&(n[t]=!0,o=e.extend))for(var r=0;r<o.length;r++)s(o[r].self)}if(!e)return null;var n=t.__imps||i.un(t,"__imps",{});for(var o in e)s(o)},getset:function(t,e,s,n,o){t?(n&&(e["_$GET_"+s]=n),o&&(e["_$SET_"+s]=o)):(n&&i.un(e,"_$get_"+s,n),o&&i.un(e,"_$set_"+s,o)),n&&o?Object.defineProperty(e,s,{get:n,set:o,enumerable:!1}):(n&&Object.defineProperty(e,s,{get:n,enumerable:!1}),o&&Object.defineProperty(e,s,{set:o,enumerable:!1}))},"static":function(t,e){function i(){var i=e[s],n=e[s+1];Object.defineProperty(t,i,{get:function(){return delete this[i],this[i]=n.call(this)},set:function(t){delete this[i],this[i]=t},enumerable:!0,configurable:!0})}for(var s=0,n=e.length;n>s;s+=2)"length"==e[s]?t.length=e[s+1].call(t):i()},un:function(t,e,s){return s||(s=t[e]),i.__propun.value=s,Object.defineProperty(t,e,i.__propun),s},uns:function(t,e){e.forEach(function(e){i.un(t,e)})}};return t.console=t.console||{log:function(){}},t.trace=t.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),i}(window,document);!function(window,document,Laya){var __un=Laya.un,__uns=Laya.uns,__static=Laya["static"],__class=Laya["class"],__getset=Laya.getset,__newvec=Laya.__newvec;Laya["interface"]("laya.ui.IItem"),Laya["interface"]("laya.ui.ISelect"),Laya["interface"]("laya.runtime.IMarket"),Laya["interface"]("laya.filters.IFilter"),Laya["interface"]("laya.display.ILayout"),Laya["interface"]("laya.resource.IDispose"),Laya["interface"]("laya.runtime.IConchNode"),Laya["interface"]("laya.filters.IFilterAction"),Laya["interface"]("laya.runtime.ICPlatformClass");var ___Laya=function(){return __getset(1,Laya,"alertGlobalError",null,function(t){var e=0;t?Browser.window.onerror=function(t,i,s,n,o){e++<5&&o&&alert("出错啦，请把此信息截图给研发商\n"+t+"\n"+o.stack)}:Browser.window.onerror=null}),Laya.init=function(t,e,i){for(var s=[],n=2,o=arguments.length;o>n;n++)s.push(arguments[n]);if(!Laya._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=Laya._arrayBufferSlice),Laya._isinit=!0,Browser.__init__(),Context.__init__(),Graphics.__init__(),Laya.timer=new Timer,Laya.loader=new LoaderManager;for(var n=0,r=s.length;r>n;n++)s[n].enable&&s[n].enable();Font.__init__(),Style.__init__(),ResourceManager.__init__(),CacheManger.beginCheck(),Laya._currentStage=Laya.stage=new Stage,Laya.stage.conchModel&&Laya.stage.conchModel.setRootNode();var a=Browser.window.location,h=a.pathname;return h=":"==h.charAt(2)?h.substring(1):h,URL.rootPath=URL.basePath=URL.getPath("file:"==a.protocol?h:a.protocol+"//"+a.host+a.pathname),Laya.render=new Render(0,0),Laya.stage.size(t,e),RenderSprite.__init__(),KeyBoardManager.__init__(),MouseManager.instance.__init__(Laya.stage,Render.canvas),Input.__init__(),SoundManager.autoStopMusic=!0,LocalStorage.__init__(),Render.canvas}},Laya._arrayBufferSlice=function(t,e){var i=this,s=new Uint8Array(i,t,e-t),n=new Uint8Array(s.length);return n.set(s),n.buffer},Laya.stage=null,Laya.timer=null,Laya.loader=null,Laya.version="1.7.6",Laya.render=null,Laya._currentStage=null,Laya._isinit=!1,__static(Laya,["conchMarket",function(){return this.conchMarket=window.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=window.PlatformClass}]),Laya}(),Trade=function(){function t(){}return __class(t,"trade.Trade"),t}(),LayaUISample=function(){function t(){Laya.init(750,1334),Laya.stage.bgColor=null,Laya.stage.scaleMode="exactfit",Laya.stage.mouseThrough=!0,Laya.loader.load([{url:"res/atlas/comp.json",type:"atlas"},{url:"res/atlas/schedule.json",type:"atlas"},{url:"res/atlas/circle.json",type:"atlas"}],Handler.create(this,this.onLoaded))}__class(t,"LayaUISample");var e=t.prototype;return e.onLoaded=function(){new Circle},t}(),EventDispatcher=function(){function t(){this._events=null}var e;__class(t,"laya.events.EventDispatcher");var i=t.prototype;return i.hasListener=function(t){var e=this._events&&this._events[t];return!!e},i.event=function(t,e){if(!this._events||!this._events[t])return!1;var i=this._events[t];if(i.run)i.once&&delete this._events[t],null!=e?i.runWith(e):i.run();else{for(var s=0,n=i.length;n>s;s++){var o=i[s];o&&(null!=e?o.runWith(e):o.run()),o&&!o.once||(i.splice(s,1),s--,n--)}0===i.length&&this._events&&delete this._events[t]}return!0},i.on=function(t,e,i,s){return this._createListener(t,e,i,s,!1)},i.once=function(t,e,i,s){return this._createListener(t,e,i,s,!0)},i._createListener=function(t,i,s,n,o,r){void 0===r&&(r=!0),r&&this.off(t,i,s,o);var a=e.create(i||this,s,n,o);this._events||(this._events={});var h=this._events;return h[t]?h[t].run?h[t]=[h[t],a]:h[t].push(a):h[t]=a,this},i.off=function(t,e,i,s){if(void 0===s&&(s=!1),!this._events||!this._events[t])return this;var n=this._events[t];if(null!=i)if(n.run)e&&n.caller!==e||n.method!==i||s&&!n.once||(delete this._events[t],n.recover());else{for(var o=0,r=0,a=n.length;a>r;r++){var h=n[r];!h||e&&h.caller!==e||h.method!==i||s&&!h.once||(o++,n[r]=null,h.recover())}o===a&&delete this._events[t]}return this},i.offAll=function(t){var e=this._events;if(!e)return this;if(t)this._recoverHandlers(e[t]),delete e[t];else{for(var i in e)this._recoverHandlers(e[i]);this._events=null}return this},i._recoverHandlers=function(t){if(t)if(t.run)t.recover();else for(var e=t.length-1;e>-1;e--)t[e]&&(t[e].recover(),t[e]=null)},i.isMouseEvent=function(e){return t.MOUSE_EVENTS[e]},t.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},t.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0}),e=function(t){function e(t,i,s,n){e.__super.call(this,t,i,s,n)}__class(e,"",t);var i=e.prototype;return i.recover=function(){this._id>0&&(this._id=0,e._pool.push(this.clear()))},e.create=function(t,i,s,n){return void 0===n&&(n=!0),e._pool.length?e._pool.pop().setTo(t,i,s,n):new e(t,i,s,n)},e._pool=[],e}(Handler)},t}(),Config=function(){function t(){}return __class(t,"Config"),t.WebGLTextCacheCount=500,t.atlasEnable=!1,t.showCanvasMark=!1,t.animationInterval=50,t.isAntialias=!1,t.isAlpha=!1,t.premultipliedAlpha=!0,t.isStencil=!0,t.preserveDrawingBuffer=!1,t}(),Graphics=function(){function t(){this._one=null,this._cmds=null,this._cacheBoundsType=!1,this._render=this._renderEmpty,Render.isConchNode&&(this._nativeObj=new _conchGraphics,this.id=this._nativeObj.conchID)}__class(t,"laya.display.Graphics");var e=t.prototype;return e.destroy=function(){this.clear(),this._temp=null,this._bounds=null,this._rstBoundPoints=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},e.clear=function(){if(this._one=null,this._render=this._renderEmpty,this._cmds=null,this._temp&&(this._temp.length=0),this._sp&&(this._sp._renderType&=-2),this._sp&&(this._sp._renderType&=-513),this._repaint(),this._vectorgraphArray){for(var t=0,e=this._vectorgraphArray.length;e>t;t++)VectorGraphManager.getInstance().deleteShape(this._vectorgraphArray[t]);this._vectorgraphArray.length=0}},e._repaint=function(){this._temp&&(this._temp.length=0),this._sp&&this._sp.repaint()},e._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},e.getBounds=function(t){return void 0===t&&(t=!1),(!this._bounds||!this._temp||this._temp.length<1||t!=this._cacheBoundsType)&&(this._bounds=Rectangle._getWrapRec(this.getBoundPoints(t),this._bounds)),this._cacheBoundsType=t,this._bounds},e.getBoundPoints=function(t){return void 0===t&&(t=!1),(!this._temp||this._temp.length<1||t!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(t)),this._cacheBoundsType=t,this._rstBoundPoints=Utils.copyArray(this._rstBoundPoints,this._temp)},e._addCmd=function(t){this._cmds=this._cmds||[],t.callee=t.shift(),this._cmds.push(t)},e._getCmdPoints=function(e){void 0===e&&(e=!1);var i,s=Render._context,n=this._cmds;if(i=this._temp||(this._temp=[]),i.length=0,n||null==this._one||(t._tempCmds.length=0,t._tempCmds.push(this._one),n=t._tempCmds),!n)return i;var o;o=t._tempMatrixArrays,o.length=0;var r=t._initMatrix;r.identity();for(var a,h,l=t._tempMatrix,c=0,u=n.length;u>c;c++)switch(a=n[c],a.callee){case s._save:case 7:o.push(r),r=r.clone();break;case s._restore:case 8:r=o.pop();break;case s._scale:case 5:l.identity(),l.translate(-a[2],-a[3]),l.scale(a[0],a[1]),l.translate(a[2],a[3]),this._switchMatrix(r,l);break;case s._rotate:case 3:l.identity(),l.translate(-a[1],-a[2]),l.rotate(a[0]),l.translate(a[1],a[2]),this._switchMatrix(r,l);break;case s._translate:case 6:l.identity(),l.translate(a[0],a[1]),this._switchMatrix(r,l);break;case s._transform:case 4:l.identity(),l.translate(-a[1],-a[2]),l.concat(a[0]),l.translate(a[1],a[2]),this._switchMatrix(r,l);break;case 16:case 24:t._addPointArrToRst(i,Rectangle._getBoundPointS(a[0],a[1],a[2],a[3]),r);break;case 17:r.copyTo(l),l.concat(a[4]),t._addPointArrToRst(i,Rectangle._getBoundPointS(a[0],a[1],a[2],a[3]),l);break;case s._drawTexture:if(h=a[0],e)a[3]&&a[4]?t._addPointArrToRst(i,Rectangle._getBoundPointS(a[1],a[2],a[3],a[4]),r):(h=a[0],t._addPointArrToRst(i,Rectangle._getBoundPointS(a[1],a[2],h.width,h.height),r));else{var _=h.offsetX>0?h.offsetX:0,d=h.offsetY>0?h.offsetY:0;a[3]&&a[4]?t._addPointArrToRst(i,Rectangle._getBoundPointS(a[1]-_,a[2]-d,a[3]+h.sourceWidth-h.width,a[4]+h.sourceHeight-h.height),r):t._addPointArrToRst(i,Rectangle._getBoundPointS(a[1]-_,a[2]-d,h.width+h.sourceWidth-h.width,h.height+h.sourceHeight-h.height),r)}break;case s._fillTexture:a[3]&&a[4]?t._addPointArrToRst(i,Rectangle._getBoundPointS(a[1],a[2],a[3],a[4]),r):(h=a[0],t._addPointArrToRst(i,Rectangle._getBoundPointS(a[1],a[2],h.width,h.height),r));break;case s._drawTextureWithTransform:var f;a[5]?(r.copyTo(l),l.concat(a[5]),f=l):f=r,e?a[3]&&a[4]?t._addPointArrToRst(i,Rectangle._getBoundPointS(a[1],a[2],a[3],a[4]),f):(h=a[0],t._addPointArrToRst(i,Rectangle._getBoundPointS(a[1],a[2],h.width,h.height),f)):(h=a[0],_=h.offsetX>0?h.offsetX:0,d=h.offsetY>0?h.offsetY:0,a[3]&&a[4]?t._addPointArrToRst(i,Rectangle._getBoundPointS(a[1]-_,a[2]-d,a[3]+h.sourceWidth-h.width,a[4]+h.sourceHeight-h.height),f):t._addPointArrToRst(i,Rectangle._getBoundPointS(a[1]-_,a[2]-d,h.width+h.sourceWidth-h.width,h.height+h.sourceHeight-h.height),f));break;case s._drawRect:case 13:t._addPointArrToRst(i,Rectangle._getBoundPointS(a[0],a[1],a[2],a[3]),r);break;case s._drawCircle:case s._fillCircle:case 14:t._addPointArrToRst(i,Rectangle._getBoundPointS(a[0]-a[2],a[1]-a[2],a[2]+a[2],a[2]+a[2]),r);break;case s._drawLine:case 20:t._tempPoints.length=0;var p=NaN;p=.5*a[5],a[0]==a[2]?t._tempPoints.push(a[0]+p,a[1],a[2]+p,a[3],a[0]-p,a[1],a[2]-p,a[3]):a[1]==a[3]?t._tempPoints.push(a[0],a[1]+p,a[2],a[3]+p,a[0],a[1]-p,a[2],a[3]-p):t._tempPoints.push(a[0],a[1],a[2],a[3]),t._addPointArrToRst(i,t._tempPoints,r);break;case s._drawCurves:case 22:t._addPointArrToRst(i,Bezier.I.getBezierPoints(a[2]),r,a[0],a[1]);break;case s._drawPoly:case s._drawLines:case 18:t._addPointArrToRst(i,a[2],r,a[0],a[1]);break;case s._drawPath:case 19:t._addPointArrToRst(i,this._getPathPoints(a[2]),r,a[0],a[1]);break;case s._drawPie:case 15:t._addPointArrToRst(i,this._getPiePoints(a[0],a[1],a[2],a[3],a[4]),r)}return i.length>200?i=Utils.copyArray(i,Rectangle._getWrapRec(i)._getBoundPoints()):i.length>8&&(i=GrahamScan.scanPList(i)),i},e._switchMatrix=function(t,e){e.concat(t),e.copyTo(t)},e.drawTexture=function(t,e,i,s,n,o,r){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=0),void 0===r&&(r=1),t&&!(.01>r)&&(s||(s=t.sourceWidth),n||(n=t.sourceHeight),s=s-t.sourceWidth+t.width,n=n-t.sourceHeight+t.height,!t.loaded||!(0>=s||0>=n))){e+=t.offsetX,i+=t.offsetY,this._sp&&(this._sp._renderType|=512);var a=[t,e,i,s,n,o,r];a.callee=o||1!=r?Render._context._drawTextureWithTransform:Render._context._drawTexture,null!=this._one||o||1!=r?this._saveToCmd(a.callee,a):(this._one=a,this._render=this._renderOneImg),t.loaded||t.once("loaded",this,this._textureLoaded,[t,a]),this._repaint()}},e.cleanByTexture=function(t,e,i,s,n){return void 0===s&&(s=0),void 0===n&&(n=0),t?void(this._one&&this._render===this._renderOneImg?(s||(s=t.sourceWidth),n||(n=t.sourceHeight),s=s-t.sourceWidth+t.width,n=n-t.sourceHeight+t.height,e+=t.offsetX,i+=t.offsetY,this._one[0]=t,this._one[1]=e,this._one[2]=i,this._one[3]=s,this._one[4]=n):(this.clear(),t&&this.drawTexture(t,e,i,s,n))):this.clear()},e.drawTextures=function(t,e){t&&this._saveToCmd(Render._context._drawTextures,[t,e])},e.fillTexture=function(t,e,i,s,n,o,r){if(void 0===s&&(s=0),void 0===n&&(n=0),void 0===o&&(o="repeat"),t){var a=[t,e,i,s,n,o,r||Point.EMPTY,{}];t.loaded||t.once("loaded",this,this._textureLoaded,[t,a]),this._saveToCmd(Render._context._fillTexture,a)}},e._textureLoaded=function(t,e){e[3]=e[3]||t.width,e[4]=e[4]||t.height,this._repaint()},e._saveToCmd=function(t,e){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=e,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(e)),e.callee=t,this._temp&&(this._temp.length=0),this._repaint(),e},e.clipRect=function(t,e,i,s){this._saveToCmd(Render._context._clipRect,[t,e,i,s])},e.fillText=function(t,e,i,s,n,o){this._saveToCmd(Render._context._fillText,[t,e,i,s||Font.defaultFont,n,o])},e.fillBorderText=function(t,e,i,s,n,o,r,a){this._saveToCmd(Render._context._fillBorderText,[t,e,i,s||Font.defaultFont,n,o,r,a])},e.strokeText=function(t,e,i,s,n,o,r){this._saveToCmd(Render._context._strokeText,[t,e,i,s||Font.defaultFont,n,o,r])},e.alpha=function(t){this._saveToCmd(Render._context._alpha,[t])},e.transform=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._saveToCmd(Render._context._transform,[t,e,i])},e.rotate=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._saveToCmd(Render._context._rotate,[t,e,i])},e.scale=function(t,e,i,s){void 0===i&&(i=0),void 0===s&&(s=0),this._saveToCmd(Render._context._scale,[t,e,i,s])},e.translate=function(t,e){this._saveToCmd(Render._context._translate,[t,e])},e.save=function(){this._saveToCmd(Render._context._save,[])},e.restore=function(){this._saveToCmd(Render._context._restore,[])},e.replaceText=function(t){this._repaint();var e=this._cmds;if(e){for(var i=e.length-1;i>-1;i--)if(this._isTextCmd(e[i].callee))return e[i][0].toUpperCase?e[i][0]=t:e[i][0].setText(t),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=t:this._one[0].setText(t),!0;return!1},e._isTextCmd=function(t){return t===Render._context._fillText||t===Render._context._fillBorderText||t===Render._context._strokeText},e.replaceTextColor=function(t){this._repaint();var e=this._cmds;if(e)for(var i=e.length-1;i>-1;i--)this._isTextCmd(e[i].callee)&&(e[i][4]=t,e[i][0].toUpperCase||(e[i][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=t,this._one[0].toUpperCase||(this._one[0].changed=!0))},e.loadImage=function(t,e,i,s,n,o){function r(t){t&&(a.drawTexture(t,e,i,s,n),null!=o&&o.call(a._sp,t))}var a=this;void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=0);var h=Loader.getRes(t);h?r(h):Laya.loader.load(t,Handler.create(null,r),null,"image")},e._renderEmpty=function(t,e,i,s){},e._renderAll=function(t,e,i,s){for(var n,o=this._cmds,r=0,a=o.length;a>r;r++)(n=o[r]).callee.call(e,i,s,n)},e._renderOne=function(t,e,i,s){this._one.callee.call(e,i,s,this._one)},e._renderOneImg=function(t,e,i,s){this._one.callee.call(e,i,s,this._one),2305!==t._renderType&&(t._renderType|=1)},e.drawLine=function(t,e,i,s,n,o){void 0===o&&(o=1);var r=0;Render.isWebGL&&(r=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(r));var a=o%2===0?0:.5,h=[t+a,e+a,i+a,s+a,n,o,r];this._saveToCmd(Render._context._drawLine,h)},e.drawLines=function(t,e,i,s,n){void 0===n&&(n=1);var o=0;if(i&&!(i.length<1)){Render.isWebGL&&(o=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(o));var r=n%2===0?0:.5,a=[t+r,e+r,i,s,n,o];this._saveToCmd(Render._context._drawLines,a)}},e.drawCurves=function(t,e,i,s,n){void 0===n&&(n=1);var o=[t,e,i,s,n];this._saveToCmd(Render._context._drawCurves,o)},e.drawRect=function(t,e,i,s,n,o,r){void 0===r&&(r=1);var a=o?r/2:0,h=o?r:0,l=[t+a,e+a,i-h,s-h,n,o,r];this._saveToCmd(Render._context._drawRect,l)},e.drawCircle=function(t,e,i,s,n,o){void 0===o&&(o=1);var r=n?o/2:0,a=0;Render.isWebGL&&(a=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(a));var h=[t,e,i-r,s,n,o,a];this._saveToCmd(Render._context._drawCircle,h)},e.drawPie=function(t,e,i,s,n,o,r,a){void 0===a&&(a=1);var h=r?a/2:0,l=r?a:0,c=0;Render.isWebGL&&(c=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(c));var u=[t+h,e+h,i-l,s,n,o,r,a,c];u[3]=Utils.toRadian(s),u[4]=Utils.toRadian(n),this._saveToCmd(Render._context._drawPie,u)},e._getPiePoints=function(e,i,s,n,o){var r=t._tempPoints;t._tempPoints.length=0,r.push(e,i);var a=Math.PI/10,h=NaN;for(h=n;o>h;h+=a)r.push(e+s*Math.cos(h),i+s*Math.sin(h));return o!=h&&r.push(e+s*Math.cos(o),i+s*Math.sin(o)),r},e.drawPoly=function(t,e,i,s,n,o){void 0===o&&(o=1);var r=0;if(Render.isWebGL){r=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(r);var a=!1;a=!(i.length>6)}var h=n?o%2===0?0:.5:0,l=[t+h,e+h,i,s,n,o,r,a];this._saveToCmd(Render._context._drawPoly,l)},e._getPathPoints=function(e){var i=0,s=0,n=t._tempPoints;n.length=0,s=e.length;var o;for(i=0;s>i;i++)o=e[i],o.length>1&&(n.push(o[1],o[2]),o.length>3&&n.push(o[3],o[4]));return n},e.drawPath=function(t,e,i,s,n){var o=[t,e,i,s,n];this._saveToCmd(Render._context._drawPath,o)},__getset(0,e,"cmds",function(){return this._cmds},function(t){this._sp&&(this._sp._renderType|=512),this._cmds=t,this._render=this._renderAll,this._repaint()}),t.__init__=function(){if(Render.isConchNode){for(var t=laya.display.Graphics.prototype,e=ConchGraphics.prototype,i=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],s=0,n=i.length;n>=s;s++){var o=i[s];t[o]=e[o]}t._saveToCmd=null,e.drawImageS&&(t.drawTextures=function(t,e){if(t&&t.loaded&&t.bitmap&&t.source){var i=t.uv,s=t.bitmap.width,n=t.bitmap.height;this.drawImageS(t.bitmap.source,i[0]*s,i[1]*n,(i[2]-i[0])*s,(i[5]-i[3])*n,t.offsetX,t.offsetY,t.width,t.height,e)}}),t.drawTexture=function(t,e,i,s,n,o,r){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=0),void 0===r&&(r=1),t){if(!t.loaded)return void t.once("loaded",this,function(){this.drawTexture(t,e,i,s,n,o)});if(t.loaded&&t.bitmap&&t.source&&(s||(s=t.sourceWidth),n||(n=t.sourceHeight),s=s-t.sourceWidth+t.width,n=n-t.sourceHeight+t.height,!(0>=s||0>=n))){e+=t.offsetX,i+=t.offsetY;var a=t.uv,h=t.bitmap.width,l=t.bitmap.height;this.drawImageM(t.bitmap.source,a[0]*h,a[1]*l,(a[2]-a[0])*h,(a[5]-a[3])*l,e,i,s,n,o,r),this._repaint()}}},t.fillTexture=function(t,e,i,s,n,o,r){if(void 0===s&&(s=0),void 0===n&&(n=0),void 0===o&&(o="repeat"),t&&t.loaded){var a,h=Render._context.ctx,l=t.bitmap.width,c=t.bitmap.height,u=t.uv;a=t.uv!=Texture.DEF_UV?h.createPattern(t.bitmap.source,o,u[0]*l,u[1]*c,(u[2]-u[0])*l,(u[5]-u[3])*c):h.createPattern(t.bitmap.source,o);var _=0,d=0;r&&(e+=r.x%t.width,i+=r.y%t.height,_-=r.x%t.width,d-=r.y%t.height),this._fillImage(a,e,i,_,d,s,n)}}}},t._addPointArrToRst=function(e,i,s,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var r=0,a=0;for(a=i.length,r=0;a>r;r+=2)t._addPointToRst(e,i[r]+n,i[r+1]+o,s)},t._addPointToRst=function(t,e,i,s){var n=Point.TEMP;n.setTo(e?e:0,i?i:0),s.transformPoint(n),t.push(n.x,n.y)},t._tempPoints=[],t._tempMatrixArrays=[],t._tempCmds=[],__static(t,["_tempMatrix",function(){return this._tempMatrix=new Matrix},"_initMatrix",function(){return this._initMatrix=new Matrix}]),t}(),Base64AtlasManager=function(){function t(){}return __class(t,"laya.debug.data.Base64AtlasManager"),t.replaceRes=function(e){t.base64.replaceRes(e)},__static(t,["dataO",function(){return this.dataO={"comp/button1.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGIAAABRCAYAAAApS3MNAAABSUlEQVR4Xu3a0QmFMADFUJ1JXM0h3moPZ6qg4AoNeLqAIenFn65jjLE40w2sQkxvcAMI0eggRKSDEEJUDEQ4/COEiBiIYFiEEBEDEQyLECJiIIJhEUJEDEQwLEKIiIEIhkUIETEQwbAIISIGIhgWIUTEQATDIoSIGIhgWIQQEQMRDIsQImIggnEvYvv9IzjfxDiP/XlgJsTcCyDEXP/v14UQImIggmERQkQMRDAsQoiIgQiGRQgRMRDBsAghIgYiGBYhRMRABMMihIgYiGBYhBARAxEMixAiYiCCYRFCRAxEMCxCiIiBCMa7iAjPpzG8fY3kF0KIiIEIhkUIETEQwbAIISIGIhgWIUTEQATDIoSIGIhgWIQQEQMRDIsQImIggmERQkQMRDAsQoiIgQiGRQgRMRDBsAghIgYiGBYhRMRABMMihIgYiGBcGJiOHTRZjZAAAAAASUVORK5CYII=","comp/line2.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAAG0lEQVQYV2NkoDJgpLJ5DIxtra3/qWko1V0IAJvgApS1libIAAAAAElFTkSuQmCC","view/create.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAkCAYAAAC9itu8AAAAdElEQVQ4T2NkwAIWLFjwH5t4QkICIyM2CXQxmAHka/j///9mXDYxMjL6YtgwBDUg+w8crIT8MBQ0oEca55JvWNPS9xgu4tISzADyNfz///8MnrRkgmHDENSALWng9fRQ0DA40xLecglbWhpqGoZCMUNKUQkANAHAJVkE5XwAAAAASUVORK5CYII=","view/rendertime.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAkCAYAAAC9itu8AAABeUlEQVQ4T+2Uv0tCURSAvyNdcwiXBlsaaomWFgeHlqAtCPsDJHwIiUtDSxERtErtmQ6CjkHo4FpDBQ0tbVFR0BYE0eQvOnFF7T17QlOTd3m88873OD8+rtA9uVzOBIPBlIisAwvd8B1QajQahXQ63bIx6QHFYrEEJHrv7qeqZhzHOfYA+Xw+Yow5B+YHoGwymdxW1QAQEFWNAk8i8uEDuZM3gUcLZIEJYNcNqWrVcZyd7p9t8jLwYIFTYBx47UHlcjmcSCQ+B5JtpU0LnAFj3br7kE+yTalb4BCYczVqoT3AjteW4T73FlgFNgY+1IGQz4hPLGCAI2DGbweu2Auw1Vmcqk4C+8DsEOgZOBCR9/6mVdU2vgIsAdOuIVwANRFpezatuahpTYVSop1m+y6pasm8NQqSvvW61KwslkSHuCRkgvErr0taiUXaal1Sr0siWRO/9HfpF+RN9nfpB/qqmrXrv7mktVhYVm5GLo1cct9LI5e8d84/3UvfAgdlKH0EO7MAAAAASUVORK5CYII=","view/cache.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAkCAYAAABSSLCCAAAAcElEQVQ4T2NcsGDB/4SEBEYGBgYGYtmMxCpENhhsA6mA8f///5tHNTEwkBcQpIYcSD15kUtWigi51vR/jVYdOGUQy2YkViGywWSnvTOkhiAonkY1gZIRqSEHTntkRe4g10RWQIyWe5Bgo2O5R7dkBADztyP+yFzirAAAAABJRU5ErkJggg==","comp/clip_selectBox.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAoCAYAAAAIeF9DAAAAsElEQVRoQ+3ZQQ0AMQzEwAuqEgh/Sj2pKObhIrBsrfLonHPu12MMTEGYFg+kIFaPgmA9ClIQzQDG0w0pCGYAw2khBcEMYDgtpCCYAQynhRQEM4DhtJCCYAYwnBZSEMwAhtNCCoIZwHBmd/tTh6IUBIrx/tRbiFWkIFaPFoL1KEhBNAMYTzekIJgBDKeFFAQzgOG0kIJgBjCcFlIQzACG00IKghnAcFpIQTADGE4LwYL8U/BE1dCJ3PsAAAAASUVORK5CYII=","comp/label.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAASCAYAAACQCxruAAAAmElEQVRoQ+3aMQqAQBBDUef+hx4Zq1mrbPnhWylECHmghVZ397OOqqp97TlugdNzgEXFIaaFuwROt0LmBEay5aXb920+FjIpMJItLy1wvhUyKTCSLS8tcL4VMikwki0vLXC+FTIpMJItLy1wvhUyKTCSLS89wPP1Qeh8M0zy+84gMMbruqjA15OxbtjAu7mPa5bj0fb/A8cLgD4n/wQKNiIAAAAASUVORK5CYII=","comp/clip_tree_arrow.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAQCAYAAAArij59AAAAwUlEQVQoU5WRPRKCMBCFWUt6vYQeB06RUDpoBbFDa7yDwm30FGi9dHnOMiQDBgvT5c3b7+0PRVEUlVV9A3NmzL6T//SRfMz5CgCdtVafjlmzaHAigAbM2tE8YVo1pf0yvABoc9D3wACgBbMKIgD4qqDJsqqlMV8VGL5n/88geCJKlijSMBXFZUNx/CSi9WwX1r7R99thzKKqkxXRbMUWSE2u2sEwHsxHCbrMVSq6N4xRD9HAvJstylEkarhurlqnfQC58YP5+CvQNwAAAABJRU5ErkJggg==","view/bg_panel.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAMUlEQVRYR+3QQREAAAjDMGZk/l2CDD6pgl7SduexGCBAgAABAgQIECBAgAABAgS+BQ4oyStBhXcy5AAAAABJRU5ErkJggg==","view/bg_top.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAMUlEQVRYR+3QQREAAAjDMKZp/rWBDD6pgl7SduexGCBAgAABAgQIECBAgAABAgS+BQ6WyDMhXMLeQgAAAABJRU5ErkJggg==","view/clickselect.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAACfElEQVRIS8WVO2iTYRSGn5OWqpMOurg0VRBdVVCsg7GgDjpZECyirl4GEYfSgBlaB5VSpApdxCJIoeKgg7dKC21ALahIiyiKKUjxAiI4qCH1lRP/hPhfAnHpGZPv+c4573nP95ukO/xHmINmtq8RtswsPiipB/gAPAFem5nCbcSWKukIsD84/A2YBh4DL8ysWLkk0qOkDcD5GLF+Ac+Ap35ZHGjAdWB5gtJvgZFYVSWdBHaFwBlg1Mw8K0ngFiAbAm+a2XBij/6HpBbgBrAEmAVeAZ1AFU40QDCWrcBZL0/S4Vq4HtgB7DWzU5XyauDBMhhWz70ryVVdb2ZuhGpI2g1MODjfiMFrxZk3s9WNwJ6snHFxQUlXgXfAPeC5mf2O2Y5oqZLcMceCw1+AseCSSTP7mSiOpM3A7RixfvgYgAd+WUQcSSnfPWBlgtIvgf5YVSVdBA6GQF/mS2bmWcvbERmHJF+payFw0MzO1TWApKXBViwL3h5/Pk4AVTjRAMFY9njJXl6wLccrcD3wAHDUzBwuRw18JtbkbkFJruomM7sf2o4u4Jals/mFRgxeFcfBQm97UyOwM+WMiwums/k3QnMps+HWpuLIRC5TCrcRW2pbT35MRiY4XDRsVmiU5uJQIZfxb0k5Ij229eQPySJ287MLGO8Rd1M0XY6AO3LjzYVSy3fAH+VICL4a6o9VtTWbnzbYGKI+IrtQ6Ns2EFuq/5jOTnWD9f4DikeFvvbqhyg2Yzo3voJSy2fAjfEJMYPRQQ2caAAfC7AW2WkvrzU79dCwnRW4Hjgg6JrrbV9VKbkKw1Csyd2Ca7on1y2krHOub3t16//2n79SarbsH7BKtfejoCjmAAAAAElFTkSuQmCC","view/resize.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAABeUlEQVRIS+2UvUpdURCFvxXRKJpIEBURsVAIiiBoaaGCjY2VLyH4MBaCPoWlnQlpI6SxsQmkURQL5eK/6JK57iuRnMPZtxAkuOFUhzWz96xvjcg8tluAT5LOQqJMHba/AgPAD0nOEtruAOaB6Lon6U+ucAoYTLe7Bb5XCm1/BCaAXqAVOAHyOkYn27PA5/TGWmXHxvBeT2i7TVIM4MUp7ZhGPlY3V/pVKUxEjAIjyac74LIAjK70PwCoyfYXYDJwyqDoHtiRdFOfql0naBgIrILF/ZIi1yH6h1XbYXCPpKOq7s34GEX7JB00m445YBzYlPSQ1dF2N7CaWN2W9DNXuJxAj1uGVeuVQtvh32LyuR34DexWCv+CfAXoBzYkHb8Boe1OSRcFkBdfNY18IQiUtFUpTJjNAPEFHVfAaQFyjZ3zNBzbQ8BSWkZViEbk1uIpjXR8AKbT7jwEvpVUqEk6L0pHLN5hSWWxeq7XjI/v6Sgz0vZ7Ov7DdDwCkcb1m86tSukAAAAASUVORK5CYII=","view/clickanalyse.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAAC7UlEQVRIS5WWT2hUZxTFfyfGFolkoUVKrHQiEaX+IfgHa54UQzUqpWYhLbQU6ULNwgYXuog6yiiTgK2LgtAu6yqbFkpRBEURQzJEBN200NqKkxoDLnQhFUrizJU7vje8SSbzZr7FwDy+c75z7z3nfU80uMxMDin9JC0zewvYAHwIrAH65wWaWQuwOdy8CVgUHnBd0sUKoJktBbYC24B1QHMVNeck3ZWZrYhtXpUg/3/gS0kzDnT2/cDqpFqBUUnnK5pjZutDgo01Tr0g6XbVrprZypBgO9AUU/EK+ErSyzLQzC5XkTkCfBR7fl/Smeh/qasOlPRp9DAkOgp8H5P9o6SriUAnMrOzgNdswNeSntcL9IYNAQ8kHYuXU5Y6u8ZIupldAO5I+nkOsNb8wjk/ljTZKFCSvMbSMrPSiOpNx9uAz3UP4IbfWSsdrcDH4eZuYHF46LCk47PT8S6wG9gbJmRhlfoPSLrhJvdERJs7E+S73dZKmnagsx8JB50UEHdY3+x0dIUEO2qcekTSr/OlY21I4N5dEJMwA6yX9CKejqkqGn8DemPPb0v6YrZXpyS1xYbsRD3AtZjsk5IuJQKdyMyGAa/ZnbNR0tN6gd6wXwAP8SfV0jGnxki6mV1xyf4ubdTkPue/Jf3TEJCMNZFRMQLtyNwqvaTrSkdHZry1MFM8bLLPgY5U8/SyeYHvncotb5b1A/t8c2QGg3sT2WBLBbD95PiGogr9Ej0Gbap8r4ZJ5kR+MPhW7WdGd5npEFaa15IE+YWW5uklf2S6/1N7OnfasG+Ad5KiAfyVzwYfVDQnlc71YTaA8Ntrvtq/y2eDgapdTZ0a60UMhjdvmcCgWDClJge7npSBqfRYYY5M6U/M/NqO1mQ+G7xf4VUH5rNBOXtviLQfzH0afizop0fZroOJQCdKpcfyUKrZFhTpfDgU/F4nMNcH9gPwLJ8Nls3xarUaI+mp9NhTg5GJbPBZQyb3OReayP17rutmHPga1PpCOk+zrlEAAAAASUVORK5CYII=","view/res.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAoCAYAAAD6xArmAAADwUlEQVRIS+3WT2gcdRQH8O/b2SwNC7l4MAEPvbilUkoPOUmLjSDrZn4hxYKH/kGwyB4tQogiu/N+GymyoWguhVBQKKkHQTHsW9fUQwqKp4AgtMXkInhILl4CkoTdmSe/6XZp2pntLli8uMedt9/3mze/33yW8Jw+9Jxy0TeYmV8FcFVVTxPRiwA6AP5U1TvZbHapUqn8nrawxGBVJWvtNVWdJ6K05h1V/dhaW08KT/wRM1sAVQCRqn5JRLdyudw9Iora7faJKIrKqnrBNSWiahAEC0+GHwpm5utEdD+KopsuBMDbzPxt0oqstRdV9Za7lslkzlar1Z8erzsUHATBJhG93C34fmJi4ly5XG6nzTEIgjoRzanqkrX2amowM98F8Fq3wK34PWb+Ii14cXExv7e3V6hWq78+axQrANwt/kVEl5j5h0G2IzMfUdWCtfa3R/VPzvhTAG8AOM/MfwwYehTANwB+ZOYPE4ODIDhJRJvMvD9IqLW2GEXRbSJ6AcBtZr6UGPzoS2Y+lc/nt+bm5v5Oa2CtvaKqywC8bs06M7+eGszMn7nTBqDOzPNpwcvLyyPb29vfAZh2Naq6Za0tpAbXarUzURS53eGKL1trv0oKZ+a3AHytqplMJlOOoui4tfaDvqOw1lZUtabubBOtqOqN0dHRB/v7++62XwHwDoB33dkAUGPmoO92e/yitXZeVT8BkE1acbdpPQiCj4hIBw52hQsLC8c6nc77AN4E8FK3yQ4R/Qzgc2b+Je0ZDPU+fjiZp1eXFD5U8CB7u+/DGybgXxnFMA3/m1GISGwegNMAeuYBuON53lKpVBrePBG5RkTuSPc1b2ZmZnDzRKRnHoDYvIODg3u5XM69/E8AKAO40G1aNcb0N6/ZbF5X1fsAbjpInXnGmETzGo3GRdew+0DPGmPSzRORTQA988bHx89NTk6mmtdoNGLziGjJ9/1085rN5l1VPWSeMSbVvLW1tXwYhoXp6en+5olIbB6A2Dzf9wcyb319/cju7m5hdnY22TwRic3zPO98qVQayLxWq3U0DMPYPGNMsnmrq6snx8bGNqempgYyT0SKzjoAsXnGmP7mNZvNU9lsdqtYLKaaJyJXABwyzxiTbp6IxOYRUd33/VTzNjY2RnZ2dnrmAdgyxqSbJyJnAMTmEdFl3/cTzROR2DzHk6qWiei4Maa/eSJScZY99FRXPM+7MTIy8iAMQ6/dbsfmEVHPPGPM4OaJiBtDqnmuqfuL4Pv+8Oa1Wq1jYRg+ZR6A2DxjzP/mPRupfwAf56Q4urCh6QAAAABJRU5ErkJggg==","view/tab_panel.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAABICAYAAADyMAW8AAAAcUlEQVRYR+3WsQ3AMAhE0TCMeyTvP1tShRQo7lxYegxA8fUPLuac97VhwuKXKhTlFxRQ9GPDClawYvGEDwxIZu7pFRZXr4ACinY1ghWsYMX/NxWQr22edyvGGHt6hcV1NqGAon8QVrCCFYteISDnBuQB3xJuQcDkEngAAAAASUVORK5CYII=","view/btn_close.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAqCAYAAACz+XvQAAACmUlEQVRIS7WWS0/bUBCFz7mJmyZxENm06mNVoVZC7LqGn9FNqy55/BSWSEhs2/4uuqFVoA150JLKJvGdaiIH2TfXNoKQpeP5PHPO3GMTK/5xxTwsAUWkBeBZ+qAByb/Zh4pIA8CL9NqY5Dj7vw9YA/ABwDsAfwB8ITnUIhF5CuATgNcAfgH4RnJSCkwLl6AA/lXBtLZQQxFxoTr6q6LOFl2WmuJAtcY7ZuXIixsczfRyTlPfhpSN7BpwBeBtFdQLFJE2gI8AXi7GBBBl3Fdnv5L87XbpWxuFfQbw3NXM0dQLLdrDIH3ylGTiLLYB8CS9lpCc3tmU+xzL1Z9lEXl/n06KavjowCiK1uM4fqMd1Ov1s3a7fZntZjabtSeTiQYHgiC4aLVavZwpbofT6TQYDAaH1tod3bMwDHc7nc5PLZrNZmG/3z8WkS1jzGm32z1oNBqjUqD+6YM2m81xFWyeNkUaulAAlyKyWdTZbdqUmZKFakEVrLRDV7P5zY6m3rQp6tA1AMC5tXY7he51Op0fdwbGcdwdDodHWc2MMdcL9wGM1tbW9sMw/L6UNm6HChuNRifW2g1XM0dTL3TJZS1KkkTDFbVaLQqCIJcm6k0URRpxuvg39Xo9rtzDh5zt1Z/lXq+32rR5dKC1dt0YM08bAGd65BxN1ZB52ojIBcl82rgdWmsDkocAdgDoW22X5DxtSIZJkhyT3AJwCuCAZD5tfCP7oMaYcRVs/tAiDT1QHX2zqLPbtCkzxYFqjXfM3GKXAR3NtC6nqTccioAeA84BbCuU5B4Af9r4gCLSBXCU1UxErjPuj0Rk3xiznDYuMIWdANhwNXM09UKXXNai9LtQ9y4yxuS/XUijr9L0lXBDMp82j370HhJdWvsftiHJYFPSIqEAAAAASUVORK5CYII=",
"comp/combobox.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAABCCAYAAAA476rKAAACfElEQVR4Xu3bMYsTURQF4PMmExgIWkgEU5hskyJYxGYKY5VS7NzCylL8Bftj3NbKQjuxTBWbaUwhKdIYLCJotlACA5m8kQTZZZkkeN9dbuNJOXPPu/DN5ZHkMa7dbpfgx0TAEdvEedeE2HbWxDa0JjaxLQUMe3HPJrahQECrNE3RarUOJheLBbIsq9znZAdgJ0mC4XCIer1eSa/Xa4xGI+R5TuwA272RTqeDfr9fuTeZTDCfz/dmONkK/cFggGazebnCcrnEeDw+uCKxFdiNRmO3nURRBO/9bvtYrVbEVpgejXa7XfR6PUynU8xms6O1nGzlU3DO7fbu7V5dlsf/0yO2ElsSJ7ZES1lLbCWgJE5siZaylthKQEmc2BItZS2xlYCSOLElWspaYisBJXFiS7SUtcRWAkrixJZoKWuJrQSUxIkt0VLWElsJKIkTW6L1t5an6wFooRGerofKBeZ4uh4IFxrj6XqoXECOp+sBaJoIT9c1esIsT9eFYFbl/J5tJc13agyliU1sWwHDbtyziW0oYNiKk22JfXJ6xnfXjcDdFttnb43a/b9tovQ5iG30/IltBL1tQ2xiGwoYtuJkE9tQILBV/ugl4rh2MF1sPJJP59fuc7IDsTe37mHz8Bki+MoKHhFqn9+j9vs7sQN9K7G89xRx837levHzG5Lph8p1TrZK3iF//ApxdLVI4YFk/BpA9Uc5sVXYwObOCfyDJ3AoUcIh+vIRtYuve1clthJ7G8/7p4hv30Xx6weSybuDKxL7BrARxcjTF0iyN4AviH0Tpto1ONlaQUGe2AIsbSmxtYKCPLEFWNpSYmsFBXliC7C0pZfY2oWY/zeBP8uaLni/AFTVAAAAAElFTkSuQmCC","comp/textinput.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAAWCAYAAACv8OArAAAAZElEQVRYR+3UQQkAMAwEwcZI/LtsoSL2NTGwMByZ3b3HJQIDO3H+EdidNezQGjbsUiBs+dmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4EwZdmwQ4Ew9QBe0R29X9x+dwAAAABJRU5ErkJggg==","comp/vscroll.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAhCAYAAAA/F0BXAAAAOklEQVRIS2N8+OzVf2YWFgYmJiYGcgHjqCEYQTcaJpipaTRMRsOEmDJmNJ2MppPRdEJMCIymE2JCCQAYonwDuu2VMAAAAABJRU5ErkJggg==","comp/vscroll$down.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAzCAYAAABxCePHAAAC/klEQVRIS+2WS0wTURSG/zszBcrLFVvjio0LiAqRRDAmGpRodFE1MQQQkOKGqBujRo3ExLjB4MaKgDzUaGQhvoJGYwAjYoioERcuDGxYEIwPkBY6nWvObXuLnXZaSklYOIu5M/fxzZn/nvPPsInJKa5qGhRFQaIH+w8xSbcymtTd+gBFYXAdyjM9sf7ORxgGR0t5/j9jpkhq2t5B0xQwBrgqNsnJ9V0j4BzQdQNtNYXWkKz0NDiaXkBTFTCFoaWmCHVtQ+AGh+4z0HNiO2bmPNYQGiXQvkuPoaqqiIgi8Pl8eHBqtwlA86MKS6Cy8z1gjIFzjqcXHBEBlpBgRNuOd+HVlYqogJiQIChcg/BtW5k8SaSSkxPJ5PRPTttHfkI7kcghIpn8NYfp33NLXp+TnYG1OWvA3ox9499nPSjdkCsgHJxOIjc43VMrugL9dEUD4Oj/PA4CsUfDX/jOjbmisHTDCCzi4t4QgLDrQF+qTYOmqhgYGw9BvLpv0ZNjQwieaU9b7ZCDriFhSt3VBSZNartHA6aUJ7SK+jqO5n5pSp1HiqSw1e3Di0ypwBpiU1XsudwnTanraDEqrg2GmZLbGkJh2jQVZY29JlPqPe03JX/uxLE7Nk3DjjP3pCn1Ne7HrNsjdYoLQsmWYtNQ3NCBgeZKzLrn/foEoogbQgvSUmz4454P7VQikGhpHzGSZdVOUqqYTGli6gemZ9yJ+0lSTalk/TrxtQOYaBnESbTinokev4UG+p+9/xoyJQKQn8x7vf7JjEFZ1FJBBvuC12RINIdAwtkIQuksnxgHhKBUZ6scQtLSNyiWJpav47z9STjbjfJ8k5iVN0eEs911bhZjUTWpbR+RztZ6uFBERNCq1rfS2e43lFhDsjPscDS9lM7W4dyCquuvpbM9PFkq0iHm7mSl2yP+bj05uxdeXZe5FHOL6Xdr17nQ79bziwew4NXFqwUTMiaEtKBPwtZjnRi8WgXPglfqsyQITc60pwpAeNpH1GRZtRM0pWVVcTJM6S+dYaRsIf025wAAAABJRU5ErkJggg==","comp/vscroll$bar.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAA/CAYAAAAGyyO8AAABYElEQVRYR+2Wv0sDMRTH30tarCg6dRWnQnFT6OiqoP+tk+Cig+AiHayDiNSlg+jgD47K1US+Lwm5s4o/mkElN1xy73KfcF/efTi+Ht3Y0X1Btw8FffdoLy3QSnuZ+HhwZe+exrS13hGGJYsTWSszN0rJ1zHDDbJ0eDYkgHjv5Nxub3TIGEsTY/xDVq6NAN7MfW2u2aCG1nQ0GEZIOXmp7Pw5BPDF+VaGIGQfbM6k0ng5kw8/wF/eJzP5JInZkjg2CSS8zk6vCys7Wb8r5qqsncAP+pdR1Lu9rvgVT4uYg+3F+PCtAzjzu/taKdKKBSS2/wkEMBg/Q+rB50zqzZb7ZPoD/GeZ1HySxGxJHJsEEl5nc22VmCFalpFJTjLKNUtFxlDfP72IogYAP8PPZekWM5OqjErFWpjjbxprABJRA/JYjOOOX4Bgo6bWGYKsfMg5k+lmy5n8uUxm8kkSs6Vw7Cstibc9Fv5vWQAAAABJRU5ErkJggg==","comp/vscroll$up.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAzCAYAAABxCePHAAADF0lEQVRIS92WTUhUURTHz31vPv0KKmkXrtxUGNomkCANLdCUpEatJFuIClIEFRl9kGH0BYWQElLpotGKEJXAtKQooYUFpi1axLQZMCyyZJqv926cM2/uTM288emoUHfx3v16v3fuuef+72Hume/c7/cBAwaLKWaLBZjLPc0Zk0CSJGBs4SDOObDP7i9ckuXkIbLJRJDFFrJk2SGNvZNwy7ExoZEJLWnqfQ+4SlUFaHNs0gXpQhq6x0GWGe0Y7oCicGivyYsLigup7XgFJlkCJjFwNm2HqrZR4CqHoKLC3fr8GFAMpPLqEJhMoZjpay6Bnx4vpKfYoLx1kCwKBlXoOV78BygGsudCH1nwtNVBgHBBUFFzL1n0+Gx5YghOxhINiAbFG1uZODESxf+bJShKrulv8HUusp1G/IBz1qTZIGvdamBjU584Aopzs+lbDhwfFFgc2/imLq0fazgAHF5MumBtuh3YwJsPfGdeNqgY1qqqfcSprRLgr7rWZzWbwCTL8HLKFYEEgkrUn+eHIDzNbltBSG33O+jcnxNZmrYcw5Yc7hoXotRenRPyz0IgBzrGYkTp9qEtxiEV10eEKD08Wgh7bzwTonSvIV/soK5jd53rE6I0eGY3/PL5wWYxQ+nFgShRKqK6LqTwhJNEafRKNQHCcWK3WmDHqR5NlMoSQzAWUV+9vkBMsKXYLCSbs3Oe+SGqqupGrIL3h3YclifYkjo7yZ7izIzUUGrhnvXAzA+PURkR8xCwPnMVsCUVpW0bsiCUKOH9S0980JvaLJSQUTal9Q+9/RgRJQSgnvgCgdBkxkCKektSpC9cR0HCOQgiZUMI3njijwYg+COzLP9rkLr7E3Dn4Gbhp7BPDC+n0TkhlK2zJpccuSBIfVdsutVdt9U4pLbjtVC2B0cKYN/N50LZHh0rFGGguztV14aFsvWfLiVhSrVboaSlXyjbk/NlBNKFVLT0k7INX3KAx+sXfkBlKzjpJItGLlcmhmSkptAB83h9MTuCICxBRUkMwUmY5+uFPY7LmJ7GW05SZycsSos9xUsmSr8BfgGeWI6+BgEAAAAASUVORK5CYII=","comp/button.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE0AAABFCAYAAAAPWmvdAAABA0lEQVR4Xu3ZMRGDUBRFwXwfKSgxFhfRgAbUxEakkCEO3qmX+p9m5w7NW9v7cz18I4EFbeT1fwxtbgYtmEGDVgRC458GLQiExNKgBYGQWBq0IBASS4MWBEJiadCCQEgsDVoQCImlQQsCIbE0aEEgJJZW0Pbj64Q3hFvQhmL3CQ8atLlAKCwNWhAIiaVBCwIhsTRoQSAklgYtCITE0qAFgZBYGrQgEBJLgxYEQmJp0IJASCwNWhAIiaUVtOfrdMIbwi1oQ7H7hAcN2lwgFJYGLQiExNKgBYGQWBq0IBASS4MWBEJiadCCQEgsDVoQCImlQQsCIbE0aEEgJJYGLQiExNIC2g/MxaMp6CSauwAAAABJRU5ErkJggg==","view/bg_tool.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAMklEQVRYR+3QQREAAAjDMCYG/DsEGXxSBb2ke7YeiwECBAgQIECAAAECBAgQIEDgW+AAAeIuAVS/mngAAAAASUVORK5CYII=","comp/minBtn.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAA8CAYAAAB1odqiAAAArUlEQVRYR+3X0QmAMAwE0GQN19B9nM193CmiIH7ZXOAoRc/fpjl8jVDdOj/eOc8USBcXqUjLAtDQRMSOdHb3JatTYCZUXodIy10bGxTI1Lx6/YA0Ima6W2tKFcjmdpGKtCow7NBAdxozy+804Gfx/cDqbLzWDzs0ekNY4B9nOMEehMKTVIEEyKeFSKmc18+MppRtipJuYPCa1SkwEyqvo6Tlxm8bFEijvBt9n/QA/fOPydLHcUIAAAAASUVORK5CYII=","view/zoom_out.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAoCAYAAAD6xArmAAACy0lEQVRIS92WQU8TQRTH/28oQkj0CL0QOMAJQkz4DkS6A+GA+A00Hrhj0uy8NiTwEdBPAOrB0Fnq3U8g6gkOSjxUjpCQCu08M5u2qaVAt7YmOqfNZPa3b9/+Z35L6NOgPnHx98Gbm5sTlUplA0AGQBpACcBBKpXazmaz3+5607YVM/MjEXlNRPdbASJyTkRrzPz+Nvg1MDNPAvgI4AGA10qpvHPuSCk17ZwLAazV4HPM/PUmeDvwSwBPAbxl5sf+RmYWZo7XMvOehwPYYebnScAnAMaVUrNhGH5pBefz+Rnn3GcAJ8w8kQT8E8A9AEMA/HXrqM9fMrO/bjvataJvFdd7/IaZfS9/67ExZpeIngB4xczPklQ8KSKHPmoispdKpXKjo6PHp6enU5VKxXhoV6moVXhnjpVS5wDOwjD81K7qG7e033lXV1cviMjvvDEAP0TkYHBwcKtarT4UkXcALolo1RhTaIV3dVYYY9aIyOfZDw9fMcYUm+FdgWvtYgCmBisrpRbCMPxQh3cNbgM3zJzvCdhDcrncuojMA8gy8/eegTvO8U0Lk87/UY9ve9h/BI6iyJ+1GyLScB4RHQDYDoKgO+dFURSfFQCuOQ9A7LwgCJI5r1gsTlar1YbznHP5crl8NDw8PK2Uip3n4QMDA3OLi4udO89a23Ce1jp2nrVWtNbxh7bWxs4jop0gCDp3XhRFJyIy7pybXV5ejp3XDN7f359RSsXO01p37jxrbey8i4uLoZGRkWvOa5q/1Fp37rx+VtxwntY6dl5zK6Io2hWR2Hla686dV0vFoY+aP8xFJJdOp49LpdIUEZkaNHkqfIWd5JiIzkXkLAiCZM7zO09EYueJyBgRxc4joi0ADeeJyOrS0lJvnBdFkf8xbDhPKbWSyWR647xCocC+53XnAVjQWvfGeS1wo7XunfOstesA5pVS2Uwm8w877xeHf444cscwYAAAAABJRU5ErkJggg==","view/refresh2.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAA/CAYAAAAPIIPGAAAEIElEQVRYR+2XTUhjVxTH/+fGpBrGT/xoBQdFFMMQLNLNbLooLbaFzqKMUhCSZwsuhGG6KCNd6DuRLgqzmGVxUd8LUrpoYWZTKO1yNi2F1oVtceEHflSLqNEav8bklPuqgsl75sUPSsucTQj33v895+R/7y+XcA1B16CJ/6GoYRiDItKfzWZjExMTv5/XtoLlx2Kxm0qp1wH0AHgTwC4RfWRZ1mdewp6ig4ODN9Lp9CMieh+AchH41Lbtj92EXUUHBgaCh4eH3wJ4zSObGSLqtSzrZ9+ihmF8CODR8YIflFL3MplMNxF9IiJWIBC4Pz4+/ldR5RuG8QuAlwGsAWi3bTsVj8dvAWhOJpPfFPK2a/mGYewDeAHAV7Zt9+aK9PX1VYRCoVcApNxa4CX6J4B6AE9t2341V9QwjO8AvAFg27btytxxL9EvAbynJxNRj2VZX58sjMfjd4joyT9D9NiyrHf9iup+/gggBCALQPfxVwARAO8cWywD4LZt2z/5EtWT+vv774rIBIBSlx/mmT5dyWTyC9+WOpkYi8XalVIPRKQbwItEpHv9PRE9tCzrt6IsVcgyhcYLnv1CAkWXfxFBxzEXXXipq+8imz7P9CJdO3+N754y86A+vYFAIDY8PHw58DHzTQB54DNNs3jwMfONY6R4go+Z/YNvbGwsuLKyci74APQys3/wMfMZ8InIPaVUt4g44AuHw/eHhoaKAx8znwEfM6dGR0dviUizaZoXA59pmvtE5ICPmfPAx8wVABzwubXA1VLM7IBPRJ4mEok88DHzKfiY2R/4mPkUfCLSk0gkTsHHzHdE5Immnog8TiQS/sDHzK7gE5EIEZ2CTyl1e2RkxD/4TNO8S0Su4BORZ0qpftM0iwefaZrtAB4QkQM+AA74ADxk5ufgc78CfV99xdy61yMajUbfAvA5gJeKycZj7gqADygajf5xRYIn+6xoUbmCDM9I/LuidXV1qK2txdzcHPb39ZPAOwpmGgqFUFFRgerqauczm81iaWkJa2v64eLhU6+eKqXQ1NTkZOcWq6urWF5edh1zzZSI0NbWhvLyctdFBwcHmJ2dxe7urn/R+vp6J0sd6XQaCwsLqKysRGNjI9bX17G4uIhMRr8jiig/EokgHA7j6OgIU1NTjkBZWRl0f7e2tgo60LX8rq4u/UjC5uamU2ZuBAIBZ1O9mVsLXEU7OztRUlKCnZ0dTE9P54nqfmsnaNHJycm8cVfRlpYW1NTUOJN1pjrjk6iqqkJra6vzNZVKYWZmxp+oLq2jo8NpgQ7dx729PZSWlkKL6hARpwr9Q+aGp/m12Zubm6H9mhtacH5+HhsbG/4tdTJTZ9bQ0OD0LxgMOm7Y3t6GNv55R7XgMS3oH5cJ/y3Rq775V3X5bx8zSv8DuWzoa2vgb5tumbHGlerDAAAAAElFTkSuQmCC","view/settings2.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAA/CAYAAAAPIIPGAAAD2ElEQVRYR+1Xz08bRxT+ZjAGYQoH4rS9IBJBQJEsUC8VKNdQtamUE0fLayqhKHeOaGbFkT8gFVLZtXzk1qqKSs4NUg8RXCIQVoOQ2jRFHHCwBRj2VW+zttY/14BXVaPOyR7NfPN9771536xACEOEgImPDHRhYaHv/Pz8kEMVjUbjq6urxVZhayo/lUo9chzndTabfWMYxkMAGx7QrG3bL5LJ5B0p5f1MJvNz7QENQdPp9LdE9CMAZrcHYAaoxJ8AvARwD8AtAI9t2/7JD9wQdH5+/q7jOLzx04DqeCelnFlbW/s9EJQXGIbxq8eQ//4mhPieiJjlEwBf8qQQYtOyLFZRNeqYJpPJWCQSeUBEzz3JrwqFwvT6+vo575ybm4vGYrFNAF8AICnlbKlU2sxms4Uych2oYRh5AJ9UFggxb1mW5aeSTqfTRLTmm3tv2/bAVUCfWpb1zA9qGAaHwD/XGjQU+WVGHU0Ug4ZSUjXFnwMwXVP8nP1RAPG2i5/Z+q9pKpWaFUL8wvNE9FUmk9m48jWtLWavofztNZTb124oN2neH1mTvmoo/pcfHDGtdZ9nLbw4rrW+nvGZpvlISvl6aWnpjWmaD4nINT4hxKxS6sXy8vIdx3HuK6XaMz6ttWt8QohDInKNTwjhJtWzlJdCiHtEdEtK+VgpFWx8Wuu7RMQbWxofEb0TQsxordszPq11Q+MjoidCCNf4AGxqrYONb2VlJVYsFh84jvPck/yKW5/W2jU+rXWUwdj4OBQcYzbCxcXF5sanlMoLIaqMTylVZXymaVYZHxG9N02zufE1AH2qlKoyPqUUh6AyFwgaivzyVehoorxkdL6k/MUPIEdE0/7i5zcUGx8Rxdsufmbrv6ZKqSrjM01z48rXtLbFeA3FNT4At6/dUIJ7V/MV/6HOn0gkvgbwA4DPbyLZ2/sWwHcikUj82SHAMqe3DMrv+I6Ofw9USonJyUlXzfb2NhzHaamsKdPBwUGcnp7i7OwMAwMDGBsbc4H29vaQz+fR09OD3t5eHB8f1x3QEJQBR0dHcXFx4QL39/dXbTw5OXEBI5EIcrlcHXBDUGYxPj6O7u7uljJLpRJ2d3ddNf7RVD6DlhkWCgUcHrof0YjH44jFYu5vnt/Z2QmWz0lhsHIMi8Wiu/HDF6T7mMDExAT6+vjR8iHGHA5/8uqYTk1Noaurq3L6/v4+jo6OqtgMDQ1hZGSkMnd5eYmtra3K/0DQg4ODivTyLg7B8PBw+6ChyC8f39FEMWgoJRVK8TPbjl/T2mruWEO5SYMNo/P/xaDfeB712U3YeXv/ALDwD+TbY8Dbd9BBAAAAAElFTkSuQmCC","view/setting.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAkCAYAAAC9itu8AAACAklEQVQ4T5XUS4iOcRTH8c9xCeVeiiiXhSJRJFIusRO2lEtZKFlgY6GxZDUrk2TFwii22JJLlERRLKRQJmXBkHIb8+hM/2d6ememed93957n93v+55zf9/mHll9VVTNxopTPR8T3piTyT1VVs7AL9zEd+4roOn5gK25HxLfacAjL8A8TWw6ta28jorc2LMLhIu7Ds2Jah4XlRVci4mNUVTUDadiLFF/G5GL4iyOYjxsYMnQ1BDfxujk0VmJPecFAO4bV2Nk05Bqzz3Za6ut86JJDx2vN4Hbj3hjBbcOt4eCaQZXUj5daT4pGoNFimI1zpdYVEf2jsTQX+5MX5NaOFdFFJHzJ2bWI+FJv6SRWYACTWliqa68ioqc2LMWpwtJ7PCymzVhSWOqOiHeZdPachqNIcXdBJV/2B6cLa5cwZLjQYOkqnuNsOeEM1uJgE43xDBsaH9QQfJ21VNBoHfpBaWHLiKGLoeO1ZnAHkpcxgkvOeoeDa0FjTnNLEfF1PJamYkcR3YmIX6OxNA35Kb7BFKwvoqf4jeV4GRE/azQ2Yh4GMaGFpbr2OSKe1Ibse1MRJ84fimkxMqc0Pc55MrjsOYvZRoofNW6/vPUSwEQ+2+tPQ14h9fX4Ap+aQ2MB1pQTB9sx5K24qmnorKWCRvtDF0PHa+0suBaW0ry91O5mus3n/wHmQwUTIH+tVgAAAABJRU5ErkJggg==","view/refresh.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAkCAYAAAC9itu8AAACiElEQVQ4T4WVS4iPYRTGf4/7/X6XcivXcktEUhTKQkqyYCOKjWyUhezFThbIlJ3LYrIRkoWGUhhhTMko4zJujYRpxgxHj9737/P3zfh239c57/uc5/zO+UQ3T0QsBRYCtZI+5jBVx0fEcGA6MA+YCXQCVyXddWwlISL6ARuARcXvhQPrJF3/nRARvYHtwLRuFLYCFyW15ITl6XTHvwIuJzlrgHrgiqSOiqSI2ANMAL4BxyW1R8RYYKSkp8Vb8w2HgD7AE0kXSozoD0wC2nPCAWAw0CyppiRhBzAD6MgJW4D5KdDFNeSkiJgFbEvONeYE698N2K0ArPsDMAZwguN+AmeKfZgLbAb6llj7A7gk6eFfnY6I0cDKpNc1tQFNwG1JvvFPp0sKXQ2sAGokveuJpVHAHGBJ4ul76vLNapbs9dYk6R8oU7driyztA2Z3w5L1n5LUnBPWptMd/xw4l+RscsHAeeNSZMloTAG+AIcltUXERPdB0qMylk4klu5LOlni2ABgqm3Oko4BQ4Fnko6WJOxPzlXg2wV4hv2czuOYhmsBsDf1rD7fYP0HkyyzZN0twHjACZmlI0WWFgM7e2DprKQ71SyNA9YDBnFYcq0RuOZ5/h9LdsVS6yV97YmlgYDn2X3wjUa7QdKLapY8015ePrWMJVtembhewLI0YWU4eZvck/Q525pXo4M/AY+TLMP40u+SuooseVjsitm/IakzItz5QcXhKSZsBCyrpdjlwuZwfSO8mLOkdYAHqFXSrRKWvErtXFdOcJcnp0AX96ZwuldQ5uxtTrD+VUmWWXqfujwk8eQ4f68rsuRG+d/gZVb9eIk9kPS6miXvIv91rNc12TXPc5MkTyO/AFhJCujHqZlCAAAAAElFTkSuQmCC","comp/checkbox.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAABbUlEQVRIS+2TP0gCURzHv88GRYsrExyOo5cEQVEtWdQQpE4N0R+HxmirXXCrKYigqMF2IRqCQByaLJqNIFpyUIzu4rIwpExODy88ITD/cJ603Rsf7/OGz+/zI5TSEAE20cZRgBMySKni8XrbwICrWAwG2ESZIadFS53J0R25brCyHZNud1vbcRuPV7fDAOu9GXJatNSZHN2R6wb/PfJCrxOZCR8Gbk6hWc6Xg8PrcgBETMIVPdIGSjYG/NoOSHcfkLqDK3qsBSRIrgRAuBF1quUPEUPhYGMwb2dhywrqQ3F0Dt++jSokJMBdhmDO52pB2WwFP7OK8rgH9os99IgppNf3QWwMFP4RNHKALrmoflIj53l6CaWpRcBkgiIkYHl6gDTrh5JJg57v/kJ1YOUixw7jfWELxMpAKUmAXAR7tg3LZ7am3IbjKDBOvPiDqkUmcoj+9H1d7k3nmHdweBubB70ON9wRzQH8pVVQb+Q/zZAEfpwDCU4AAAAASUVORK5CYII=","comp/btn_close.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAA8CAYAAAB1odqiAAAE6UlEQVRYR+3Y30+bVRgH8G/T0t/0Jy0USrIsC0E2GMKAVYcRpmSbEzIGZhqyxCxeceGVF3pjvJl/wYyJWZYY4hZBFnBuBBUW2ewYAxlsSMiyLKH8aEt/0vZtSxvM+562We15C6jlxr53zfO8z+ec5z2nOTmCk598tY19fAQs+Hlvz76QX1zpAwd+1NMNXzieU1QtFeKbvn4CXvqgC95wLKegRirC1e8GCPjh+53wMnRwedkG54aLG4yhSI/ycnPawHaKJ5M1MhGuXR8k4MX3OnjBx3NPcLX3DPfepSu3odfrYC4r5X7bVlbhcrnT4kdrjlA7xYLffj9EwJ6udnhCW9TEJ08XUgWTqE6n5XLdbk9G7MjhKmodrbwAfQPDBLxw7h1ecH3dDq/Xm1GYrZqceXIgGo0GJSXFvOCNmz8RsLv9NNyhKO+icTqc8Pl8acDLyWyr1Wo1DEYDbw2dXIz+4TsE7DzbBneQH2SruDZc8Pv9GSiLqVQq6Iv0WVe5TiHG4K1RAnaceguuYCTrCx63G4FAgAoqlUpodbqs7+sVEgyN/ELAs20t2Ajwgz6vF6FgMGtL5QoF1BoNL1qklODW6DgBT518gxcM+P1gQqFdLRqZXA6lSkVFWXDk198I2NZyAs7NMDXR7XRmYBKZjMuNMEzmljHQF46hUIrR8XsEbG228IJ+T/rGFkskkMoVHBgOBRGNRNI2vkpL/5YsODZhJeCbJ47D4WeoM4wyDLai5PsWiCUQJ2aXTN4pnswzqmS4e+8BAZstDbxg1qW3hyALTlinCPh6Uz1C0Rg2w/S/tz3UpaYWSgsgF4twf3IagvOXr297PR5YGuv+bd2s71sfzkCj1ULQe+3u9vraGlg0lw+LlZhMEIzUNu7vmYYFmz/9LJeTS9We+PIymaGl6wLizo2cokJDEawDNxLg+W7EHTkGjUWw/tBPwOMdnYg7nNQZep4/Q2B9jYspS0zQHjyUlrdTPJksNBrwYGiQgE3vtiNup4O2SSuOzk5y7z2ubYKyuBiaAwe5394XzxGw29Pi5iYLdeDCYgMmfxxOgKfPIG53UBNt049SBVNo4g864HRmxMz1x3hAIybv3CZg49ttiK/bqYneFRuCLldGYTY5OfPkQBR6PTRl6cfIVEtLivHw51ECNrS2Ir62zrtKfWtrCHo8acDLyWyrFVot1CYTbw2hqQRTY2MJsLk5K8hW8TkcCPp8GSiHqdVQG41ZtxUHTkwQ8NhrFsRXyUrke3wuF0L+TSooVxVCrc9+iBKWmvDodysB65saEFtZ5cX8Hi+YQDBrS2VKBVRa/jONqKwU05NTBKyrexWxlRUquOnfBBNidrVoZHIZClWF1DqisjLMzPxBwNraasRsdHDD6c7ApDIJVzTMRDJiRQb6EUNkLsPs7DwBa6qrELPZqCNzu/1pG1siEUOhkHK5wWAYkUg0La7T0U9tIrMZc/MLBKw+XImtZTrIMBFEouQkIBEXQJaYXXJ0O8WTeQXlZsw/XSRg1SsVvGDWpbuHIAsu/LlEwMrKCsQDAcQ93j2U2H2qUKuBUKnE4uISBF9f/Hj7wJwVhyordl/hH2Q+W1zCixoLOdNUj98Ei+byYbH5lnPkmJhL6O+18/c0/1m38/c0qVbm72nYVuTvadgu5O9pUtsif0+Tv6dhF8P/657mLz4NfQVdLmZiAAAAAElFTkSuQmCC","comp/textarea.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAAXCAYAAABkrDOOAAAA4klEQVRoQ+3ZvQrCMBiF4e9rU+sPOErRqxDRe/KG9Fp0EAc3VzuIg1ML4uDmlkaaquDenMUTyJoDD+8W3ZyKlaoshSeogHOy1m1euOmoI1EU+auqQUf/8XHnnBzLp3jsWdaVJEnEGEPsADXU2Ifro8Gej/uSpqnHruvmaVegqirZX+4N9mIy8Nh13XEct7vE18RaK7vzjdiIFoiNUH5vEJvYQAHgFMsmNlAAOMWyiQ0UAE6xbGIDBYBTLJvYQAHgFMsmNlAAOMWyiQ0UAE79lM2fmrDy358a/q6Hhf68ng175QueKdEXxUGVVwAAAABJRU5ErkJggg==","view/re.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAoCAYAAAD6xArmAAACpklEQVRIS+WWPUgcQRiG3+8O70QEUwTB1EJgsTGdRRrhOMjOtEtSRbBIBMFKuCtkZleES2uRQoWQJggKKW7Of7GyTRvBLkVShhS73OXMfWGOU85Es7uXs0m2XeZh+OZ95xnCHX10R1ykBvu+P5fP59+VSqVvf9pUarBS6jWAR0Q0rbWOboP3BCaiOQAHAKTW+vtN8L8BW96W4zjPPM/78Ss8FlypVEYajYbHzALAJIAHALJdoDWl1Esi4m74rWBmpiAI5pk5AHAvJj0VrXU5Fmyhvu+/AfA8YRxfaa1LsWDf92eZeSMJlJnXtdYvEo1Ca30G4GEH/ImI1lqt1nE+nz9vNBrLnVTY39uO4zxNdHgrKytjzWbzs13FzKfDw8PFxcXF8HL3Nscd8BEAN3HcgiCYbLVaHyyIiGaUUm+7R9JzQZRSo0T0BUCGmRd831/tBttK53K5zXK5/DV1pZVSG0Q0C2BXa/0kySEmKojWeoiZD4hoKpvNTiwtLX1MC7+1IFrrQWZeJaJxx3EKN5186lF0LwiC4DEz31dKvU+z69i7Ig0stnm9wv4zsDGm7bxCodBf5xlj2s5j5mkpZf+c1wHPEdFBGIbS87z+OO8S3EnAVhRFvTnv8PBwpF6ve0QkiGiSmX9znuu66ZxXq9XmAcQ6j5krUspkzqvVaqmcJ4SId54xxl6ZiZwHYN113WTOq1arZ0R05TwAa5lM5rher5/ncrllAPYl1HZeFEXJnLe3tzd2cXHRdh6A04GBgWKxWLxyXlcqjqIochPHbWdn58p5AGaEENec13NB9vf3R5vNZtt5RLTguu4159lKA9gUQqR3njHGHpx9tOxKKfvnvGq1OmQrC2AKwIQQon/OOzk5GQzD0I5hPIqi/jvPGNN2npTyH3feTzoJOzgswwlqAAAAAElFTkSuQmCC","view/search.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAqCAYAAABcOxDuAAABX0lEQVRIS+3VsUrEQBAG4H9HiDZiJQg+gJVaiKAoWClYXWeZ7D6CtbWFr5Ai2ayQxkLQRgsLGwtBUQsRC6sDCxHxEIvIZSRwxRGSu83pNUe23c0H+89kR2AISwzBxAiinuctCSH2AawD+AFwRkR7QRC85CO0ur5SaoOZzwGM54A3IlrJw1aolPIewEJJUY+01jvde31RKeUMgNceXdLSWk9VQl3XnSWiZhnKzF9RFE1WQrPDUsonAHNFsBDiJAzDRmXUdd1tIjoFMJaDW0KI1TAMH61RpdQ0Mx8z8zMzHxLRAYBlAG0Al2ma7hpjHqxbqgNeAJgHcKW1XutEMeE4Ttv3/axXC1dh9XPgbZqmW8aYd9t3ohCVUt4BWARwkyTJZhzHH7Zgdq4MvQbw7ThOw/f9zypgKVoVsS7UX+C+v+kgeI0Oklrvb0Yw03rwlZW8Hnz14OvqjXrw1e/pPyfwCww91CttlMG7AAAAAElFTkSuQmCC","view/save.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAoCAYAAAD6xArmAAAA1klEQVRIS+2VzQ3DIAyFwxwdoMMAA/VQ8ZByyEBhmA7QOVxxKLIaOcIoSZUfrlifHw/wM91Ky6zE7SZgANTaDEDhzYJ5odSMC7nA5U7+b4X2dVQr3ic4hHCTlMcY33xPZUUGcwBvdEJwjcfGGIQQ4rd2qenWA3hyAUuABwCP31NtN+i1v02qP4DicRybM885J2ceB/NCyUupfuLxBS4WbmKF9rNUv4p9gq21d0l5SunF91RWZDAH8EYnBNd4nDPPWitnXst0I6Leez+feVowEQ3e+wNk3ge7C/Qp3GfwkgAAAABJRU5ErkJggg=="}},"base64",function(){return this.base64=new Base64Atlas(t.dataO)}]),t}(),DebugTool=function(){function t(){}return __class(t,"laya.debug.DebugTool"),__getset(1,t,"target",function(){return t._target},function(e){t._target=e}),__getset(1,t,"isThisShow",function(){return!1}),__getset(1,t,"showStatu",null,function(e){e?Stat.show():(Stat.hide(),t.clearDebugLayer())}),__getset(1,t,"showBound",function(){return t._showBound},function(e){t._showBound=e,t._showBound||t.clearDebugLayer()}),t.getMenuShowEvent=function(){return Browser.onMobile?"doubleclick":"rightclick"},t.init=function(e,i,s,n,o){void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===s&&(s=!0),void 0===n&&(n=!0),void 0===o&&(o=!1),t.enableCacheAnalyse=e,t.enableCacheAnalyse&&RenderSpriteHook.init(),n&&SpriteRenderHook.init(),t.enableNodeCreateAnalyse=s,t.enableNodeCreateAnalyse&&ClassCreateHook.I.hookClass(Node),i&&LoaderHook.init(),CacheAnalyser.showCacheSprite=o,NodeInfoPanel.init(),t.initBasicFunctions()},t.initBasicFunctions=function(){DisplayHook.initMe(),t.debugLayer||(DebugInfoLayer.init(),t.debugLayer=DebugInfoLayer.I.graphicLayer,t.debugLayer.mouseEnabled=!1,t.debugLayer.mouseThrough=!0,t.showStatu=!0,Laya.stage.on("keydown",null,t.keyHandler),t.cmdToTypeO[1]="IMAGE",t.cmdToTypeO[2]="ALPHA",t.cmdToTypeO[4]="TRANSFORM",t.cmdToTypeO[16]="CANVAS",t.cmdToTypeO[512]="GRAPHICS",t.cmdToTypeO[1024]="CUSTOM",t.cmdToTypeO[2048]="CHILDS",DebugExport["export"]())},t.dTrace=function(e){null!=t._traceFun&&t._traceFun(e),console.log(e)},t.keyHandler=function(e){var i;if(i=String.fromCharCode(e.keyCode),e.altKey){switch(e.keyCode){case 38:t.showParent();break;case 40:t.showChild();break;case 37:t.showBrother(t.target,1);break;case 39:t.showBrother(t.target,-1)}t.dealCMDKey(i)}},t.dealCMDKey=function(e){switch(e){case"上":t.showParent();break;case"下":t.showChild();break;case"左":t.showBrother(t.target,1);break;case"右":t.showBrother(t.target,-1);break;case"B":t.showAllBrother();break;case"C":t.showAllChild();break;case"E":t.traceDisMouseEnable();break;case"S":t.traceDisSizeChain();break;case"D":DisControlTool.downDis(t.target);break;case"U":DisControlTool.upDis(t.target);break;case"N":t.getNodeInfo();break;case"M":t.showAllUnderMosue();break;case"I":break;case"O":ObjectCreateView.I.show();break;case"L":DisController.I.switchType();break;case"Q":t.showNodeInfo();break;case"F":t.showToolPanel();break;case"P":t.showToolFilter();break;case"V":t.selectNodeUnderMouse();break;case"A":NodeToolView.I.target&&MouseEventAnalyser.analyseNode(NodeToolView.I.target);break;case"K":NodeUtils.traceStage();break;case"T":t.switchNodeTree();break;case"R":RenderCostRankView.I.show();break;case"X":NodeTree.I.fresh();break;case"mCMD":t.traceCMD();break;case"allCMD":t.traceCMDR()}},t.switchNodeTree=function(){ToolPanel.I.switchShow("Tree")},t.analyseMouseHit=function(){t.target&&MouseEventAnalyser.analyseNode(t.target)},t.selectNodeUnderMouse=function(){DisplayHook.instance.selectDisUnderMouse(),t.showDisBound()},t.showToolPanel=function(){ToolPanel.I.switchShow("Find")},t.showToolFilter=function(){ToolPanel.I.switchShow("Filter")},t.showNodeInfo=function(){NodeInfoPanel.I.isWorkState?NodeInfoPanel.I.recoverNodes():NodeInfoPanel.I.showDisInfo(t.target)},t.switchDisController=function(){DisController.I.target?DisController.I.target=null:t.target&&(DisController.I.target=t.target)},t.showParent=function(e){return e||(e=t.target),e?(t.target=e.parent,void t.autoWork()):(console.log("no targetAvalible"),null)},t.showChild=function(e){return e||(e=t.target),e?void(e.numChildren>0&&(t.target=e.getChildAt(0),t.autoWork())):(console.log("no targetAvalible"),null)},t.showAllChild=function(e){return e||(e=t.target),e?(t.selectedNodes=DisControlTool.getAllChild(e),void t.showSelected()):(console.log("no targetAvalible"),null)},t.showAllUnderMosue=function(){t.selectedNodes=DisControlTool.getObjectsUnderGlobalPoint(Laya.stage),t.showSelected()},t.showParentChain=function(e){if(e){t.selectedNodes=[];var i;for(i=e.parent;i;)t.selectedNodes.push(i),i=i.parent;t.showSelected()}},t.showAllBrother=function(e){return e||(e=t.target),e?void(e.parent&&(t.selectedNodes=DisControlTool.getAllChild(e.parent),t.showSelected())):(console.log("no targetAvalible"),null)},t.showBrother=function(e,i){if(void 0===i&&(i=1),e||(e=t.target),!e)return console.log("no targetAvalible"),null;var s;if(s=e.parent){var n=0;n=s.getChildIndex(e),n+=i,0>n&&(n+=s.numChildren),n>=s.numChildren&&(n-=s.numChildren),t.target=s.getChildAt(n),t.autoWork()}},t.clearDebugLayer=function(){t.debugLayer.graphics&&t.debugLayer.graphics.clear()},t.showSelected=function(){if(t.autoShowSelected&&t.selectedNodes&&!(t.selectedNodes.length<1)){console.log("selected:"),console.log(t.selectedNodes);var e=0,i=0;for(i=t.selectedNodes.length,t.clearDebugLayer(),e=0;i>e;e++)t.showDisBound(t.selectedNodes[e],!1)}},t.getClassCreateInfo=function(t){return RunProfile.getRunInfo(t)},t.autoWork=function(){t.isThisShow&&(t.showBound&&t.showDisBound(),t.autoTraceSpriteInfo&&t.target&&TraceTool.traceSpriteInfo(t.target,t.autoTraceBounds,t.autoTraceSize,t.autoTraceTree),t.target&&(t.autoTraceCMD&&t.traceCMD(),t.autoTraceCMDR&&t.traceCMDR(),t.autoTraceEnable&&t.traceDisMouseEnable(t.target)))},t.traceDisMouseEnable=function(e){if(console.log("traceDisMouseEnable:"),e||(e=t.target),!e)return console.log("no targetAvalible"),null;var i;for(i=["TraceDisMouseEnable"],t.selectedNodes=[];e;)i.push(ClassTool.getNodeClassAndName(e)+":"+e.mouseEnabled+" hitFirst:"+e.hitTestPrior),t.selectedNodes.push(e),e=e.parent;return t.showSelected(),i.join("\n")},t.traceDisSizeChain=function(e){if(console.log("traceDisSizeChain:"),e||(e=t.target),!e)return console.log("no targetAvalible"),null;t.selectedNodes=[];var i;for(i=["traceDisSizeChain"];e;)t.dTrace(TraceTool.getClassName(e)+":"),i.push(ClassTool.getNodeClassAndName(e)+":"),i.push("Size: x:"+e.x+" y:"+e.y+" w:"+e.width+" h:"+e.height+" scaleX:"+e.scaleX+" scaleY:"+e.scaleY),TraceTool.traceSize(e),t.selectedNodes.push(e),e=e.parent;return t.showSelected(),i.join("\n")},t.showDisBound=function(e,i,s){if(void 0===i&&(i=!0),void 0===s&&(s="#ff0000"),e||(e=t.target),!e)return console.log("no targetAvalible"),null;i&&t.clearDebugLayer();var n;n=e._getBoundPointsM(!0),!n||n.length<1||(n=GrahamScan.pListToPointList(n,!0),WalkTools.walkArr(n,e.localToGlobal,e),n=GrahamScan.pointListToPlist(n),t._disBoundRec=Rectangle._getWrapRec(n,t._disBoundRec),t.debugLayer.graphics.drawRect(t._disBoundRec.x,t._disBoundRec.y,t._disBoundRec.width,t._disBoundRec.height,null,s),DebugInfoLayer.I.setTop())},t.showDisBoundToSprite=function(e,i,s,n){void 0===s&&(s="#ff0000"),void 0===n&&(n=1);var o;o=e._getBoundPointsM(!0),!o||o.length<1||(o=GrahamScan.pListToPointList(o,!0),WalkTools.walkArr(o,e.localToGlobal,e),o=GrahamScan.pointListToPlist(o),t._disBoundRec=Rectangle._getWrapRec(o,t._disBoundRec),i.graphics.drawRect(t._disBoundRec.x,t._disBoundRec.y,t._disBoundRec.width,t._disBoundRec.height,null,s,n))},t.getNodeInfo=function(){return t.counter.reset(),WalkTools.walkTarget(Laya.stage,t.addNodeInfo),console.log("node info:"),t.counter.traceSelf(),t.counter.data},t.findByClass=function(e){return t._classList=[],t._tFindClass=e,WalkTools.walkTarget(Laya.stage,t.addClassNode),t.selectedNodes=t._classList,t.showSelected(),t._classList},t.addClassNode=function(e){var i;i=e.constructor.name,i==t._tFindClass&&t._classList.push(e)},t.traceCMD=function(e){if(e||(e=t.target),!e)return console.log("no targetAvalible"),null;console.log("self CMDs:"),console.log(e.graphics.cmds);var i;for(i=RenderSprite.renders[e._renderType],console.log("renderSprite:",i),t._rSpList.length=0;i&&i._sign>0;)t._rSpList.push(t.cmdToTypeO[i._sign]),i=i._next;return console.log("fun:",t._rSpList.join(",")),t.counter.reset(),t.addCMDs(e.graphics.cmds),t.counter.traceSelf(),t.counter.data},t.addCMDs=function(e){WalkTools.walkArr(e,t.addCMD)},t.addCMD=function(e){t.counter.add(e.callee)},t.traceCMDR=function(e){return e||(e=t.target),e?(t.counter.reset(),WalkTools.walkTarget(e,t.getCMdCount),console.log("cmds include children"),t.counter.traceSelf(),t.counter.data):(console.log("no targetAvalible"),0)},t.getCMdCount=function(e){if(!e)return 0;if(!(e instanceof laya.display.Sprite))return 0;if(!e.graphics.cmds)return 0;t.addCMDs(e.graphics.cmds);var i=e.graphics.cmds.length;return i},t.addNodeInfo=function(e){var i;i=e.constructor.name,t.counter.add(i)},t.find=function(e,i){void 0===i&&(i=!0);var s;return s=t.findTarget(Laya.stage,e),t.selectedNodes=s,t.selectedNodes&&(t.target=t.selectedNodes[0]),i&&t.showSelected(),s},t.findByName=function(e){return t.nameFilter.name=e,t.find(t.nameFilter)},t.findNameStartWith=function(e){return t.nameFilter.name=t.getStartWithFun(e),t.find(t.nameFilter)},t.findNameHas=function(e,i){return void 0===i&&(i=!0),t.nameFilter.name=t.getHasFun(e),t.find(t.nameFilter,i)},t.getStartWithFun=function(t){var e=function(e){return e?0==e.indexOf(t):!1};return e},t.getHasFun=function(t){var e=function(e){return e?e.indexOf(t)>=0:!1};return e},t.findTarget=function(e,i){var s=[];t.isFit(e,i)&&s.push(e);var n,o=0,r=0;for(r=e.numChildren,o=0;r>o;o++)n=e.getChildAt(o),n instanceof laya.display.Sprite&&(s=s.concat(t.findTarget(n,i)));return s},t.findClassHas=function(e,i){var s=[];ClassTool.getClassName(e).indexOf(i)>=0&&s.push(e);var n,o=0,r=0;for(r=e.numChildren,o=0;r>o;o++)n=e.getChildAt(o),n instanceof laya.display.Sprite&&(s=s.concat(t.findClassHas(n,i)));return s},t.isFit=function(t,e){if(!t)return!1;if(!e)return!0;if("function"==typeof e)return e(t);var i;for(i in e)if("function"==typeof e[i]){if(!e[i](t[i]))return!1}else if(t[i]!=e[i])return!1;return!0},t.log=function(e){var i,s=arguments;i=DTrace.getArgArr(s),null!=t._logFun&&t._logFun(i.join(" "))},t.enableCacheAnalyse=!1,t.enableNodeCreateAnalyse=!0,t._traceFun=null,t.debugLayer=null,t._target=null,t.selectedNodes=[],t.autoShowSelected=!0,t._showBound=!0,t._disBoundRec=null,t.autoTraceEnable=!1,t.autoTraceBounds=!1,t.autoTraceSize=!1,t.autoTraceTree=!0,t.autoTraceCMD=!0,t.autoTraceCMDR=!1,t.autoTraceSpriteInfo=!0,t._classList=null,t._tFindClass=null,t._rSpList=[],t._logFun=null,__static(t,["text",function(){return this.text=new Stat},"cmdToTypeO",function(){return this.cmdToTypeO={}},"counter",function(){return this.counter=new CountTool},"nameFilter",function(){return this.nameFilter={name:"name"}}]),t}(),Base64Atlas=function(){function t(t,e){this.data=null,this.replaceO=null,this.idKey=null,this._loadedHandler=null,this.data=t,e||(e=Math.random()+"key"),this.idKey=e,this.init()}__class(t,"laya.debug.tools.Base64Atlas");var e=t.prototype;return e.init=function(){this.replaceO={};var t;for(t in this.data)this.replaceO[t]=this.idKey+"/"+t},e.getAdptUrl=function(t){return this.replaceO[t]},e.preLoad=function(t){this._loadedHandler=t,Laya.loader.load(Base64ImageTool.getPreloads(this.data),new Handler(this,this.preloadEnd))},e.preloadEnd=function(){var t;for(t in this.data){var e;e=Laya.loader.getRes(this.data[t]),Loader.cacheRes(this.replaceO[t],e)}this._loadedHandler&&this._loadedHandler.run()},e.replaceRes=function(t){ObjectTools.replaceValue(t,this.replaceO)},t}(),Base64ImageTool=function(){function t(){}return __class(t,"laya.debug.tools.Base64ImageTool"),t.getCanvasPic=function(t){t=t.bitmap;var e=Browser.createElement("canvas"),i=e.getContext("2d");return e.height=t.height,e.width=t.width,i.drawImage(t.source,0,0),e},t.getBase64Pic=function(e){return t.getCanvasPic(e).toDataURL("image/png")},t.getPreloads=function(t){var e;e=[];var i;for(i in t)e.push({url:t[i],type:"image"});return e},t}(),CacheAnalyser=function(){function t(){}__class(t,"laya.debug.tools.CacheAnalyser");var e=t.prototype;return e.renderCanvas=function(e,i){void 0===i&&(i=0),t.showCacheSprite&&(DebugInfoLayer.I.isDebugItem(e)||DebugTool.showDisBoundToSprite(e,DebugInfoLayer.I.cacheViewLayer,DebugConsts.CANVAS_REC_COLOR,4))},e.reCacheCanvas=function(e,i){if(void 0===i&&(i=0),t.showRecacheSprite&&!DebugInfoLayer.I.isDebugItem(e)){var s;s=t.getNodeInfoByNode(e),s.addCount(i),t.counter.addTime(e,i),s.parent||DebugInfoLayer.I.nodeRecInfoLayer.addChild(s)}},t.renderLoopBegin=function(){DebugInfoLayer.I.cacheViewLayer.graphics.clear()},t.getNodeInfoByNode=function(e){IDTools.idObj(e);var i=0;return i=IDTools.getObjID(e),t._nodeInfoDic[i]||(t._nodeInfoDic[i]=new ReCacheRecInfo),t._nodeInfoDic[i].setTarget(e),t._nodeInfoDic[i]},t._nodeInfoDic={},t.showCacheSprite=!1,t.showRecacheSprite=!0,__static(t,["counter",function(){return this.counter=new ObjTimeCountTool},"I",function(){return this.I=new t}]),t}(),CanvasTools=function(){function t(){}return __class(t,"laya.debug.tools.CanvasTools"),t.createCanvas=function(t,e){var i=new HTMLCanvas("2D");return i.getContext("2d"),i.size(t,e),i},t.renderSpriteToCanvas=function(t,e,i,s){RenderSprite.renders[t._renderType]._fun(t,e.context,i,s)},t.getImageDataFromCanvas=function(t,e,i,s,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=0),0>=s&&(s=t.width),0>=n&&(n=t.height);var o=t.context.getImageData(e,i,s,n);return o},t.getImageDataFromCanvasByRec=function(t,e){var i=t.context.getImageData(e.x,e.y,e.width,e.height);return i},t.getDifferCount=function(e,i){function s(e,i,s,a){t.isPoinSame(s,n,o)||r++}var n=e.data,o=i.data,r=0;return r=0,t.walkImageData(e,s),r},t.getDifferRate=function(e,i){return t.getDifferCount(e,i)/(e.width*e.height)},t.getCanvasDisRec=function(e){var i;i=new Rectangle;var s;s=t.getImageDataFromCanvas(e,0,0);var n=0,o=0,r=0,a=0;n=r=0,o=s.width,a=s.height;var h=0,l=0,c=0,u=0;l=s.width,u=s.height;var _;_=s.data;var d=0;for(c=0;u>c;c++)for(h=0;l>h;h++)t.isEmptyPoint(_,d)||(o>h&&(o=h),h>n&&(n=h),a>c&&(a=c),c>r&&(r=c)),d+=4;return i.setTo(o,a,n-o+1,r-a+1),i},t.fillCanvasRec=function(t,e,i){var s=t.context;s.fillStyle=i,s.fillRect(e.x,e.y,e.width,e.height)},t.isEmptyPoint=function(t,e){return 0==t[e]&&0==t[e+1]&&0==t[e+2]&&0==t[e+3]},t.isPoinSame=function(t,e,i){return e[t]==i[t]&&e[t+1]==i[t+1]&&e[t+2]==i[t+2]&&e[t+3]==i[t+3]},t.walkImageData=function(t,e){var i=0,s=0,n=0,o=0;s=t.width,o=t.height;var r=0,a=t.data;for(i=0;s>i;i++)for(n=0;o>n;n++)e(i,n,r,a),r+=4},t.getSpriteByCanvas=function(t){var e;return e=new Sprite,e.graphics.drawTexture(new Texture(t),0,0,t.width,t.height),e},t.renderSpritesToCanvas=function(e,i,s,n,o){void 0===s&&(s=0),void 0===n&&(n=0),void 0===o&&(o=0);var r=0,a=0;for(a=i.length,r=o;a>r;r++)t.renderSpriteToCanvas(i[r],e,s,n)},t.clearCanvas=function(t){var e=NaN,i=NaN;e=t.width,i=t.height,t.size(e+1,i),t.size(e,i)},t.getImagePixels=function(t,e,i,s,n){void 0===n&&(n=4);var o=0;o=(t*i+e)*n;var r,a=0,h=0;for(r=[],h=n,a=0;h>a;a++)r.push(s[o+a]);return r},t}(),ClassTool=function(){function ClassTool(){}return __class(ClassTool,"laya.debug.tools.ClassTool"),ClassTool.defineProperty=function(t,e,i){Object.defineProperty(t,e,i)},ClassTool.getOwnPropertyDescriptor=function(t,e){var i;return i=Object.getOwnPropertyDescriptor(t,e)},ClassTool.getOwnPropertyDescriptors=function(t){var e;return e=Object.getOwnPropertyDescriptors(t)},ClassTool.getOwnPropertyNames=function(t){var e;return e=Object.getOwnPropertyNames(t)},ClassTool.getObjectGetSetKeys=function(t,e){e||(e=[]);var i;i=laya.debug.tools.ClassTool.getOwnPropertyNames(t);var s;for(s in i)s=i[s],s.indexOf("_$get_")>=0&&(s=s.replace("_$get_",""),e.push(s));return t.__proto__&&ClassTool.getObjectGetSetKeys(t.__proto__,e),e},ClassTool.getObjectDisplayAbleKeys=function(t,e){e||(e=[]);var i,s,n;for(i in t)s=t[i],n=typeof s,"_"!=i.charAt(0)&&e.push(i);return ClassTool.getObjectGetSetKeys(t,e),e=ObjectTools.getNoSameArr(e)},ClassTool.getClassName=function(t){return"function"==typeof t?t.name:t.constructor.name},ClassTool.getNodeClassAndName=function(t){if(!t)return"null";var e;return e=t.name?ClassTool.getClassName(t)+"("+t.name+")":ClassTool.getClassName(t)},ClassTool.getClassNameByClz=function(t){return t.name},ClassTool.getClassByName=function(className){var rst;return rst=eval(className);
},ClassTool.createObjByName=function(t){var e;return new(e=ClassTool.getClassByName(t))},__static(ClassTool,["displayTypes",function(){return this.displayTypes={"boolean":!0,number:!0,string:!0}}]),ClassTool}(),ColorTool=function(){function t(){this.red=NaN,this.green=NaN,this.blue=NaN}return __class(t,"laya.debug.tools.ColorTool"),t.toHexColor=function(t){return Utils.toHexColor(t)},t.getRGBByRGBStr=function(t){"#"==t.charAt(0)&&(t=t.substr(1));var e,i=parseInt(t,16);8==t.length;return e=[(16711680&i)>>16,(65280&i)>>8,255&i]},t.getColorBit=function(t){var e;return e=Math.floor(t).toString(16),e=e.length>1?e:"0"+e},t.getRGBStr=function(e){return"#"+t.getColorBit(e[0])+t.getColorBit(e[1])+t.getColorBit(e[2])},t.traseHSB=function(t){console.log("hsb:",t[0],t[1],t[2])},t.rgb2hsb=function(t,e,i){var s=[t,e,i];s.sort(MathTools.sortNumSmallFirst);var n=s[2],o=s[0],r=n/255,a=0==n?0:(n-o)/n,h=0;return n==o?h=1:0==t&&0==e&&0==i||(n==t&&e>=i?h=60*(e-i)/(n-o)+0:n==t&&i>e?h=60*(e-i)/(n-o)+360:n==e?h=60*(i-t)/(n-o)+120:n==i&&(h=60*(t-e)/(n-o)+240)),[h,a,r]},t.hsb2rgb=function(t,e,i){var s=0,n=0,o=0,r=Math.floor(t/60%6),a=t/60-r,h=i*(1-e),l=i*(1-a*e),c=i*(1-(1-a)*e);switch(r){case 0:s=i,n=c,o=h;break;case 1:s=l,n=i,o=h;break;case 2:s=h,n=i,o=c;break;case 3:s=h,n=l,o=i;break;case 4:s=c,n=h,o=i;break;case 5:s=i,n=h,o=l}return[Math.floor(255*s),Math.floor(255*n),Math.floor(255*o)]},t}(),CountTool=function(){function t(){this.data={},this.preO={},this.changeO={},this.count=0}__class(t,"laya.debug.tools.CountTool");var e=t.prototype;return e.reset=function(){this.data={},this.count=0},e.add=function(t,e){void 0===e&&(e=1),this.count++,this.data.hasOwnProperty(t)||(this.data[t]=0),this.data[t]=this.data[t]+e},e.getKeyCount=function(t){return this.data.hasOwnProperty(t)||(this.data[t]=0),this.data[t]},e.getKeyChange=function(t){return this.changeO[t]?this.changeO[t]:0},e.record=function(){var t;for(t in this.changeO)this.changeO[t]=0;for(t in this.data)this.preO[t]||(this.preO[t]=0),this.changeO[t]=this.data[t]-this.preO[t],this.preO[t]=this.data[t]},e.getCount=function(t){var e,i=0;for(e in t)i+=t[e];return i},e.traceSelf=function(t){t||(t=this.data);var e=0;return e=this.getCount(t),console.log("total:"+e),"total:"+e+"\n"+TraceTool.traceObj(t)},e.traceSelfR=function(t){t||(t=this.data);var e=0;return e=this.getCount(t),console.log("total:"+e),"total:"+e+"\n"+TraceTool.traceObjR(t)},t}(),DebugConsts=function(){function t(){}return __class(t,"laya.debug.tools.DebugConsts"),t.CLICK_SELECT_COLOR="#ff0000",t.CANVAS_REC_COLOR="#FF00FF",t.RECACHE_REC_COLOR="#00ff00",t.SPRITE_REC_COLOR="#ff0000",t.SPRITE_REC_LINEWIDTH=2,t}(),DebugExport=function(){function t(){}return __class(t,"laya.debug.tools.DebugExport"),t["export"]=function(){var e;e=window;var i;for(i in t._exportsDic)e[i]=t._exportsDic[i]},__static(t,["_exportsDic",function(){return this._exportsDic={DebugTool:DebugTool,Watcher:Watcher}}]),t}(),DifferTool=function(){function t(t,e){this.autoTrace=!0,this.sign="",this.obj=null,void 0===t&&(t=""),void 0===e&&(e=!0),this.sign=t,this.autoTrace=e}__class(t,"laya.debug.tools.DifferTool");var e=t.prototype;return e.update=function(t,e){e&&console.log(e);var i=ObjectTools.copyObj(t);this.obj||(this.obj={});var s;return s=ObjectTools.differ(this.obj,i),this.obj=i,this.autoTrace&&(console.log(this.sign+" differ:"),ObjectTools.traceDifferObj(s)),s},t.differ=function(e,i,s){t._differO[e]||(t._differO[e]=new t(e,!0));var n;return n=t._differO[e],n.update(i,s)},t._differO={},t}(),DisController=function(){function t(){this.arrowAxis=null,this._target=null,this.recInfo=null,t.init(),this.arrowAxis=new Axis,this.arrowAxis.mouseEnabled=!0}__class(t,"laya.debug.tools.DisController");var e=t.prototype;return e.switchType=function(){this.arrowAxis.switchType()},e.updateMe=function(){this._target&&(this.recInfo=RecInfo.getGlobalRecInfo(this._target,0,0,1,0,0,1),console.log("rotation:",this.recInfo.rotation),console.log("pos:",this.recInfo.x,this.recInfo.y),console.log("scale:",this.recInfo.width,this.recInfo.height),this.arrowAxis.x=this.recInfo.x,this.arrowAxis.y=this.recInfo.y,this.arrowAxis.rotation=this.recInfo.rotation,this.arrowAxis.yAxis.rotation=this.recInfo.rotationV-this.recInfo.rotation)},__getset(0,e,"target",function(){return this._target},function(e){this._target=e,e?(t._container.addChild(this.arrowAxis),Laya.timer.loop(100,this,this.updateMe)):(this.arrowAxis.removeSelf(),Laya.timer.clear(this,this.updateMe)),this.arrowAxis.target=e,this.updateMe()}),__getset(0,e,"type",function(){return this.arrowAxis.type},function(t){this.arrowAxis.type=t}),t.init=function(){return t._container?void DisControlTool.setTop(t._container):(t._container=new Sprite,t._container.mouseEnabled=!0,void Laya.stage.addChild(t._container))},t._container=null,__static(t,["I",function(){return this.I=new t}]),t}(),DisControlTool=function(){function t(){}return __class(t,"laya.debug.tools.DisControlTool"),t.getObjectsUnderPoint=function(e,i,s,n,o){if(n=n?n:[],null!=o&&!o(e))return n;if(e.getBounds().contains(i,s)){n.push(e);var r=new Point;r.setTo(i,s),r=e.fromParentPoint(r),i=r.x,s=r.y;for(var a=e._childs.length-1;a>-1;a--){var h=e._childs[a];h instanceof laya.display.Sprite&&t.getObjectsUnderPoint(h,i,s,n,o)}}return n},t.getObjectsUnderGlobalPoint=function(e,i){var s=new Point;return s.setTo(Laya.stage.mouseX,Laya.stage.mouseY),e.parent&&(s=e.parent.globalToLocal(s)),t.getObjectsUnderPoint(e,s.x,s.y,null,i)},t.findFirstObjectsUnderGlobalPoint=function(){var e;if(e=t.getObjectsUnderGlobalPoint(Laya.stage),!e)return null;var i,s=0,n=0;for(n=e.length,s=n-1;s>=0;s--)if(i=e[s],i&&i.numChildren<1)return i;return i},t.visibleAndEnableObjFun=function(t){return t.visible&&t.mouseEnabled},t.visibleObjFun=function(t){return t.visible},t.getMousePoint=function(t){var e=new Point;return e.setTo(Laya.stage.mouseX,Laya.stage.mouseY),e=t.globalToLocal(e)},t.isChildE=function(t,e){if(!t)return!1;for(;e;){if(e.parent==t)return!0;e=e.parent}return!1},t.isInTree=function(e,i){return e==i||t.isChildE(e,i)},t.setTop=function(t){if(t&&t.parent){var e;e=t.parent,e.setChildIndex(t,e.numChildren-1)}},t.clearItemRelativeInfo=function(t){var e="NaN";t.getLayout().left=e,t.getLayout().right=e,t.getLayout().top=e,t.getLayout().bottom=e},t.swap=function(t,e){if(t!=e){var i=0;i=t.parent.getChildIndex(t);var s=0;s=e.parent.getChildIndex(e);var n;n=e.parent,t.parent.addChildAt(e,i),n.addChildAt(t,s)}},t.insertToTarParent=function(e,i,s){void 0===s&&(s=!1);var n,o=0;e&&(n=e.parent,n&&(o=n.getChildIndex(e),s&&o++,t.insertToParent(n,i,o)))},t.insertToParent=function(e,i,s){if(void 0===s&&(s=-1),e){0>s&&(s=e.numChildren);var n=0,o=0;for(o=i.length,n=0;o>n;n++)t.transParent(i[n],e),e.addChildAt(i[n],s)}},t.transParent=function(t,e){if(t&&e&&t.parent){var i;i=t.parent;var s;s=new Point(t.x,t.y),s=i.localToGlobal(s),s=e.globalToLocal(s),t.pos(s.x,s.y)}},t.transPoint=function(t,e,i){return i=t.localToGlobal(i),i=e.globalToLocal(i)},t.removeItems=function(t){var e=0,i=0;for(i=t.length,e=0;i>e;e++)t[e].removeSelf()},t.addItems=function(t,e){var i=0,s=0;for(s=t.length,i=0;s>i;i++)e.addChild(t[i])},t.getAllChild=function(t){if(!t)return[];var e=0,i=0,s=[];for(i=t.numChildren,e=0;i>e;e++)s.push(t.getChildAt(e));return s},t.upDis=function(t){if(t&&t.parent){var e;e=t.parent;var i=0;i=e.getChildIndex(t)+1,i>=e.numChildren&&(i=e.numChildren-1),console.log("setChildIndex:"+i),e.setChildIndex(t,i)}},t.downDis=function(t){if(t&&t.parent){var e;e=t.parent;var i=0;i=e.getChildIndex(t)-1,0>i&&(i=0),console.log("setChildIndex:"+i),e.setChildIndex(t,i)}},t.setResizeAbleEx=function(t){var e;e=t.getChildByName("resizeBtn"),e&&SimpleResizer.setResizeAble(e,t)},t.setResizeAble=function(e){e.on("click",null,t.resizeHandler,[e])},t.resizeHandler=function(t){DisResizer.setUp(t)},t.setDragingItem=function(e,i){e.on("mousedown",null,t.dragingHandler,[i]),i.on("dragend",null,t.dragingEnd,[i])},t.dragingHandler=function(t){t&&t.startDrag()},t.dragingEnd=function(e){t.intFyDisPos(e),console.log(e.x,e.y)},t.showToStage=function(e,i,s){void 0===i&&(i=0),void 0===s&&(s=0);var n=e.getBounds();e.x=Laya.stage.mouseX+i,e.y=Laya.stage.mouseY+s,e.x+n.width>Laya.stage.width&&(e.x-=n.width+i),e.y+n.height>Laya.stage.height&&(e.y-=n.height+s),t.intFyDisPos(e)},t.intFyDisPos=function(t){t&&(t.x=Math.round(t.x),t.y=Math.round(t.y))},t.showOnly=function(t,e){var i=0,s=0;for(s=t.length,i=0;s>i;i++)t[i].visible=t[i]==e},t.showOnlyByIndex=function(e,i){t.showOnly(e,e[i])},t.addOnly=function(t,e,i){var s=0,n=0;for(n=t.length,s=0;n>s;s++)t[s]!=e?t[s].removeSelf():i.addChild(t[s])},t.addOnlyByIndex=function(e,i,s){t.addOnly(e,e[i],s)},__static(t,["tempP",function(){return this.tempP=new Point}]),t}(),DisplayHook=function(){function t(){this.mouseX=NaN,this.mouseY=NaN,this._stage=null,this._target=null,this.isGetting=!1,this._matrix=new Matrix,this._point=new Point,this._rect=new Rectangle,this._event=Event.EMPTY,this._stage=Laya.stage,this.init(Render.context.canvas)}__class(t,"laya.debug.tools.DisplayHook");var e=t.prototype;return e.init=function(e){function i(t,e){n._event._stoped=!1,n._event.nativeEvent=e||t,n._target=null,t.offsetX?(n.mouseX=t.offsetX,n.mouseY=t.offsetY):(n.mouseX=t.clientX-Laya.stage.offset.x,n.mouseY=t.clientY-Laya.stage.offset.y)}var s=this;Browser.window.navigator.msPointerEnabled&&(e.style["-ms-content-zooming"]="none",e.style["-ms-touch-action"]="none");var n=this;Browser.document.addEventListener("mousedown",function(e){s._event._stoped=!1,t.isFirst=!0,n.check(n._stage,e.offsetX,e.offsetY,n.onMouseDown,!0,!1)},!0),Browser.document.addEventListener("touchstart",function(e){s._event._stoped=!1,t.isFirst=!0;for(var o=e.changedTouches,r=0,a=o.length;a>r;r++){var h=o[r];i(h,e),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseDown,!0,!1)}},!0)},e.onMouseMove=function(t,e){this.sendEvent(t,"mousemove")},e.onMouseUp=function(t,e){e&&this.sendEvent(t,"mouseup")},e.onMouseDown=function(t,e){e&&(t.$_MOUSEDOWN=!0,this.sendEvent(t,"mousedown"))},e.sendEvent=function(t,e){this._event._stoped||(t.event(e,this._event.setTo(e,t,t)),"mouseup"===e&&t.$_MOUSEDOWN&&(t.$_MOUSEDOWN=!1,t.event("click",this._event.setTo("click",t,t))))},e.selectDisUnderMouse=function(){t.isFirst=!0,this.check(Laya.stage,Laya.stage.mouseX,Laya.stage.mouseY,null,!0,!1),SelectInfosView.I.setSelectTarget(DebugTool.target)},e.getDisUnderMouse=function(){return this.isGetting=!0,t.isFirst=!0,DebugTool.target=null,this.check(Laya.stage,Laya.stage.mouseX,Laya.stage.mouseY,null,!0,!1),this.isGetting=!1,DebugTool.target},e.check=function(e,i,s,n,o,r){if(e==DebugTool.debugLayer)return!1;if(e==DebugInfoLayer.I)return!1;if(this.isGetting&&e==DebugInfoLayer.I)return!1;if(!e.visible||e.getSelfBounds().width<=0)return!1;var a=!1;if(r=!0){var h=!1;if(o&&(this._rect=e.getBounds(),a=this._rect.contains(i,s),this._point.setTo(i,s),e.fromParentPoint(this._point),i=this._point.x,s=this._point.y),a){for(var l=!1,c=e._childs.length-1;c>-1;c--){var u=e._childs[c];if(l=this.check(u,i,s,n,o,!0))break}h=e.getGraphicBounds().contains(i,s),a=l||h,a&&!l&&t.isFirst&&(t.isFirst=!1,e instanceof laya.debug.tools.debugUI.DButton||(DebugTool.target=e,this.isGetting||(DebugTool.autoWork(),Notice.notify("ItemClicked",e))))}}return a},t.initMe=function(){t.instance||(t.instance=new t)},t.ITEM_CLICKED="ItemClicked",t.instance=null,t.isFirst=!1,t}(),DTrace=function(){function t(){}return __class(t,"laya.debug.tools.DTrace"),t.getArgArr=function(t){var e;e=[];var i=0,s=t.length;for(i=0;s>i;i++)e.push(t[i]);return e},t.dTrace=function(e){var i=arguments;i=t.getArgArr(i),i.push(TraceTool.getCallLoc(2)),console.log.apply(console,i);var s;s=i.join(" ")},t.timeStart=function(t){console.time(t)},t.timeEnd=function(t){console.timeEnd(t)},t.traceTable=function(t){console.table(t)},t}(),ClassCreateHook=function(){function t(){this.createInfo={}}__class(t,"laya.debug.tools.enginehook.ClassCreateHook");var e=t.prototype;return e.hookClass=function(e){var i=this;if(!t.isInited){t.isInited=!0;var s=function(t){i.classCreated(t,e)};FunHook.hook(e,"call",s)}},e.classCreated=function(e,i){var s;s=ClassTool.getNodeClassAndName(e);var n,o=0;for(n=e;n&&n!=i;)n=n.__super,o++;t.I.createInfo[s]||(t.I.createInfo[s]=0),t.I.createInfo[s]=t.I.createInfo[s]+1,RunProfile.run(s,o+6)},e.getClassCreateInfo=function(t){var e;return e=ClassTool.getClassName(t),RunProfile.getRunInfo(e)},t.isInited=!1,__static(t,["I",function(){return this.I=new t}]),t}(),RenderSpriteHook=function(){function t(){}__class(t,"laya.debug.tools.enginehook.RenderSpriteHook");var e=t.prototype;return e.createRenderSprite=function(e,i){var s;return s=t._preCreateFun(e,i),16==e&&(s._oldCanvas=s._fun,s._fun=t.I._canvas),s},e._canvas=function(t,e,i,s){if(SpriteRenderForVisibleAnalyse.allowRendering){var n=t._$P.cacheCanvas,o=this._next;if(!n||SpriteRenderForVisibleAnalyse.isVisibleTesting)return void o._fun.call(o,t,e,i,s);var r;r=Browser.now();var a=n.ctx,h=t._needRepaint()||!a;this._oldCanvas(t,e,i,s),Config.showCanvasMark,h?CacheAnalyser.I.reCacheCanvas(t,Browser.now()-r):CacheAnalyser.I.renderCanvas(t,Browser.now()-r)}},t.init=function(){t.I||(t.I=new t,t._preCreateFun=RunDriver.createRenderSprite,RunDriver.createRenderSprite=t.I.createRenderSprite)},t.IMAGE=1,t.FILTERS=2,t.ALPHA=4,t.TRANSFORM=8,t.CANVAS=16,t.BLEND=32,t.CLIP=64,t.STYLE=128,t.GRAPHICS=256,t.CUSTOM=512,t.ENABLERENDERMERGE=1024,t.CHILDS=2048,t.INIT=69905,t.renders=[],t.I=null,t._preCreateFun=null,t}(),SpriteRenderForVisibleAnalyse=function(){function t(){this._repaint=1,this._renderType=1,this._x=0,this._y=0,this.target=null,this.isTargetRenderd=!1,this.preFun=null,this._next=null,this.pgraphic=RenderSprite.prototype._graphics,this.pimage=RenderSprite.prototype._image,this.pimage2=RenderSprite.prototype._image2}__class(t,"laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse");var e=t.prototype;return e.setRenderHook=function(){Sprite.prototype.render=t.I.render},e.render=function(e,i,s){var n;if(n=this,!DebugInfoLayer.I.isDebugItem(n))if(n==laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.I.target&&(laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.allowRendering=!0,laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.I.isTargetRenderd=!0,CanvasTools.clearCanvas(t.mainCanvas)),RenderSprite.renders[this._renderType]._fun(this,e,i+this._x,s+this._y),n==laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.I.target)t.tarRec=CanvasTools.getCanvasDisRec(laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.mainCanvas),console.log("rec",t.tarRec.toString()),t.tarRec.width>0&&t.tarRec.height>0?(t.isTarRecOK=!0,t.preImageData=CanvasTools.getImageDataFromCanvasByRec(t.mainCanvas,t.tarRec),t.tarImageData=CanvasTools.getImageDataFromCanvasByRec(t.mainCanvas,t.tarRec)):console.log("tarRec Not OK:",t.tarRec);else if(t.isTarRecOK){t.tImageData=CanvasTools.getImageDataFromCanvasByRec(t.mainCanvas,t.tarRec);var o=NaN;o=CanvasTools.getDifferRate(t.preImageData,t.tImageData),t.preImageData=t.tImageData,o>0&&VisibleAnalyser.addCoverNode(n,o)}},e.analyseNode=function(e){VisibleAnalyser.resetCoverList(),Sprite.prototype.render!=t.I.render&&(this.preFun=Sprite.prototype.render),this.target=e,Sprite.prototype.render=this.render,t.tarCanvas||(t.tarCanvas=CanvasTools.createCanvas(Laya.stage.width,Laya.stage.height)),t.mainCanvas||(t.mainCanvas=CanvasTools.createCanvas(Laya.stage.width,Laya.stage.height)),this.isTargetRenderd=!1,t.isVisibleTesting=!0,t.allowRendering=!1,CanvasTools.clearCanvas(t.mainCanvas),CanvasTools.clearCanvas(t.tarCanvas),t.isTarRecOK=!1;var i=new RenderContext(t.mainCanvas.width,t.mainCanvas.height,t.mainCanvas);t.mainCanvas=i.canvas,this.render.call(Laya.stage,i,0,0),t.isTarRecOK?t.coverRate=CanvasTools.getDifferRate(t.preImageData,t.tarImageData):t.coverRate=0,VisibleAnalyser.coverRate=t.coverRate,VisibleAnalyser.isTarRecOK=t.isTarRecOK,console.log("coverRate:",t.coverRate),this.isTargetRenderd=!1,t.isVisibleTesting=!1,t.allowRendering=!0,Sprite.prototype.render=this.preFun},e.noRenderMode=function(){},e.normalMode=function(){RenderSprite.prototype._graphics=this.pgraphic,RenderSprite.prototype._image=this.pimage,RenderSprite.prototype._image2=this.pimage2},e.inits=function(){this.noRenderMode()},e.m_graphics=function(t,e,i,s){if(laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.allowRendering){var n=t._style._tf;t._graphics&&t._graphics._render(t,e,i-n.translateX,s-n.translateY)}var o=this._next;o._fun.call(o,t,e,i,s)},e.m_image=function(t,e,i,s){if(laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.allowRendering){var n=t._style;e.ctx.drawTexture2(i,s,n._tf.translateX,n._tf.translateY,t.transform,n.alpha,n.blendMode,t._graphics._one)}},e.m_image2=function(t,e,i,s){if(laya.debug.tools.enginehook.SpriteRenderForVisibleAnalyse.allowRendering){var n=t._style._tf;e.ctx.drawTexture2(i,s,n.translateX,n.translateY,t.transform,1,null,t._graphics._one)}},t.tarCanvas=null,t.mainCanvas=null,t.preImageData=null,t.tImageData=null,t.tarImageData=null,t.tarRec=null,t.isTarRecOK=!1,t.isVisibleTesting=!1,t.allowRendering=!0,t.coverRate=NaN,__static(t,["I",function(){return this.I=new t}]),t}(),SpriteRenderHook=function(){function t(){this._repaint=1,this._renderType=1,this._x=0,this._y=0}__class(t,"laya.debug.tools.enginehook.SpriteRenderHook");var e=t.prototype;return e.render=function(t,e,i){this==Laya.stage&&CacheAnalyser.renderLoopBegin();var s=0;s=Browser.now(),Stat.spriteCount++,this.ShowBorderSign&&DebugTool.showDisBoundToSprite(this,DebugInfoLayer.I.cacheViewLayer,DebugConsts.SPRITE_REC_COLOR,DebugConsts.SPRITE_REC_LINEWIDTH),RenderSprite.renders[this._renderType]._fun(this,t,e+this._x,i+this._y),this._repaint=0,RenderAnalyser.I.render(this,Browser.now()-s)},t.init=function(){t.I||(t.I=new t,t.setRenderHook())},t.setRenderHook=function(){Sprite.prototype.render=t.I.render},t.showDisplayBorder=function(t,e){void 0===e&&(e=!0),t.ShowBorderSign=e},t.isDisplayShowBorder=function(t){return t.ShowBorderSign},t.I=null,t.ShowBorderSign="ShowBorderSign",t}(),FunHook=function(){function t(){}return __class(t,"laya.debug.tools.hook.FunHook"),t.hook=function(e,i,s,n){t.hookFuns(e,i,[s,e[i],n],1)},t.hookAllFun=function(e){var i,s;s=ClassTool.getOwnPropertyNames(e);for(i in s)i=s[i],t.special[i]||(console.log("try hook:",i),"function"==typeof e[i]&&(console.log("hook:",i),t.hookFuns(e,i,[t.getTraceMsg("call:"+i),e[i]],1)));e.__proto__?t.hookAllFun(e.__proto__):console.log("end:",e)},t.getTraceMsg=function(t){var e;return e=function(){console.log(t)}},t.hookFuns=function(t,e,i,s){void 0===s&&(s=-1);var n,o=t[e];n=function(t){var e,n=arguments,o=0,r=0;for(r=i.length,o=0;r>o;o++)i[o]&&(o==s?e=i[o].apply(this,n):i[o].apply(this,n));return e},n.pre=o,t[e]=n},t.removeHook=function(t,e){null!=t[e].pre&&(t[e]=t[e].pre)},t.debugHere=function(){},t.traceLoc=function(t,e){void 0===t&&(t=0),void 0===e&&(e=""),console.log(e,"fun loc:",TraceTool.getCallLoc(3+t))},t.getLocFun=function(e,i){void 0===e&&(e=0),void 0===i&&(i=""),e+=1;var s;return s=function(){t.traceLoc(e,i)}},__static(t,["special",function(){return this.special={length:!0,name:!0,arguments:!0,caller:!0,prototype:!0,is:!0,isExtensible:!0,isFrozen:!0,isSealed:!0,preventExtensions:!0,seal:!0,unobserve:!0,apply:!0,call:!0,bind:!0,freeze:!0,unobserve:!0}}]),t}(),VarHook=function(){function t(){}return __class(t,"laya.debug.tools.hook.VarHook"),t.hookVar=function(t,e,i,s){i||(i=[]),s||(s=[]);var n,o=t,r=t[e];n=ClassTool.getOwnPropertyDescriptor(t,e);var a={},h=function(t){console.log("var hook set "+e+":",t),r=t},l=function(){return console.log("var hook get"+e+":",r),r};if(n)return a.set=h,a.get=l,a.enumerable=n.enumerable,i.push(a.set),s.push(a.get),FunHook.hookFuns(a,"set",i),FunHook.hookFuns(a,"get",s,s.length-1),void ClassTool.defineProperty(t,e,a);for(;!n&&t.__proto__;)t=t.__proto__,n=ClassTool.getOwnPropertyDescriptor(t,e);n&&(a.set=n.set?n.set:h,a.get=n.get?n.get:l,a.enumerable=n.enumerable,i.push(a.set),s.push(a.get),FunHook.hookFuns(a,"set",i),FunHook.hookFuns(a,"get",s,s.length-1),ClassTool.defineProperty(o,e,a)),n||(console.log("get des fail add directly"),a.set=h,a.get=l,i.push(a.set),s.push(a.get),FunHook.hookFuns(a,"set",i),FunHook.hookFuns(a,"get",s,s.length-1),ClassTool.defineProperty(t,e,a))},t.getLocFun=function(t,e){void 0===t&&(t=""),void 0===e&&(e=0),e+=1;var i;return i=function(){FunHook.traceLoc(e,t)}},t}(),IDTools=function(){function t(){this.tID=1}__class(t,"laya.debug.tools.IDTools");var e=t.prototype;return e.getID=function(){return this.tID++},t.getAID=function(){return t._ID.getID()},t.idObjE=function(e,i){return void 0===i&&(i="default"),e._M_id_?e:(i||(i="default"),t._idDic[i]||(t._idDic[i]=new t),e._M_id_=t._idDic[i].getAID(),e)},t.setObjID=function(t,e){return t._M_id_=e,t},t.idObj=function(e){return e._M_id_?e:(e._M_id_=t.getAID(),e)},t.getObjID=function(t){return t?t._M_id_:-1},t.idSign="_M_id_",__static(t,["_ID",function(){return this._ID=new t},"_idDic",function(){return this._idDic={"default":new t}}]),t}(),MathTools=function(){function t(){}return __class(t,"laya.debug.tools.MathTools"),t.sortBigFirst=function(t,e){return t==e?0:e>t?1:-1},t.sortSmallFirst=function(t,e){return t==e?0:e>t?-1:1},t.sortNumBigFirst=function(t,e){return parseFloat(e)-parseFloat(t)},t.sortNumSmallFirst=function(t,e){return parseFloat(t)-parseFloat(e)},t.sortByKey=function(e,i,s){void 0===i&&(i=!1),void 0===s&&(s=!0);var n;return n=i?s?t.sortNumBigFirst:t.sortBigFirst:s?t.sortNumSmallFirst:t.sortSmallFirst,function(t,i){return n(t[e],i[e])}},t}(),MouseEventAnalyser=function(){function t(){}return __class(t,"laya.debug.tools.MouseEventAnalyser"),t.analyseNode=function(e){DebugTool.showDisBound(e,!0);var i;i=e,ObjectTools.clearObj(t.infoO),ObjectTools.clearObj(t.nodeO),ObjectTools.clearObj(t.hitO);var s;for(s=[];e;)IDTools.idObj(e),t.nodeO[IDTools.getObjID(e)]=e,s.push(e),e=e.parent;t.check(Laya.stage,Laya.stage.mouseX,Laya.stage.mouseY,null);var n;t.hitO[IDTools.getObjID(i)]?(console.log("can hit"),n="can hit"):(console.log("can't hit"),n="can't hit");var o=0,r=0;s=s.reverse(),r=s.length;var a;for(a=["[分析对象]:"+ClassTool.getNodeClassAndName(i)+":"+n],o=0;r>o;o++)e=s[o],t.hitO[IDTools.getObjID(e)]?(console.log("can hit:",ClassTool.getNodeClassAndName(e)),console.log("原因:",t.infoO[IDTools.getObjID(e)]),a.push("can hit: "+ClassTool.getNodeClassAndName(e)),a.push("原因: "+t.infoO[IDTools.getObjID(e)])):(console.log("can't hit:"+ClassTool.getNodeClassAndName(e)),console.log("原因:",t.infoO[IDTools.getObjID(e)]?t.infoO[IDTools.getObjID(e)]:"鼠标事件在父级已停止派发"),a.push("can't hit: "+ClassTool.getNodeClassAndName(e)),a.push("原因: "+(t.infoO[IDTools.getObjID(e)]?t.infoO[IDTools.getObjID(e)]:"鼠标事件在父级已停止派发")));var h;h=a.join("\n"),ToolPanel.I.showTxtInfo(h)},t.check=function(e,i,s,n){IDTools.idObj(e);var o=!1;o=t.nodeO[IDTools.getObjID(e)],t._point.setTo(i,s),e.fromParentPoint(t._point),i=t._point.x,s=t._point.y;var r=e.scrollRect;if(r){t._rect.setTo(r.x,r.y,r.width,r.height);var a=t._rect.contains(i,s);if(!a)return o&&(t.infoO[IDTools.getObjID(e)]="scrollRect没有包含鼠标"+t._rect.toString()+":"+i+","+s),!1}var h,l=0,c=0;h=e._childs,c=h.length;var u,_;for(_=null,l=0;c>l;l++)if(u=h[l],IDTools.idObj(u),t.nodeO[IDTools.getObjID(u)]){_=u;break}var d=!1;d=!!_;var f=!1;if(e.hitTestPrior&&!e.mouseThrough&&!t.hitTest(e,i,s))return t.infoO[IDTools.getObjID(e)]="hitTestPrior=true，宽高区域不包含鼠标::"+i+","+s+" size:"+e.width+","+e.height,!1;for(l=e._childs.length-1;l>-1;l--)if(u=e._childs[l],u==_&&(_.mouseEnabled||(t.infoO[IDTools.getObjID(_)]="mouseEnabled=false"),_.visible||(t.infoO[IDTools.getObjID(_)]="visible=false"),d=!1),u.mouseEnabled&&u.visible){if(f=t.check(u,i,s,n))return t.hitO[IDTools.getObjID(e)]=!0,t.infoO[IDTools.getObjID(e)]="子对象被击中",u==_?t.infoO[IDTools.getObjID(e)]="子对象被击中,击中对象在分析链中":(t.infoO[IDTools.getObjID(e)]="子对象被击中,击中对象不在分析链中",d&&(t.infoO[IDTools.getObjID(_)]="被兄弟节点挡住,兄弟节点信息:"+ClassTool.getNodeClassAndName(u)+","+u.getBounds().toString(),DebugTool.showDisBound(u,!1,"#ffff00"))),!0;u==_&&(d=!1)}var p=new Rectangle,g=!1;if(g=e.getGraphicBounds().contains(i,s),e.width>0&&e.height>0){var m=t._rect;e.mouseThrough?(a=g,p.copyFrom(e.getGraphicBounds())):(e.hitArea?m=e.hitArea:m.setTo(0,0,e.width,e.height),p.copyFrom(m),a=m.contains(i,s)),a&&(t.hitO[IDTools.getObjID(e)]=!0)}return a?t.infoO[IDTools.getObjID(e)]="自身区域被击中":g?t.infoO[IDTools.getObjID(e)]="子对象未包含鼠标，实际绘图区域包含鼠标，设置的宽高区域不包含鼠标::"+i+","+s+" hitRec:"+p.toString()+" graphicBounds:"+e.getGraphicBounds().toString()+"，设置mouseThrough=true或将宽高设置到实际绘图区域可解决问题":t.infoO[IDTools.getObjID(e)]="子对象未包含鼠标，实际绘图区域不包含鼠标，设置的宽高区域不包含鼠标::"+i+","+s+" hitRec:"+p.toString()+" graphicBounds:"+e.getGraphicBounds().toString(),a},t.hitTest=function(e,i,s){var n=!1;if(e.hitArea instanceof laya.utils.HitArea)return e.hitArea.isHit(i,s);if(e.width>0&&e.height>0||e.mouseThrough||e.hitArea){var o=t._rect;e.mouseThrough?n=e.getGraphicBounds().contains(i,s):(e.hitArea?o=e.hitArea:o.setTo(0,0,e.width,e.height),n=o.contains(i,s))}return n},t.infoO={},t.nodeO={},t.hitO={},__static(t,["_matrix",function(){return this._matrix=new Matrix},"_point",function(){return this._point=new Point},"_rect",function(){return this._rect=new Rectangle}]),t}(),ObjectTools=function(){function t(){}return __class(t,"laya.debug.tools.ObjectTools"),t.getFlatKey=function(e,i){return""==e?i:e+t.sign+i},t.flatObj=function(e,i,s){void 0===s&&(s=""),i=i?i:{};var n,o;for(n in e)"object"==typeof e[n]?t.flatObj(e[n],i,t.getFlatKey(s,n)):(o=e[n],i[t.getFlatKey(s,n)]=e[n]);return i},t.recoverObj=function(e){var i,s={};for(i in e)t.setKeyValue(s,i,e[i]);return s},t.differ=function(e,i){var s;e=t.flatObj(e),i=t.flatObj(i);var n={};for(s in e)i.hasOwnProperty(s)||(n[s]="被删除");for(s in i)i[s]!=e[s]&&(n[s]={pre:e[s],now:i[s]});return n},t.traceDifferObj=function(t){var e,i;for(e in t)"string"==typeof t[e]?console.log(e+":",t[e]):(i=t[e],console.log(e+":","now:",i.now,"pre:",i.pre))},t.setKeyValue=function(e,i,s){if(i.indexOf(t.sign)>=0){for(var n,o=i.split(t.sign);o.length>1;)if(n=o.shift(),e[n]||(e[n]={},console.log("addKeyObj:",n)),e=e[n],!e)return void console.log("wrong flatKey:",i);e[o.shift()]=s}else e[i]=s},t.clearObj=function(t){var e;for(e in t)delete t[e]},t.copyObjFast=function(t){var e;return e=laya.debug.tools.ObjectTools.getJsonString(t),laya.debug.tools.ObjectTools.getObj(e)},t.copyObj=function(e){if(e instanceof Array)return t.copyArr(e);var i,s={};for(i in e)null===e[i]||void 0===e[i]?s[i]=e[i]:e[i]instanceof Array?s[i]=t.copyArr(e[i]):"object"==typeof e[i]?s[i]=t.copyObj(e[i]):s[i]=e[i];return s},t.copyArr=function(e){var i;i=[];var s=0,n=0;for(n=e.length,s=0;n>s;s++)i.push(t.copyObj(e[s]));return i},t.concatArr=function(t,e){if(!e)return t;if(!t)return e;var i=0,s=e.length;for(i=0;s>i;i++)t.push(e[i]);return t},t.insertArrToArr=function(t,e,i){void 0===i&&(i=0),0>i&&(i=0),i>t.length&&(i=t.length);var s=(t.length,0),n=0;t.length+=e.length;var o=0;for(o=e.length,s=t.length-1;s>=i;s--)t[s]=t[s-o];for(n=e.length,s=0;n>s;s++)t[i+s]=e[s];return t},t.clearArr=function(t){return t?(t.length=0,t):t},t.removeFromArr=function(t,e){var i=0,s=0;for(s=t.length,i=0;s>i;i++)if(t[i]==e)return void t[i].splice(i,1)},t.setValueArr=function(e,i){return e||(e=[]),e.length=0,t.concatArr(e,i)},t.getFrom=function(t,e,i){var s=0;for(s=0;i>s;s++)t.push(e[s]);return t},t.getFromR=function(t,e,i){var s=0;for(s=0;i>s;s++)t.push(e.pop());return t},t.enableDisplayTree=function(t){for(;t;)t.mouseEnabled=!0,t=t.parent},t.getJsonString=function(t){var e;return e=JSON.stringify(t)},t.getObj=function(t){var e;return e=JSON.parse(t)},t.getKeyArr=function(t){var e,i;e=[];for(i in t)e.push(i);return e},t.getObjValues=function(t,e){var i,s=0,n=0;for(n=t.length,i=[],s=0;n>s;s++)i.push(t[s][e]);return i},t.hasKeys=function(t,e){var i=0,s=0;for(s=e.length,i=0;s>i;i++)if(!t.hasOwnProperty(e[i]))return!1;return!0},t.copyValueByArr=function(t,e,i){var s=0,n=i.length;for(s=0;n>s;s++)null!==e[i[s]]&&(t[i[s]]=e[i[s]])},t.getNoSameArr=function(t){var e,i=0,s=0;e=[];var n;for(s=t.length,i=0;s>i;i++)n=t[i],e.indexOf(n)<0&&e.push(n);return e},t.insertValue=function(t,e){var i;for(i in e)t[i]=e[i]},t.replaceValue=function(e,i){var s;for(s in e)i.hasOwnProperty(e[s])&&(e[s]=i[e[s]]),"object"==typeof e[s]&&t.replaceValue(e[s],i)},t.setKeyValues=function(t,e,i){var s=0,n=0;for(n=t.length,s=0;n>s;s++)t[s][e]=i},t.findItemPos=function(t,e,i){var s=0,n=0;for(n=t.length,s=0;n>s;s++)if(t[s][e]==i)return s;return-1},t.setObjValue=function(t,e,i){return t[e]=i,t},t.setAutoTypeValue=function(e,i,s){return e.hasOwnProperty(i)&&t.isNumber(e[i])?e[i]=parseFloat(s):e[i]=s,e},t.getAutoValue=function(t){return parseFloat(t)==t?parseFloat(t):t},t.isNumber=function(t){return parseFloat(t)==t},t.isNaNS=function(t){return"NaN"==t.toString()},t.isNaN=function(t){return"number"==typeof t?!1:"string"!=typeof t||"NaN"==parseFloat(t).toString()||parseFloat(t)!=t},t.getStrTypedValue=function(e){return"false"==e?!1:"true"==e?!0:"null"==e?null:"undefined"==e?null:t.getAutoValue(e)},t.createKeyValueDic=function(t,e){var i;i={};var s=0,n=0;n=t.length;var o,r;for(s=0;n>s;s++)o=t[s],r=o[e],i[r]=o;return i},t.sign="_",t}(),ObjTimeCountTool=function(){function t(){this.timeDic={},this.resultDic={},this.countDic={},this.resultCountDic={},this.nodeDic={},this.resultNodeDic={}}__class(t,"laya.debug.tools.ObjTimeCountTool");var e=t.prototype;return e.addTime=function(t,e){IDTools.idObj(t);var i=0;i=IDTools.getObjID(t),this.timeDic.hasOwnProperty(i)||(this.timeDic[i]=0),this.timeDic[i]=this.timeDic[i]+e,this.countDic.hasOwnProperty(i)||(this.countDic[i]=0),this.countDic[i]=this.countDic[i]+1,this.nodeDic[i]=t},e.getTime=function(t){IDTools.idObj(t);var e=0;return e=IDTools.getObjID(t),this.resultDic[e]?this.resultDic[e]:0},e.getCount=function(t){IDTools.idObj(t);var e=0;return e=IDTools.getObjID(t),this.resultCountDic[e]},e.reset=function(){var t;for(t in this.timeDic)this.timeDic[t]=0,this.countDic[t]=0;ObjectTools.clearObj(this.nodeDic)},e.updates=function(){ObjectTools.clearObj(this.resultDic),ObjectTools.insertValue(this.resultDic,this.timeDic),ObjectTools.clearObj(this.resultCountDic),ObjectTools.insertValue(this.resultCountDic,this.countDic),ObjectTools.insertValue(this.resultNodeDic,this.nodeDic),this.reset()},t}(),RecInfo=function(){function t(){this.oX=0,this.oY=0,this.hX=1,this.hY=0,this.vX=0,this.vY=1}__class(t,"laya.debug.tools.RecInfo");var e=t.prototype;return e.initByPoints=function(t,e,i){this.oX=t.x,this.oY=t.y,this.hX=e.x,this.hY=e.y,this.vX=i.x,this.vY=i.y},__getset(0,e,"rotation",function(){return this.rotationRad/Math.PI*180}),__getset(0,e,"width",function(){return Math.sqrt((this.hX-this.oX)*(this.hX-this.oX)+(this.hY-this.oY)*(this.hY-this.oY))}),__getset(0,e,"x",function(){return this.oX}),__getset(0,e,"rotationRadV",function(){var t=this.vX-this.oX,e=this.vY-this.oY;return Math.atan2(e,t)}),__getset(0,e,"y",function(){return this.oY}),__getset(0,e,"rotationRad",function(){var t=this.hX-this.oX,e=this.hY-this.oY;return Math.atan2(e,t)}),__getset(0,e,"height",function(){return Math.sqrt((this.vX-this.oX)*(this.vX-this.oX)+(this.vY-this.oY)*(this.vY-this.oY))}),__getset(0,e,"rotationV",function(){return this.rotationRadV/Math.PI*180}),t.createByPoints=function(e,i,s){var n;return n=new t,n.initByPoints(e,i,s),n},t.getGlobalPoints=function(t,e,i){return t.localToGlobal(new Point(e,i))},t.getGlobalRecInfo=function(e,i,s,n,o,r,a){return void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=1),void 0===o&&(o=0),void 0===r&&(r=0),void 0===a&&(a=1),t.createByPoints(t.getGlobalPoints(e,i,s),t.getGlobalPoints(e,n,o),t.getGlobalPoints(e,r,a))},t}(),RenderAnalyser=function(){function t(){this.timeDic={},this.resultDic={},this.countDic={},this.resultCountDic={},this.nodeDic={},this.isWorking=!1,this.working=!0}__class(t,"laya.debug.tools.RenderAnalyser");var e=t.prototype;return e.render=function(t,e){this.addTime(t,e)},e.addTime=function(t,e){IDTools.idObj(t);var i=0;i=IDTools.getObjID(t),this.timeDic.hasOwnProperty(i)||(this.timeDic[i]=0),
this.timeDic[i]=this.timeDic[i]+e,this.countDic.hasOwnProperty(i)||(this.countDic[i]=0),this.countDic[i]=this.countDic[i]+1,this.nodeDic[i]=t},e.getTime=function(t){IDTools.idObj(t);var e=0;return e=IDTools.getObjID(t),this.resultDic[e]?this.resultDic[e]:0},e.getCount=function(t){IDTools.idObj(t);var e=0;return e=IDTools.getObjID(t),this.resultCountDic[e]},e.reset=function(){var t;for(t in this.timeDic)this.timeDic[t]=0,this.countDic[t]=0;ObjectTools.clearObj(this.nodeDic)},e.updates=function(){ObjectTools.clearObj(this.resultDic),ObjectTools.insertValue(this.resultDic,this.timeDic),ObjectTools.clearObj(this.resultCountDic),ObjectTools.insertValue(this.resultCountDic,this.countDic),this.reset()},__getset(0,e,"working",null,function(t){this.isWorking=t,t?Laya.timer.loop(NodeConsts.RenderCostMaxTime,this,this.updates):Laya.timer.clear(this,this.updates)}),__static(t,["I",function(){return this.I=new t}]),t}(),DisResizer=function(){function t(){}return __class(t,"laya.debug.tools.resizer.DisResizer"),t.init=function(){t._up||(t._up=new AutoFillRec("T"),t._up.height=2,t._up.type=0,t._down=new AutoFillRec("T"),t._down.height=2,t._down.type=0,t._left=new AutoFillRec("R"),t._left.width=2,t._left.type=1,t._right=new AutoFillRec("R"),t._right.width=2,t._right.type=1,t._barList=[t._up,t._down,t._left,t._right],t.addEvent())},t.stageDown=function(e){var i;i=e.target,t._tar&&DisControlTool.isInTree(t._tar,i)||t.clear()},t.clear=function(){t._tar=null,Laya.stage.off("mouseup",null,t.stageDown),DisControlTool.removeItems(t._barList),t.clearDragEvents()},t.addEvent=function(){var e,i=0,s=0;for(s=t._barList.length,i=0;s>i;i++)e=t._barList[i],e.on("mousedown",null,t.barDown)},t.barDown=function(e){if(t.clearDragEvents(),t.tBar=e.target,t.tBar){var i;i=new Rectangle,0==t.tBar.type?(i.x=t.tBar.x,i.width=0,i.y=t.tBar.y-200,i.height=400):(i.x=t.tBar.x-200,i.width=400,i.y=0,i.height=0);var s;s={},s.area=i,t.tBar.record(),t.tBar.startDrag(i),t.tBar.on("dragmove",null,t.draging),t.tBar.on("dragend",null,t.dragEnd)}},t.draging=function(e){if(console.log("draging"),t.tBar&&t._tar){switch(t.tBar){case t._left:t._tar.x+=t.tBar.getDx(),t._tar.width-=t.tBar.getDx(),t._up.width-=t.tBar.getDx(),t._down.width-=t.tBar.getDx(),t._right.x-=t.tBar.getDx(),t.tBar.x-=t.tBar.getDx();break;case t._right:t._tar.width+=t.tBar.getDx(),t._up.width+=t.tBar.getDx(),t._down.width+=t.tBar.getDx();break;case t._up:t._tar.y+=t.tBar.getDy(),t._tar.height-=t.tBar.getDy(),t._right.height-=t.tBar.getDy(),t._left.height-=t.tBar.getDy(),t._down.y-=t.tBar.getDy(),t.tBar.y-=t.tBar.getDy();break;case t._down:t._tar.height+=t.tBar.getDy(),t._right.height+=t.tBar.getDy(),t._left.height+=t.tBar.getDy()}t.tBar.record()}},t.dragEnd=function(e){console.log("dragEnd"),t.clearDragEvents(),t.updates()},t.clearDragEvents=function(){t.tBar&&(t.tBar.off("dragmove",null,t.draging),t.tBar.off("dragend",null,t.dragEnd))},t.setUp=function(e,i){void 0===i&&(i=!1),i&&e==t._tar||(DisControlTool.removeItems(t._barList),(t._tar!=e||(t._tar=null,t.clearDragEvents(),i))&&(t._tar=e,t.updates(),DisControlTool.addItems(t._barList,e),Laya.stage.off("mouseup",null,t.stageDown),Laya.stage.on("mouseup",null,t.stageDown)))},t.updates=function(){var e;if(e=t._tar){var i;i=new Rectangle(0,0,e.width,e.height),t._up.x=i.x,t._up.y=i.y,t._up.width=i.width,t._down.x=i.x,t._down.y=i.y+i.height-2,t._down.width=i.width,t._left.x=i.x,t._left.y=i.y,t._left.height=i.height,t._right.x=i.x+i.width-2,t._right.y=i.y,t._right.height=i.height}},t.Side=2,t.Vertical=1,t.Horizon=0,t._up=null,t._down=null,t._left=null,t._right=null,t._barList=null,t._tar=null,t.barWidth=2,t.useGetBounds=!1,t.tBar=null,t}(),SimpleResizer=function(){function t(){}return __class(t,"laya.debug.tools.resizer.SimpleResizer"),t.setResizeAble=function(e,i,s,n){void 0===s&&(s=150),void 0===n&&(n=150),e.on("mousedown",null,t.onMouseDown,[i,s,n])},t.onMouseDown=function(e,i,s,n){if(t.clearEvents(),e){t.preMousePoint.setTo(Laya.stage.mouseX,Laya.stage.mouseY),t.preTarSize.setTo(e.width,e.height),t.preScale.setTo(1,1);var o;for(o=e;o&&o!=Laya.stage;)t.preScale.x*=o.scaleX,t.preScale.y*=o.scaleY,o=o.parent;Laya.stage.on("mouseup",null,t.onMouseMoveEnd),Laya.timer.loop(100,null,t.onMouseMoving,[e,i,s])}},t.onMouseMoving=function(e,i,s,n){var o=(Laya.stage.mouseX-t.preMousePoint.x)/t.preScale.x+t.preTarSize.x,r=(Laya.stage.mouseY-t.preMousePoint.y)/t.preScale.y+t.preTarSize.y;e.width=o>i?o:i,e.height=r>s?r:s},t.onMouseMoveEnd=function(e){t.clearEvents()},t.clearEvents=function(){Laya.timer.clear(null,t.onMouseMoving),Laya.stage.off("mouseup",null,t.onMouseMoveEnd)},__static(t,["preMousePoint",function(){return this.preMousePoint=new Point},"preTarSize",function(){return this.preTarSize=new Point},"preScale",function(){return this.preScale=new Point}]),t}(),ResTools=function(){function t(){}return __class(t,"laya.debug.tools.ResTools"),t.getCachedResList=function(){return Render.isWebGL?t.getWebGlResList():t.getCanvasResList()},t.getWebGlResList=function(){var t;t=[];var e,i;i=ResourceManager.currentResourceManager._resources;for(var s=0;s<i.length;s++)if(e=i[s],"WebGLImage"==ClassTool.getClassName(e)){var n=e.src;n&&n.indexOf("data:image/png;base64")<0&&t.push(n)}return t},t.getCanvasResList=function(){var e;e={};var i;return i=Loader.loadedMap,t.collectPics(i,e),t.getArrFromDic(e)},t.getArrFromDic=function(t){var e,i;i=[];for(e in t)i.push(e);return i},t.collectPics=function(t,e){if(t){var i,s;for(i in t)if(s=t[i],s&&s.bitmap&&s.bitmap.src){var n=s.bitmap.src;n.indexOf("data:image/png;base64")<0&&(e[s.bitmap.src]=!0)}}},t}(),RunProfile=function(){function t(){}return __class(t,"laya.debug.tools.RunProfile"),t.run=function(e,i){void 0===i&&(i=3);var s;t.infoDic.hasOwnProperty(e)||(t.infoDic[e]=new CountTool),s=t.infoDic[e];var n;n=TraceTool.getCallLoc(i)+"\n"+TraceTool.getCallStack(1,i-3),s.add(n),t._runShowDic[e]&&(console.log("Create:"+e),console.log(n))},t.showClassCreate=function(e){t._runShowDic[e]=!0},t.hideClassCreate=function(e){t._runShowDic[e]=!1},t.getRunInfo=function(e){var i;return i=t.infoDic[e],t.infoDic[e]},t.runTest=function(t,e,i){void 0===i&&(i="runTest"),DTrace.timeStart(i);var s=0;for(s=0;e>s;s++)t();DTrace.timeEnd(i)},t.infoDic={},t._runShowDic={},t}(),StringTool=function(){function t(){}return __class(t,"laya.debug.tools.StringTool"),t.toUpCase=function(t){return t.toUpperCase()},t.toLowCase=function(t){return t.toLowerCase()},t.toUpHead=function(t){var e;return t.length<=1?t.toUpperCase():e=t.charAt(0).toUpperCase()+t.substr(1)},t.toLowHead=function(t){var e;return t.length<=1?t.toLowerCase():e=t.charAt(0).toLowerCase()+t.substr(1)},t.packageToFolderPath=function(t){var e;return e=t.replace(".","/")},t.insert=function(t,e,i){return t.substring(0,i)+e+t.substr(i)},t.insertAfter=function(e,i,s,n){void 0===n&&(n=!1);var o=0;return o=n?e.lastIndexOf(s):e.indexOf(s),o>=0?t.insert(e,i,o+s.length):e},t.insertBefore=function(e,i,s,n){void 0===n&&(n=!1);var o=0;return o=n?e.lastIndexOf(s):e.indexOf(s),o>=0?t.insert(e,i,o):e},t.insertParamToFun=function(e,i){var s;s=t.getParamArr(e);var n;return n=i.join(","),s.length>0&&(n=","+n),t.insertBefore(e,n,")",!0)},t.trim=function(e,i){i||(i=[" ","\r","\n","	",String.fromCharCode(65279)]);var s,n=0,o=0;for(s=e,o=i.length,n=0;o>n;n++)s=t.getReplace(s,i[n],"");return s},t.isEmpty=function(e){return e.length<1?!0:t.emptyStrDic.hasOwnProperty(e)},t.trimLeft=function(e){var i=0;i=0;var s=0;for(s=e.length;t.isEmpty(e.charAt(i))&&s>i;)i++;return s>i?e.substr(i):""},t.trimRight=function(e){var i=0;for(i=e.length-1;t.isEmpty(e.charAt(i))&&i>=0;)i--;var s;return s=e.substring(0,i),i>=0?e.substring(0,i+1):""},t.trimSide=function(e){var i;return i=t.trimLeft(e),i=t.trimRight(i)},t.isOkFileName=function(e){if(""==laya.debug.tools.StringTool.trimSide(e))return!1;var i=0,s=0;for(s=e.length,i=0;s>i;i++)if(t.specialChars[e.charAt(i)])return!1;return!0},t.trimButEmpty=function(e){return t.trim(e,["\r","\n","	"])},t.removeEmptyStr=function(e){var i=0;i=e.length-1;var s;for(i=i;i>=0;i--)s=e[i],s=laya.debug.tools.StringTool.trimSide(s),t.isEmpty(s)?e.splice(i,1):e[i]=s;return e},t.ifNoAddToTail=function(t,e){return t.indexOf(e)>=0?t:t+e},t.trimEmptyLine=function(e){var i,s,n=0;for(i=e.split("\n"),n=i.length-1;n>=0;n--)s=i[n],t.isEmptyLine(s)&&i.splice(n,1);return i.join("\n")},t.isEmptyLine=function(t){return t=laya.debug.tools.StringTool.trim(t),""==t},t.removeCommentLine=function(e){var i;i=[];var s,n,o=0;o=0;var r=0,a=0;for(r=e.length;r>o;){if(n=s=e[o],a=s.indexOf("/**"),a>=0)for(n=s.substring(0,a-1),t.addIfNotEmpty(i,n);r>o;){if(s=e[o],a=s.indexOf("*/"),a>=0){n=s.substring(a+2),t.addIfNotEmpty(i,n);break}o++}else s.indexOf("//")>=0?0==laya.debug.tools.StringTool.trim(s).indexOf("//")||t.addIfNotEmpty(i,n):t.addIfNotEmpty(i,n);o++}return i},t.addIfNotEmpty=function(e,i){if(i){var s;s=t.trim(i),""!=s&&e.push(i)}},t.trimExt=function(e,i){var s;s=t.trim(e);var n=0,o=0;for(o=i.length,n=0;o>n;n++)s=t.getReplace(s,i[n],"");return s},t.getBetween=function(t,e,i,s){if(void 0===s&&(s=!1),!t)return"";if(!e)return"";if(!i)return"";var n=0,o=0;if(n=t.indexOf(e),0>n)return"";if(s){if(o=t.lastIndexOf(i),n>o)return""}else o=t.indexOf(i,n+1);return 0>o?"":t.substring(n+e.length,o)},t.getSplitLine=function(t,e){return void 0===e&&(e=" "),t.split(e)},t.getLeft=function(t,e){var i=0;return i=t.indexOf(e),t.substr(0,i)},t.getRight=function(t,e){var i=0;return i=t.indexOf(e),t.substr(i+1)},t.delelteItem=function(t){for(;t.length>0&&""==t[0];)t.shift()},t.getWords=function(e){var i=t.getSplitLine(e);return t.delelteItem(i),i},t.getLinesI=function(t,e,i){var s=0,n=[];for(s=t;e>=s;s++)n.push(i[s]);return n},t.structfy=function(e,i,s){void 0===i&&(i=4),void 0===s&&(s=!0),s&&(e=laya.debug.tools.StringTool.trimEmptyLine(e));var n,o=0;o=0;var r;r=t.getEmptyStr(0),n=e.split("\n");var a,h=0,l=0;for(l=n.length,h=0;l>h;h++)a=n[h],a=laya.debug.tools.StringTool.trimLeft(a),a=laya.debug.tools.StringTool.trimRight(a),o+=t.getPariCount(a),a.indexOf("}")>=0&&(r=t.getEmptyStr(o*i)),a=r+a,n[h]=a,r=t.getEmptyStr(o*i);return n.join("\n")},t.getEmptyStr=function(e){if(!t.emptyDic.hasOwnProperty(e)){var i=0,s=0;s=e;var n;for(n="",i=0;s>i;i++)n+=" ";t.emptyDic[e]=n}return t.emptyDic[e]},t.getPariCount=function(t,e,i){void 0===e&&(e="{"),void 0===i&&(i="}");var s;s={},s[e]=1,s[i]=-1;var n,o=0,r=0;r=t.length;var a=0;for(a=0,o=0;r>o;o++)n=t.charAt(o),s.hasOwnProperty(n)&&(a+=s[n]);return a},t.readInt=function(t,e){void 0===e&&(e=0);var i=NaN;i=0;var s,n=0,o=!1;o=!1;var r=0;for(r=t.length,n=e;r>n;n++)if(s=t.charAt(n),Number(s)>0||"0"==s)i=10*i+Number(s),i>0&&(o=!0);else if(o)return i;return i},t.getReplace=function(t,e,i){if(!t)return"";var s;return s=t.replace(new RegExp(e,"g"),i)},t.getWordCount=function(t,e){var i=new RegExp(e,"g");return t.match(i).length},t.getResolvePath=function(e,i){if(t.isAbsPath(e))return e;var s;s="\\",i.indexOf("/")>=0&&(s="/"),i.charAt(i.length-1)==s&&(i=i.substr(0,i.length-1));var n;n=".."+s;var o;o="."+s;var r=0;r=t.getWordCount(e,n),e=laya.debug.tools.StringTool.getReplace(e,n,""),e=laya.debug.tools.StringTool.getReplace(e,o,"");var a=0,h=0;h=r;for(a=0;h>a;a++)i=t.removeLastSign(e,s);return i+s+e},t.isAbsPath=function(t){return t.indexOf(":")>=0},t.removeLastSign=function(t,e){var i=0;return i=t.lastIndexOf(e),t=t.substring(0,i)},t.getParamArr=function(e){var i;return i=laya.debug.tools.StringTool.getBetween(e,"(",")",!0),t.trim(i).length<1?[]:i.split(",")},t.copyStr=function(t){return t.substring()},t.ArrayToString=function(e){var i;return i="[{items}]".replace(new RegExp("\\{items\\}","g"),t.getArrayItems(e))},t.getArrayItems=function(e){var i;if(e.length<1)return"";i=t.parseItem(e[0]);var s=0,n=0;for(n=e.length,s=1;n>s;s++)i+=","+t.parseItem(e[s]);return i},t.parseItem=function(t){var e;return e='"'+t+'"',""},t.initAlphaSign=function(){t.alphaSigns||(t.alphaSigns={},t.addSign("a","z",t.alphaSigns),t.addSign("A","Z",t.alphaSigns),t.addSign("0","9",t.alphaSigns))},t.addSign=function(t,e,i){var s=0,n=0,o=0;for(o=t.charCodeAt(0),n=e.charCodeAt(0),s=o;n>=s;s++)i[String.fromCharCode(s)]=!0,console.log("add :"+String.fromCharCode(s))},t.isPureAlphaNum=function(e){if(t.initAlphaSign(),!e)return!0;var i=0,s=0;for(s=e.length,i=0;s>i;i++)if(!t.alphaSigns[e.charAt(i)])return!1;return!0},t.emptyDic={},t.alphaSigns=null,__static(t,["emptyStrDic",function(){return this.emptyStrDic={" ":!0,"\r":!0,"\n":!0,"	":!0}},"specialChars",function(){return this.specialChars={"*":!0,"&":!0,"%":!0,"#":!0,"?":!0}}]),t}(),TraceTool=function(){function t(){}return __class(t,"laya.debug.tools.TraceTool"),t.closeAllLog=function(){var e;e=t.emptyLog,Browser.window.console.log=e},t.emptyLog=function(){},t.traceObj=function(e){t.tempArr.length=0;var i;for(i in e)t.tempArr.push(i+":"+e[i]);var s;return s=t.tempArr.join("\n"),console.log(s),s},t.traceObjR=function(e){t.tempArr.length=0;var i;for(i in e)t.tempArr.push(e[i]+":"+i);var s;return s=t.tempArr.join("\n"),console.log(s),s},t.traceSize=function(t){DebugTool.dTrace("Size: x:"+t.x+" y:"+t.y+" w:"+t.width+" h:"+t.height+" scaleX:"+t.scaleX+" scaleY:"+t.scaleY)},t.traceSplit=function(t){console.log("---------------------"+t+"---------------------------")},t.group=function(t){console.group(t)},t.groupEnd=function(){console.groupEnd()},t.getCallStack=function(e,i){void 0===e&&(e=1),void 0===i&&(i=1);var s;s=t.getCallStack,s=s.caller.caller;var n;for(n="";s&&e>0;)0>=i&&(n+=s+"<-",e--),s=s.caller,i--;return n},t.getCallLoc=function(e){void 0===e&&(e=2);var i;try{t.Erroer.i++}catch(s){var n;n=s.stack.replace(/Error\n/).split(/\n/),i=n[e]?n[e].replace(/^\s+|\s+$/,""):"unknow"}return i},t.traceCallStack=function(){var e;try{t.Erroer.i++}catch(i){e=i.stack}return console.log(e),e},t.getPlaceHolder=function(e){if(!t.holderDic.hasOwnProperty(e)){var i;i="";var s=0;for(s=0;e>s;s++)i+="-";t.holderDic[e]=i}return t.holderDic[e]},t.traceTree=function(e,i,s){if(void 0===i&&(i=0),void 0===s&&(s=!0),s&&console.log("traceTree"),e){var n=0,o=0;if(e.numChildren<1)return void console.log(e);for(t.group(e),o=e.numChildren,i++,n=0;o>n;n++)t.traceTree(e.getChildAt(n),i,!1);t.groupEnd()}},t.getClassName=function(t){return t.constructor.name},t.traceSpriteInfo=function(e,i,s,n){return void 0===i&&(i=!0),void 0===s&&(s=!0),void 0===n&&(n=!0),e instanceof laya.display.Sprite?e?(t.traceSplit("traceSpriteInfo"),DebugTool.dTrace(laya.debug.tools.TraceTool.getClassName(e)+":"+e.name),n?t.traceTree(e):console.log(e),s&&t.traceSize(e),void(i&&console.log("bounds:"+e.getBounds()))):void console.log("null Sprite"):void console.log("not Sprite")},t.tempArr=[],t.Erroer=null,t.holderDic={},t}(),ValueChanger=function(){function t(){this.target=null,this.key=null,this._tValue=NaN,this.preValue=0}__class(t,"laya.debug.tools.ValueChanger");var e=t.prototype;return e.record=function(){this.preValue=this.value},e.showValueByAdd=function(t){this.value=this.preValue+t},e.showValueByScale=function(t){this.value=this.preValue*t},e.recover=function(){this.value=this.preValue},e.dispose=function(){this.target=null},__getset(0,e,"value",function(){return this.target&&(this._tValue=this.target[this.key]),this._tValue},function(t){this._tValue=t,this.target&&(this.target[this.key]=t)}),__getset(0,e,"dValue",function(){return this.value-this.preValue}),__getset(0,e,"scaleValue",function(){return this.value/this.preValue}),t.create=function(e,i){var s;return s=new t,s.target=e,s.key=i,s},t}(),VisibleAnalyser=function(){function t(){}return __class(t,"laya.debug.tools.VisibleAnalyser"),t.analyseTarget=function(e){var i=!1;i=e.displayedInStage;var s;s=NodeUtils.getGRec(e);var n=new Rectangle;n.setTo(0,0,Laya.stage.width,Laya.stage.height);var o,r=!1;o=n.intersection(s),r=o.width>0&&o.height>0;var a=NaN;a=NodeUtils.getGAlpha(e);var h=!1;h=NodeUtils.getGVisible(e);var l;l="",l+="isInstage:"+i+"\n",l+="isInVisibleRec:"+r+"\n",l+="gVisible:"+h+"\n",l+="gAlpha:"+a+"\n",i&&r&&h&&a>0&&(Render.isWebGL?t.anlyseRecVisible(e):SpriteRenderForVisibleAnalyse.I.analyseNode(e),l+="coverRate:"+t.coverRate+"\n",t._coverList.length>0&&Laya.timer.once(1e3,null,t.showListLater)),console.log(l),OutPutView.I.showTxt(l)},t.showListLater=function(){NodeListPanelView.I.showList(t._coverList)},t.isCoverByBrother=function(t){var e=t.parent;if(e){var i;i=e._childs;var s=0;if(s=i.indexOf(t),!(0>s)){var n;n=e.getSelfBounds(),n.width<=0||n.height<=0}}},t.anlyseRecVisible=function(e){t.isNodeWalked=!1,t._analyseTarget=e,t.mainCanvas||(t.mainCanvas=CanvasTools.createCanvas(Laya.stage.width,Laya.stage.height)),CanvasTools.clearCanvas(t.mainCanvas),t.tColor=1,t.resetCoverList(),WalkTools.walkTargetEX(Laya.stage,t.recVisibleWalker,null,t.filterFun),t.isTarRecOK?t.coverRate=CanvasTools.getDifferRate(t.preImageData,t.tarImageData):t.coverRate=0,console.log("coverRate:",t.coverRate)},t.getRecArea=function(t){return t.width*t.height},t.addCoverNode=function(e,i){var s;s={},s.path=e,s.label=ClassTool.getNodeClassAndName(e)+":"+i,s.coverRate=i,t._coverList.push(s),console.log("coverByNode:",e,i)},t.resetCoverList=function(){t._coverList.length=0},t.recVisibleWalker=function(e){if(e==t._analyseTarget)t.isNodeWalked=!0,t.tarRec.copyFrom(NodeUtils.getGRec(e)),console.log("tarRec:",t.tarRec.toString()),t.tarRec.width>0&&t.tarRec.height>0?(t.isTarRecOK=!0,t.tColor++,CanvasTools.fillCanvasRec(t.mainCanvas,t.tarRec,ColorTool.toHexColor(t.tColor)),t.preImageData=CanvasTools.getImageDataFromCanvasByRec(t.mainCanvas,t.tarRec),t.tarImageData=CanvasTools.getImageDataFromCanvasByRec(t.mainCanvas,t.tarRec)):console.log("tarRec Not OK:",t.tarRec);else if(t.isTarRecOK){var i;if(i=NodeUtils.getGRec(e),t.interRec=t.tarRec.intersection(i,t.interRec),t.interRec&&t.interRec.width>0&&t.interRec.height>0){t.tColor++,CanvasTools.fillCanvasRec(t.mainCanvas,i,ColorTool.toHexColor(t.tColor)),t.tImageData=CanvasTools.getImageDataFromCanvasByRec(t.mainCanvas,t.tarRec);var s=NaN;s=CanvasTools.getDifferRate(t.preImageData,t.tImageData),t.preImageData=t.tImageData,t.addCoverNode(e,s)}}},t.filterFun=function(t){return 0==t.visible?!1:t.alpha<0?!1:!DebugInfoLayer.I.isDebugItem(t)},t.isNodeWalked=!1,t._analyseTarget=null,t.isTarRecOK=!1,t.mainCanvas=null,t.preImageData=null,t.tImageData=null,t.tarImageData=null,t.coverRate=NaN,t.tColor=0,t._coverList=[],__static(t,["tarRec",function(){return this.tarRec=new Rectangle},"interRec",function(){return this.interRec=new Rectangle}]),t}(),WalkTools=function(){function t(){}return __class(t,"laya.debug.tools.WalkTools"),t.walkTarget=function(e,i,s){i.apply(s,[e]);var n,o=0,r=0;for(r=e.numChildren,o=0;r>o;o++)n=e.getChildAt(o),t.walkTarget(n,i,n)},t.walkTargetEX=function(e,i,s,n){if(null==n||n(e)){i.apply(s,[e]);var o,r,a=0,h=0;for(r=e._childs,h=r.length,a=0;h>a;a++)o=r[a],t.walkTarget(o,i,o)}},t.walkChildren=function(e,i,s){!e||e.numChildren<1||t.walkArr(DisControlTool.getAllChild(e),i,s)},t.walkArr=function(t,e,i){if(t){var s=0,n=0;for(n=t.length,s=0;n>s;s++)e.apply(i,[t[s],s])}},t}(),Watcher=function(){function t(){}return __class(t,"laya.debug.tools.Watcher"),t.watch=function(t,e,i){VarHook.hookVar(t,e,i)},t.traceChange=function(e,i,s){void 0===s&&(s="var changed:"),VarHook.hookVar(e,i,[t.getTraceValueFun(i),VarHook.getLocFun(s)])},t.debugChange=function(t,e){VarHook.hookVar(t,e,[VarHook.getLocFun("debug loc"),FunHook.debugHere])},t.differChange=function(e,i,s,n){void 0===n&&(n=""),VarHook.hookVar(e,i,[t.getDifferFun(e,i,s,n)])},t.getDifferFun=function(t,e,i,s){void 0===s&&(s="");var n;return n=function(){DifferTool.differ(i,t[e],s)}},t.traceValue=function(t){console.log("value:",t)},t.getTraceValueFun=function(t){var e;return e=function(e){console.log("set "+t+" :",e)}},t}(),NodeMenu=function(){function t(){this._tar=null,this._menu=null,this._shareBtns=["信息面板","边框","进入节点","树定位","Enable链","Size链","节点工具","可见分析","输出到控制台"],this._menuItems=["隐藏节点"],this._menuHide=null,this._menuItemsHide=["显示节点"],this._menu1=null,this._menuItems1=["输出到控制台"]}__class(t,"laya.debug.view.nodeInfo.menus.NodeMenu");var e=t.prototype;return e.showNodeMenu=function(t){return t._style?(this._tar=t,this._menu||(this._menuItems=this._menuItems.concat(this._shareBtns),this._menu=ContextMenu.createMenuByArray(this._menuItems),this._menu.on("select",this,this.onEmunSelect),this._menuItemsHide=this._menuItemsHide.concat(this._shareBtns),this._menuHide=ContextMenu.createMenuByArray(this._menuItemsHide),this._menuHide.on("select",this,this.onEmunSelect)),void(t.visible?this._menu.show():this._menuHide.show())):void DebugTool.log("该节点已不存在，请刷新列表")},e.nodeDoubleClick=function(t){NodeToolView.I.showByNode(t)},e.setNodeListDoubleClickAction=function(t){Browser.onMobile||t.on("doubleclick",this,this.onListDoubleClick,[t])},e.onListDoubleClick=function(t){if(t.selectedItem){var e;e=t.selectedItem.path,laya.debug.view.nodeInfo.menus.NodeMenu.I.nodeDoubleClick(e)}},e.setNodeListAction=function(t){t.on(DebugTool.getMenuShowEvent(),this,this.onListRightClick,[t])},e.onListRightClick=function(t){if(t.selectedItem){var e;e=t.selectedItem.path,laya.debug.view.nodeInfo.menus.NodeMenu.I.objRightClick(e)}},e.objRightClick=function(t){t instanceof laya.display.Sprite?laya.debug.view.nodeInfo.menus.NodeMenu.I.showNodeMenu(t):"object"==typeof t&&laya.debug.view.nodeInfo.menus.NodeMenu.I.showObjectMenu(t)},e.showObjectMenu=function(t){this._tar=t,this._menu1||(this._menu1=ContextMenu.createMenuByArray(this._menuItems1),this._menu1.on("select",this,this.onEmunSelect)),this._menu1.show()},e.onEmunSelect=function(t){var e=t.target.data;if("string"==typeof e){var i;switch(i=e){case"信息面板":ObjectInfoView.showObject(this._tar);break;case"边框":DebugTool.showDisBound(this._tar);break;case"输出到控制台":console.log(this._tar);break;case"树节点":ToolPanel.I.showNodeTree(this._tar);break;case"进入节点":ToolPanel.I.showNodeTree(this._tar);break;case"树定位":ToolPanel.I.showSelectInStage(this._tar);break;case"Enable链":OutPutView.I.dTrace(DebugTool.traceDisMouseEnable(this._tar)),SelectInfosView.I.setSelectList(DebugTool.selectedNodes);break;case"Size链":OutPutView.I.dTrace(DebugTool.traceDisSizeChain(this._tar)),SelectInfosView.I.setSelectList(DebugTool.selectedNodes);break;case"节点工具":NodeToolView.I.showByNode(this._tar);break;case"显示节点":this._tar.visible=!0;break;case"隐藏节点":this._tar.visible=!1;break;case"可见分析":this._tar&&VisibleAnalyser.analyseTarget(this._tar)}}},__getset(1,t,"I",function(){return t._I||(t._I=new t),t._I}),t._I=null,t}(),NodeConsts=function(){function t(){}return __class(t,"laya.debug.view.nodeInfo.NodeConsts"),t.defaultFitlerStr="x,y,width,height,scaleX,scaleY,alpha,renderCost",t.RenderCostMaxTime=3e3,t}(),NodeUtils=function(){function t(){}return __class(t,"laya.debug.view.nodeInfo.NodeUtils"),t.getFilterdTree=function(e,i){i||(i=t.defaultKeys);var s;s={};var n,o=0,r=0;for(r=i.length,o=0;r>o;o++)n=i[o],s[n]=e[n];var a,h;a=e._childs,r=a.length;var l;for(l=[],o=0;r>o;o++)h=a[o],l.push(t.getFilterdTree(h,i));return s.childs=l,s},t.getPropertyDesO=function(e,i){i||(i=t.defaultKeys);var s={};"object"==typeof e?s.label=""+ClassTool.getNodeClassAndName(e):s.label=""+e,s.type="",s.path=e,s.childs=[],s.isDirectory=!1;var n,o,r=0,a=0;if(e instanceof laya.display.Node){for(s.des=ClassTool.getNodeClassAndName(e),s.isDirectory=!0,a=i.length,r=0;a>r;r++)n=i[r],o=t.getPropertyDesO(e[n],i),e.hasOwnProperty(n)?o.label=""+n+":"+o.des:o.label=""+n+":"+ObjectInfoView.getNodeValue(e,n),s.childs.push(o);n="_childs",o=t.getPropertyDesO(e[n],i),o.label=""+n+":"+o.des,o.isChilds=!0,s.childs.push(o)}else if(e instanceof Array){s.des="Array["+e.length+"]",s.isDirectory=!0;var h;for(h=e,a=h.length,r=0;a>r;r++)o=t.getPropertyDesO(h[r],i),o.label=""+r+":"+o.des,s.childs.push(o)}else if("object"==typeof e){s.des=ClassTool.getNodeClassAndName(e),s.isDirectory=!0;for(n in e)o=t.getPropertyDesO(e[n],i),o.label=""+n+":"+o.des,s.childs.push(o)}else s.des=""+e;return s.hasChild=s.childs.length>0,s},t.adptShowKeys=function(t){var e=0,i=0;for(i=t.length,e=i-1;e>=0;e--)t[e]=StringTool.trimSide(t[e]),t[e].length<1&&t.splice(e,1);return t},t.getNodeTreeData=function(e,i){t.adptShowKeys(i);var s;s=t.getPropertyDesO(e,i);var n;return n=[],t.getTreeArr(s,n),n},t.getTreeArr=function(e,i,s){void 0===s&&(s=!0),s&&i.push(e);var n=e.childs,o=0,r=n.length;for(o=0;r>o;o++)s?n[o].nodeParent=e:n[o].nodeParent=null,n[o].isDirectory?t.getTreeArr(n[o],i):i.push(n[o])},t.traceStage=function(){console.log(t.getFilterdTree(Laya.stage,null)),console.log("treeArr:",t.getNodeTreeData(Laya.stage,null))},t.getNodeCount=function(e,i){if(void 0===i&&(i=!1),i&&!e.visible)return 0;var s=0;s=1;var n,o=0,r=0;for(n=e._childs,r=n.length,o=0;r>o;o++)s+=t.getNodeCount(n[o],i);return s},t.getGVisible=function(t){for(;t;){if(!t.visible)return!1;t=t.parent}return!0},t.getGAlpha=function(t){var e=NaN;for(e=1;t;)e*=t.alpha,t=t.parent;return e},t.getGPos=function(t){var e;return e=new Point,t.localToGlobal(e),e},t.getGRec=function(t){var e;if(e=t._getBoundPointsM(!0),!e||e.length<1)return Rectangle.TEMP.setTo(0,0,0,0);e=GrahamScan.pListToPointList(e,!0),WalkTools.walkArr(e,t.localToGlobal,t),e=GrahamScan.pointListToPlist(e);var i;return i=Rectangle._getWrapRec(e,i)},t.getGGraphicRec=function(t){var e;if(e=t.getGraphicBounds()._getBoundPoints(),!e||e.length<1)return Rectangle.TEMP.setTo(0,0,0,0);e=GrahamScan.pListToPointList(e,!0),WalkTools.walkArr(e,t.localToGlobal,t),e=GrahamScan.pointListToPlist(e);var i;return i=Rectangle._getWrapRec(e,i)},t.getNodeCmdCount=function(t){var e=0;return e=t.graphics?t.graphics.cmds?t.graphics.cmds.length:t.graphics._one?1:0:0},t.getNodeCmdTotalCount=function(e){var i,s=0,n=0,o=0;for(i=e._childs,o=i.length,s=t.getNodeCmdCount(e),n=0;o>n;n++)s+=t.getNodeCmdTotalCount(i[n]);return s},t.getRenderNodeCount=function(e){if("none"!=e.cacheAs)return 1;var i,s=0,n=0,o=0;for(i=e._childs,o=i.length,s=1,n=0;o>n;n++)s+=t.getRenderNodeCount(i[n]);return s},t.getReFreshRenderNodeCount=function(e){var i,s=0,n=0,o=0;for(i=e._childs,o=i.length,s=1,n=0;o>n;n++)s+=t.getRenderNodeCount(i[n]);return s},t.showCachedSpriteRecs=function(){t.g=DebugInfoLayer.I.graphicLayer.graphics,t.g.clear(),WalkTools.walkTarget(Laya.stage,t.drawCachedBounds,null)},t.drawCachedBounds=function(e){if("none"!=e.cacheAs&&!DebugInfoLayer.I.isDebugItem(e)){var i;i=t.getGRec(e),t.g.drawRect(i.x,i.y,i.width,i.height,null,"#0000ff",2)}},t.g=null,__static(t,["defaultKeys",function(){return this.defaultKeys=["x","y","width","height"]}]),t}(),StyleConsts=function(){function t(){}return __class(t,"laya.debug.view.StyleConsts"),t.setViewScale=function(e){e.scaleX=e.scaleY=t.PanelScale},__static(t,["PanelScale",function(){return this.PanelScale=Browser.onPC?1:Browser.pixelRatio}]),t}(),Geolocation=function(){function t(){}return __class(t,"laya.device.geolocation.Geolocation"),t.getCurrentPosition=function(e,i){t.navigator.geolocation.getCurrentPosition(function(i){t.position.setPosition(i),e.runWith(t.position)},function(t){i.runWith(t)},{enableHighAccuracy:laya.device.geolocation.Geolocation.enableHighAccuracy,timeout:laya.device.geolocation.Geolocation.timeout,maximumAge:laya.device.geolocation.Geolocation.maximumAge})},t.watchPosition=function(e,i){return t.navigator.geolocation.watchPosition(function(i){t.position.setPosition(i),e.runWith(t.position)},function(t){i.runWith(t)},{enableHighAccuracy:t.enableHighAccuracy,timeout:t.timeout,maximumAge:t.maximumAge})},t.clearWatch=function(e){t.navigator.geolocation.clearWatch(e)},t.PERMISSION_DENIED=1,t.POSITION_UNAVAILABLE=2,t.TIMEOUT=3,t.enableHighAccuracy=!1,t.maximumAge=0,__static(t,["navigator",function(){return this.navigator=Browser.window.navigator},"position",function(){return this.position=new GeolocationInfo},"supported",function(){return this.supported=!!t.navigator.geolocation},"timeout",function(){return this.timeout=1e10}]),t}(),GeolocationInfo=function(){function t(){this.pos=null,this.coords=null}__class(t,"laya.device.geolocation.GeolocationInfo");var e=t.prototype;return e.setPosition=function(t){this.pos=t,this.coords=t.coords},__getset(0,e,"heading",function(){return this.coords.heading}),__getset(0,e,"latitude",function(){return this.coords.latitude}),__getset(0,e,"altitudeAccuracy",function(){return this.coords.altitudeAccuracy}),__getset(0,e,"longitude",function(){return this.coords.longitude}),__getset(0,e,"altitude",function(){return this.coords.altitude}),__getset(0,e,"accuracy",function(){return this.coords.accuracy}),__getset(0,e,"speed",function(){return this.coords.speed}),__getset(0,e,"timestamp",function(){return this.pos.timestamp}),t}(),BitmapFont=function(){function t(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}__class(t,"laya.display.BitmapFont");var e=t.prototype;return e.loadFont=function(t,e){this._path=t,this._complete=e,Laya.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],Handler.create(this,this.onLoaded))},e.onLoaded=function(){this.parseFont(Loader.getRes(this._path),Loader.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.run()},e.parseFont=function(t,e){if(null!=t&&null!=e){this._texture=e;var i=1,s=t.getElementsByTagName("info");this.fontSize=parseInt(s[0].attributes.size.nodeValue);var n=s[0].attributes.padding.nodeValue,o=n.split(",");this._padding=[parseInt(o[0]),parseInt(o[1]),parseInt(o[2]),parseInt(o[3])];var r=t.getElementsByTagName("char"),a=0;for(a=0;a<r.length;a++){var h=r[a].attributes,l=parseInt(h.id.nodeValue),c=parseInt(h.xoffset.nodeValue)/i,u=parseInt(h.yoffset.nodeValue)/i,_=parseInt(h.xadvance.nodeValue)/i,d=new Rectangle;d.x=parseInt(h.x.nodeValue),d.y=parseInt(h.y.nodeValue),d.width=parseInt(h.width.nodeValue),d.height=parseInt(h.height.nodeValue);var f=Texture.create(e,d.x,d.y,d.width,d.height,c,u);this._maxWidth=Math.max(this._maxWidth,_+this.letterSpacing),this._fontCharDic[l]=f,this._fontWidthMap[l]=_}}},e.getCharTexture=function(t){return this._fontCharDic[t.charCodeAt(0)]},e.destroy=function(){if(this._texture){for(var t in this._fontCharDic){var e=this._fontCharDic[t];e&&e.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},e.setSpaceWidth=function(t){this._spaceWidth=t},e.getCharWidth=function(t){var e=t.charCodeAt(0);return this._fontWidthMap[e]?this._fontWidthMap[e]+this.letterSpacing:" "==t?this._spaceWidth+this.letterSpacing:0},e.getTextWidth=function(t){for(var e=0,i=0,s=t.length;s>i;i++)e+=this.getCharWidth(t.charAt(i));return e},e.getMaxWidth=function(){return this._maxWidth},e.getMaxHeight=function(){return this.fontSize},e.drawText=function(t,e,i,s,n,o){var r,a=this.getTextWidth(t),h=0;"center"===n&&(h=(o-a)/2),"right"===n&&(h=o-a);for(var l=0,c=0,u=t.length;u>c;c++)r=this.getCharTexture(t.charAt(c)),r&&(e.graphics.drawTexture(r,i+l+h,s),l+=this.getCharWidth(t.charAt(c)))},t}(),Style=function(){function t(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=t._TF_EMPTY}__class(t,"laya.display.css.Style");var e=t.prototype;return e.getTransform=function(){return this._tf},e.setTransform=function(e){this._tf="none"!==e&&e?e:t._TF_EMPTY},e.setTranslateX=function(e){this._tf===t._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.translateX=e},e.setTranslateY=function(e){this._tf===t._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.translateY=e},e.setScaleX=function(e){this._tf===t._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.scaleX=e},e.setScale=function(e,i){this._tf===t._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.scaleX=e,this._tf.scaleY=i},e.setScaleY=function(e){this._tf===t._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.scaleY=e},e.setRotate=function(e){this._tf===t._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.rotate=e},e.setSkewX=function(e){this._tf===t._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.skewX=e},e.setSkewY=function(e){this._tf===t._TF_EMPTY&&(this._tf=new TransformInfo),
this._tf.skewY=e},e.destroy=function(){this.scrollRect=null},e.render=function(t,e,i,s){},e.getCSSStyle=function(){return CSSStyle.EMPTY},e._enableLayout=function(){return!1},__getset(0,e,"scaleX",function(){return this._tf.scaleX},function(t){this.setScaleX(t)}),__getset(0,e,"transform",function(){return this.getTransform()},function(t){this.setTransform(t)}),__getset(0,e,"translateX",function(){return this._tf.translateX},function(t){this.setTranslateX(t)}),__getset(0,e,"translateY",function(){return this._tf.translateY},function(t){this.setTranslateY(t)}),__getset(0,e,"scaleY",function(){return this._tf.scaleY},function(t){this.setScaleY(t)}),__getset(0,e,"block",function(){return 0!=(1&this._type)}),__getset(0,e,"skewY",function(){return this._tf.skewY},function(t){this.setSkewY(t)}),__getset(0,e,"rotate",function(){return this._tf.rotate},function(t){this.setRotate(t)}),__getset(0,e,"skewX",function(){return this._tf.skewX},function(t){this.setSkewX(t)}),__getset(0,e,"paddingLeft",function(){return 0}),__getset(0,e,"paddingTop",function(){return 0}),__getset(0,e,"absolute",function(){return!0}),t.__init__=function(){t._TF_EMPTY=new TransformInfo,t.EMPTY=new t},t.EMPTY=null,t._TF_EMPTY=null,t}(),Font=function(){function t(e){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=Color.create(t.defaultColor),this.family=t.defaultFamily,this.stroke=t._STROKE,this.size=t.defaultSize,e&&e!==t.EMPTY&&e.copyTo(this)}__class(t,"laya.display.css.Font");var e=t.prototype;return e.set=function(t){this._text=null;for(var e=t.split(" "),i=0,s=e.length;s>i;i++){var n=e[i];switch(n){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}n.indexOf("px")>0&&(this.size=parseInt(n),this.family=e[i+1],i++)}},e.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},e.copyTo=function(e){e._type=this._type,e._text=this._text,e._weight=this._weight,e._color=this._color,e.family=this.family,e.stroke=this.stroke!=t._STROKE?this.stroke.slice():t._STROKE,e.indent=this.indent,e.size=this.size},__getset(0,e,"password",function(){return 0!==(1024&this._type)},function(t){t?this._type|=1024:this._type&=-1025}),__getset(0,e,"color",function(){return this._color.strColor},function(t){this._color=Color.create(t)}),__getset(0,e,"italic",function(){return 0!==(512&this._type)},function(t){t?this._type|=512:this._type&=-513}),__getset(0,e,"bold",function(){return 0!==(2048&this._type)},function(t){t?this._type|=2048:this._type&=-2049}),__getset(0,e,"weight",function(){return""+this._weight},function(t){var e=0;switch(t){case"normal":break;case"bold":this.bold=!0,e=700;break;case"bolder":e=800;break;case"lighter":e=100;break;default:e=parseInt(t)}this._weight=e,this._text=null}),__getset(0,e,"decoration",function(){return this._decoration?this._decoration.value:"none"},function(t){var e=t.split(" ");switch(this._decoration||(this._decoration={}),e[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=e[0]}e[1]&&(this._decoration.color=Color.create(e)),this._decoration.value=t}),t.__init__=function(){t.EMPTY=new t(null)},t.EMPTY=null,t.defaultColor="#000000",t.defaultSize=12,t.defaultFamily="Arial",t.defaultFont="12px Arial",t._STROKE=[0,"#000000"],t._ITALIC=512,t._PASSWORD=1024,t._BOLD=2048,t}(),TransformInfo=function(){function t(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return __class(t,"laya.display.css.TransformInfo"),t}(),Event=function(){function t(){}__class(t,"laya.events.Event");var e=t.prototype;return e.setTo=function(t,e,i){return this.type=t,this.currentTarget=e,this.target=i,this},e.stopPropagation=function(){this._stoped=!0},__getset(0,e,"stageY",function(){return Laya.stage.mouseY}),__getset(0,e,"charCode",function(){return this.nativeEvent.charCode}),__getset(0,e,"touches",function(){var t=this.nativeEvent.touches;if(t)for(var e=Laya.stage,i=0,s=t.length;s>i;i++){var n=t[i],o=Point.TEMP;o.setTo(n.clientX,n.clientY),e._canvasTransform.invertTransformPoint(o),e.transform.invertTransformPoint(o),n.stageX=o.x,n.stageY=o.y}return t}),__getset(0,e,"keyLocation",function(){return this.nativeEvent.keyLocation}),__getset(0,e,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),__getset(0,e,"altKey",function(){return this.nativeEvent.altKey}),__getset(0,e,"shiftKey",function(){return this.nativeEvent.shiftKey}),__getset(0,e,"stageX",function(){return Laya.stage.mouseX}),t.EMPTY=new t,t.MOUSE_DOWN="mousedown",t.MOUSE_UP="mouseup",t.CLICK="click",t.RIGHT_MOUSE_DOWN="rightmousedown",t.RIGHT_MOUSE_UP="rightmouseup",t.RIGHT_CLICK="rightclick",t.MOUSE_MOVE="mousemove",t.MOUSE_OVER="mouseover",t.MOUSE_OUT="mouseout",t.MOUSE_WHEEL="mousewheel",t.ROLL_OVER="mouseover",t.ROLL_OUT="mouseout",t.DOUBLE_CLICK="doubleclick",t.CHANGE="change",t.CHANGED="changed",t.RESIZE="resize",t.ADDED="added",t.REMOVED="removed",t.DISPLAY="display",t.UNDISPLAY="undisplay",t.ERROR="error",t.COMPLETE="complete",t.LOADED="loaded",t.PROGRESS="progress",t.INPUT="input",t.RENDER="render",t.OPEN="open",t.MESSAGE="message",t.CLOSE="close",t.KEY_DOWN="keydown",t.KEY_PRESS="keypress",t.KEY_UP="keyup",t.FRAME="enterframe",t.DRAG_START="dragstart",t.DRAG_MOVE="dragmove",t.DRAG_END="dragend",t.ENTER="enter",t.SELECT="select",t.BLUR="blur",t.FOCUS="focus",t.VISIBILITY_CHANGE="visibilitychange",t.FOCUS_CHANGE="focuschange",t.PLAYED="played",t.PAUSED="paused",t.STOPPED="stopped",t.START="start",t.END="end",t.ENABLE_CHANGED="enablechanged",t.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",t.COMPONENT_ADDED="componentadded",t.COMPONENT_REMOVED="componentremoved",t.LAYER_CHANGED="layerchanged",t.HIERARCHY_LOADED="hierarchyloaded",t.RECOVERING="recovering",t.RECOVERED="recovered",t.RELEASED="released",t.LINK="link",t.LABEL="label",t.FULL_SCREEN_CHANGE="fullscreenchange",t.DEVICE_LOST="devicelost",t.MESH_CHANGED="meshchanged",t.MATERIAL_CHANGED="materialchanged",t.RENDERQUEUE_CHANGED="renderqueuechanged",t.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",t.ANIMATION_CHANGED="animationchanged",t}(),KeyBoardManager=function(){function t(){}return __class(t,"laya.events.KeyBoardManager"),t.__init__=function(){t._addEvent("keydown"),t._addEvent("keypress"),t._addEvent("keyup")},t._addEvent=function(t){Browser.document.addEventListener(t,function(e){laya.events.KeyBoardManager._dispatch(e,t)},!0)},t._dispatch=function(e,i){if(t.enabled){t._event._stoped=!1,t._event.nativeEvent=e,t._event.keyCode=e.keyCode||e.which||e.charCode,"keydown"===i?t._pressKeys[t._event.keyCode]=!0:"keyup"===i&&(t._pressKeys[t._event.keyCode]=null);for(var s=Laya.stage.focus&&null!=Laya.stage.focus.event&&Laya.stage.focus.displayedInStage?Laya.stage.focus:Laya.stage,n=s;n;)n.event(i,t._event.setTo(i,n,s)),n=n.parent}},t.hasKeyDown=function(e){return t._pressKeys[e]},t._pressKeys={},t.enabled=!0,__static(t,["_event",function(){return this._event=new Event}]),t}(),MouseManager=function(){function t(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new Event,this._matrix=new Matrix,this._point=new Point,this._rect=new Rectangle,this._prePoint=new Point,this._curTouchID=NaN}__class(t,"laya.events.MouseManager");var e=t.prototype;return e.__init__=function(e,i){this._stage=e;var s=this,n=this._eventList;i.oncontextmenu=function(e){return t.enabled?!1:void 0},i.addEventListener("mousedown",function(e){t.enabled&&(Browser.onIE||e.preventDefault(),n.push(e),s.mouseDownTime=Browser.now())}),i.addEventListener("mouseup",function(e){t.enabled&&(e.preventDefault(),n.push(e),s.mouseDownTime=-Browser.now())},!0),i.addEventListener("mousemove",function(e){if(t.enabled){e.preventDefault();var i=Browser.now();if(i-s._lastMoveTimer<10)return;s._lastMoveTimer=i,n.push(e)}},!0),i.addEventListener("mouseout",function(e){t.enabled&&n.push(e)}),i.addEventListener("mouseover",function(e){t.enabled&&n.push(e)}),i.addEventListener("touchstart",function(e){t.enabled&&(n.push(e),Input.isInputting||e.preventDefault(),s.mouseDownTime=Browser.now())}),i.addEventListener("touchend",function(e){t.enabled&&(Input.isInputting||e.preventDefault(),n.push(e),s.mouseDownTime=-Browser.now())},!0),i.addEventListener("touchmove",function(e){t.enabled&&(e.preventDefault(),n.push(e))},!0),i.addEventListener("mousewheel",function(e){t.enabled&&n.push(e)}),i.addEventListener("DOMMouseScroll",function(e){t.enabled&&n.push(e)})},e.initEvent=function(t,e){var i=this;i._event._stoped=!1,i._event.nativeEvent=e||t,i._target=null,this._point.setTo(t.pageX||t.clientX,t.pageY||t.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),i.mouseX=this._point.x,i.mouseY=this._point.y,i._event.touchId=t.identifier||0,this._tTouchID=i._event.touchId;var s;s=TouchManager.I._event,s._stoped=!1,s.nativeEvent=i._event.nativeEvent,s.touchId=i._event.touchId},e.checkMouseWheel=function(t){this._event.delta=t.wheelDelta?.025*t.wheelDelta:-t.detail;for(var e=TouchManager.I.getLastOvers(),i=0,s=e.length;s>i;i++){var n=e[i];n.event("mousewheel",this._event.setTo("mousewheel",n,this._target))}},e.onMouseMove=function(t){TouchManager.I.onMouseMove(t,this._tTouchID)},e.onMouseDown=function(t){if(Input.isInputting&&Laya.stage.focus&&Laya.stage.focus.focus&&!Laya.stage.focus.contains(this._target)){var e=Laya.stage.focus._tf||Laya.stage.focus,i=t._tf||t;i instanceof laya.display.Input&&i.multiline==e.multiline?e._focusOut():e.focus=!1}TouchManager.I.onMouseDown(t,this._tTouchID,this._isLeftMouse)},e.onMouseUp=function(t){TouchManager.I.onMouseUp(t,this._tTouchID,this._isLeftMouse)},e.check=function(t,e,i,s){this._point.setTo(e,i),t.fromParentPoint(this._point),e=this._point.x,i=this._point.y;var n=t.scrollRect;if(n&&(this._rect.setTo(n.x,n.y,n.width,n.height),!this._rect.contains(e,i)))return!1;if(!this.disableMouseEvent){if(t.hitTestPrior&&!t.mouseThrough&&!this.hitTest(t,e,i))return!1;for(var o=t._childs.length-1;o>-1;o--){var r=t._childs[o];if(!r.destroyed&&r.mouseEnabled&&r.visible&&this.check(r,e,i,s))return!0}}var a=!t.hitTestPrior||t.mouseThrough||this.disableMouseEvent?this.hitTest(t,e,i):!0;return a?(this._target=t,s.call(this,t)):s===this.onMouseUp&&t===this._stage&&(this._target=this._stage,s.call(this,this._target)),a},e.hitTest=function(t,e,i){var s=!1;if(t.scrollRect&&(e-=t.scrollRect.x,i-=t.scrollRect.y),t.hitArea instanceof laya.utils.HitArea)return t.hitArea.isHit(e,i);if(t.width>0&&t.height>0||t.mouseThrough||t.hitArea)if(t.mouseThrough)s=t.getGraphicBounds().contains(e,i);else{var n=this._rect;t.hitArea?n=t.hitArea:n.setTo(0,0,t.width,t.height),s=n.contains(e,i)}return s},e.runEvent=function(){var e=this._eventList.length;if(e){for(var i=this,s=0;e>s;){var n=this._eventList[s];switch("mousemove"!==n.type&&(this._prePoint.x=this._prePoint.y=-1e6),n.type){case"mousedown":this._touchIDs[0]=this._id++,t._isTouchRespond?t._isTouchRespond=!1:(i._isLeftMouse=0===n.button,i.initEvent(n),i.check(i._stage,i.mouseX,i.mouseY,i.onMouseDown));break;case"mouseup":i._isLeftMouse=0===n.button,i.initEvent(n),i.check(i._stage,i.mouseX,i.mouseY,i.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-n.clientX)+Math.abs(this._prePoint.y-n.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=n.clientX,this._prePoint.y=n.clientY,i.initEvent(n),i.check(i._stage,i.mouseX,i.mouseY,i.onMouseMove));break;case"touchstart":t._isTouchRespond=!0,i._isLeftMouse=!0;for(var o=n.changedTouches,r=0,a=o.length;a>r;r++){var h=o[r];(t.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=h.identifier,this._id%200===0&&(this._touchIDs={}),this._touchIDs[h.identifier]=this._id++,i.initEvent(h,n),i.check(i._stage,i.mouseX,i.mouseY,i.onMouseDown))}break;case"touchend":t._isTouchRespond=!0,i._isLeftMouse=!0;var l=n.changedTouches;for(r=0,a=l.length;a>r;r++)if(h=l[r],t.multiTouchEnabled||h.identifier==this._curTouchID){this._curTouchID=NaN,i.initEvent(h,n);var c=!1;c=i.check(i._stage,i.mouseX,i.mouseY,i.onMouseUp),c||i.onMouseUp(null)}break;case"touchmove":var u=n.changedTouches;for(r=0,a=u.length;a>r;r++)h=u[r],(t.multiTouchEnabled||h.identifier==this._curTouchID)&&(i.initEvent(h,n),i.check(i._stage,i.mouseX,i.mouseY,i.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":i.checkMouseWheel(n);break;case"mouseout":i._stage.event("mouseout",i._event.setTo("mouseout",i._stage,i._stage));break;case"mouseover":i._stage.event("mouseover",i._event.setTo("mouseover",i._stage,i._stage))}s++}this._eventList.length=0}},t.enabled=!0,t.multiTouchEnabled=!0,t._isTouchRespond=!1,__static(t,["instance",function(){return this.instance=new t}]),t}(),TouchManager=function(){function t(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new Event}__class(t,"laya.events.TouchManager");var e=t.prototype;return e.getTouchFromArr=function(t,e){var i=0,s=0;s=e.length;var n;for(i=0;s>i;i++)if(n=e[i],n.id==t)return n;return null},e.removeTouchFromArr=function(t,e){var i=0;for(i=e.length-1;i>=0;i--)e[i].id==t&&e.splice(i,1)},e.createTouchO=function(t,e){var i;return i=Pool.getItem("TouchData")||{},i.id=e,i.tar=t,i},e.onMouseDown=function(e,i,s){if(void 0===s&&(s=!1),this.enable){var n,o,r;n=this.getTouchFromArr(i,this.preOvers),r=this.getEles(e,null,t._tEleArr),n?n.tar=e:(o=this.createTouchO(e,i),this.preOvers.push(o)),Browser.onMobile&&this.sendEvents(r,"mouseover",i);var a;a=s?this.preDowns:this.preRightDowns,n=this.getTouchFromArr(i,a),n?n.tar=e:(o=this.createTouchO(e,i),a.push(o)),this.sendEvents(r,s?"mousedown":"rightmousedown",i)}},e.sendEvents=function(t,e,i){void 0===i&&(i=0);var s=0,n=0;n=t.length,this._event._stoped=!1;var o;o=t[0];var r;for(s=0;n>s;s++){if(r=t[s],r.destroyed)return;if(r.event(e,this._event.setTo(e,r,o)),this._event._stoped)break}},e.getEles=function(t,e,i){for(i?i.length=0:i=[];t&&t!=e;)i.push(t),t=t.parent;return i},e.checkMouseOutAndOverOfMove=function(e,i,s){if(void 0===s&&(s=0),i!=e){var n,o,r=0,a=0;if(i.contains(e))o=this.getEles(e,i,t._tEleArr),this.sendEvents(o,"mouseover",s);else if(e.contains(i))o=this.getEles(i,e,t._tEleArr),this.sendEvents(o,"mouseout",s);else{o=t._tEleArr,o.length=0;var h;h=this.getEles(i,null,t._oldArr);var l;l=this.getEles(e,null,t._newArr),a=h.length;var c=0;for(r=0;a>r;r++){if(n=h[r],c=l.indexOf(n),c>=0){l.splice(c,l.length-c);break}o.push(n)}o.length>0&&this.sendEvents(o,"mouseout",s),l.length>0&&this.sendEvents(l,"mouseover",s)}}},e.onMouseMove=function(e,i){if(this.enable){var s;s=this.getTouchFromArr(i,this.preOvers);var n;n=this.getEles(e,null,t._tEleArr);s?(this.checkMouseOutAndOverOfMove(e,s.tar),s.tar=e):(this.sendEvents(n,"mouseover",i),this.preOvers.push(this.createTouchO(e,i))),this.sendEvents(n,"mousemove",i)}},e.getLastOvers=function(){return t._tEleArr.length=0,this.preOvers.length>0&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,t._tEleArr):(t._tEleArr.push(Laya.stage),t._tEleArr)},e.onMouseUp=function(e,i,s){if(void 0===s&&(s=!1),this.enable){var n,o,r,a,h,l=0,c=0,u=Browser.onMobile;o=this.getEles(e,null,t._tEleArr),this.sendEvents(o,s?"mouseup":"rightmouseup",i);var _;if(_=s?this.preDowns:this.preRightDowns,n=this.getTouchFromArr(i,_)){var d=!1,f=Browser.now();if(d=f-this._lastClickTime<300,this._lastClickTime=f,e==n.tar)h=o;else for(r=this.getEles(n.tar,null,t._oldArr),h=t._newArr,h.length=0,c=r.length,l=0;c>l;l++)a=r[l],o.indexOf(a)>=0&&h.push(a);h.length>0&&this.sendEvents(h,s?"click":"rightclick",i),s&&d&&this.sendEvents(h,"doubleclick",i),this.removeTouchFromArr(i,_),n.tar=null,Pool.recover("TouchData",n)}else;n=this.getTouchFromArr(i,this.preOvers),n&&u&&(h=this.getEles(n.tar,null,h),h&&h.length>0&&this.sendEvents(h,"mouseout",i),this.removeTouchFromArr(i,this.preOvers),n.tar=null,Pool.recover("TouchData",n))}},t._oldArr=[],t._newArr=[],t._tEleArr=[],__static(t,["I",function(){return this.I=new t}]),t}(),Filter=function(){function t(){this._action=null}__class(t,"laya.filters.Filter");var e=t.prototype;return Laya.imps(e,{"laya.filters.IFilter":!0}),e.callNative=function(t){},__getset(0,e,"type",function(){return-1}),__getset(0,e,"action",function(){return this._action}),t.BLUR=16,t.COLOR=32,t.GLOW=8,t._filterStart=null,t._filterEnd=null,t._EndTarget=null,t._recycleScope=null,t._filter=null,t._useSrc=null,t._endSrc=null,t._useOut=null,t._endOut=null,t}(),ColorFilterAction=function(){function t(){this.data=null}__class(t,"laya.filters.ColorFilterAction");var e=t.prototype;return Laya.imps(e,{"laya.filters.IFilterAction":!0}),e.apply=function(t){var e=t.ctx.ctx,i=t.ctx.ctx.canvas;if(0==i.width||0==i.height)return i;for(var s,n=e.getImageData(0,0,i.width,i.height),o=n.data,r=0,a=o.length;a>r;r+=4)s=this.getColor(o[r],o[r+1],o[r+2],o[r+3]),0!=o[r+3]&&(o[r]=s[0],o[r+1]=s[1],o[r+2]=s[2],o[r+3]=s[3]);return e.putImageData(n,0,0),t},e.getColor=function(t,e,i,s){var n=[];if(this.data._mat&&this.data._alpha){var o=this.data._mat,r=this.data._alpha;n[0]=o[0]*t+o[1]*e+o[2]*i+o[3]*s+r[0],n[1]=o[4]*t+o[5]*e+o[6]*i+o[7]*s+r[1],n[2]=o[8]*t+o[9]*e+o[10]*i+o[11]*s+r[2],n[3]=o[12]*t+o[13]*e+o[14]*i+o[15]*s+r[3]}return n},t}(),Bezier=function(){function t(){this._controlPoints=[new Point,new Point,new Point],this._calFun=this.getPoint2}__class(t,"laya.maths.Bezier");var e=t.prototype;return e._switchPoint=function(t,e){var i=this._controlPoints.shift();i.setTo(t,e),this._controlPoints.push(i)},e.getPoint2=function(t,e){var i=this._controlPoints[0],s=this._controlPoints[1],n=this._controlPoints[2],o=Math.pow(1-t,2)*i.x+2*t*(1-t)*s.x+Math.pow(t,2)*n.x,r=Math.pow(1-t,2)*i.y+2*t*(1-t)*s.y+Math.pow(t,2)*n.y;e.push(o,r)},e.getPoint3=function(t,e){var i=this._controlPoints[0],s=this._controlPoints[1],n=this._controlPoints[2],o=this._controlPoints[3],r=Math.pow(1-t,3)*i.x+3*s.x*t*(1-t)*(1-t)+3*n.x*t*t*(1-t)+o.x*Math.pow(t,3),a=Math.pow(1-t,3)*i.y+3*s.y*t*(1-t)*(1-t)+3*n.y*t*t*(1-t)+o.y*Math.pow(t,3);e.push(r,a)},e.insertPoints=function(t,e){var i=NaN;t=t>0?t:5;var s=NaN;for(s=1/t,i=0;1>=i;i+=s)this._calFun(i,e)},e.getBezierPoints=function(t,e,i){void 0===e&&(e=5),void 0===i&&(i=2);var s=0,n=0;if(n=t.length,2*(i+1)>n)return[];var o;switch(o=[],i){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=i;)this._controlPoints.push(new Point);for(s=0;2*i>s;s+=2)this._switchPoint(t[s],t[s+1]);for(s=2*i;n>s;s+=2)this._switchPoint(t[s],t[s+1]),s/2%i==0&&this.insertPoints(e,o);return o},__static(t,["I",function(){return this.I=new t}]),t}(),GrahamScan=function(){function t(){}return __class(t,"laya.maths.GrahamScan"),t.multiply=function(t,e,i){return(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y)},t.dis=function(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)},t._getPoints=function(e,i,s){for(void 0===i&&(i=!1),t._mPointList||(t._mPointList=[]);t._mPointList.length<e;)t._mPointList.push(new Point);return s||(s=[]),s.length=0,i?t.getFrom(s,t._mPointList,e):t.getFromR(s,t._mPointList,e),s},t.getFrom=function(t,e,i){var s=0;for(s=0;i>s;s++)t.push(e[s]);return t},t.getFromR=function(t,e,i){var s=0;for(s=0;i>s;s++)t.push(e.pop());return t},t.pListToPointList=function(e,i){void 0===i&&(i=!1);var s=0,n=e.length/2,o=t._getPoints(n,i,t._tempPointList);for(s=0;n>s;s++)o[s].setTo(e[s+s],e[s+s+1]);return o},t.pointListToPlist=function(e){var i,s=0,n=e.length,o=t._temPList;for(o.length=0,s=0;n>s;s++)i=e[s],o.push(i.x,i.y);return o},t.scanPList=function(e){return Utils.copyArray(e,t.pointListToPlist(t.scan(t.pListToPointList(e,!0))))},t.scan=function(e){var i,s,n,o=0,r=0,a=0,h=e.length,l={};for(s=t._temArr,s.length=0,h=e.length,o=h-1;o>=0;o--)i=e[o],n=i.x+"_"+i.y,l.hasOwnProperty(n)||(l[n]=!0,s.push(i));for(h=s.length,Utils.copyArray(e,s),o=1;h>o;o++)(e[o].y<e[a].y||e[o].y==e[a].y&&e[o].x<e[a].x)&&(a=o);for(i=e[0],e[0]=e[a],e[a]=i,o=1;h-1>o;o++){for(a=o,r=o+1;h>r;r++)(t.multiply(e[r],e[a],e[0])>0||0==t.multiply(e[r],e[a],e[0])&&t.dis(e[0],e[r])<t.dis(e[0],e[a]))&&(a=r);i=e[o],e[o]=e[a],e[a]=i}if(s=t._temArr,s.length=0,e.length<3)return Utils.copyArray(s,e);for(s.push(e[0],e[1],e[2]),o=3;h>o;o++){for(;s.length>=2&&t.multiply(e[o],s[s.length-1],s[s.length-2])>=0;)s.pop();e[o]&&s.push(e[o])}return s},t._mPointList=null,t._tempPointList=[],t._temPList=[],t._temArr=[],t}(),MathUtil=function(){function t(){}return __class(t,"laya.maths.MathUtil"),t.subtractVector3=function(t,e,i){i[0]=t[0]-e[0],i[1]=t[1]-e[1],i[2]=t[2]-e[2]},t.lerp=function(t,e,i){return t*(1-i)+e*i},t.scaleVector3=function(t,e,i){i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e},t.lerpVector3=function(t,e,i,s){var n=t[0],o=t[1],r=t[2];s[0]=n+i*(e[0]-n),s[1]=o+i*(e[1]-o),s[2]=r+i*(e[2]-r)},t.lerpVector4=function(t,e,i,s){var n=t[0],o=t[1],r=t[2],a=t[3];s[0]=n+i*(e[0]-n),s[1]=o+i*(e[1]-o),s[2]=r+i*(e[2]-r),s[3]=a+i*(e[3]-a)},t.slerpQuaternionArray=function(t,e,i,s,n,o,r){var a,h,l,c,u,_=t[e+0],d=t[e+1],f=t[e+2],p=t[e+3],g=i[s+0],m=i[s+1],y=i[s+2],v=i[s+3];return h=_*g+d*m+f*y+p*v,0>h&&(h=-h,g=-g,m=-m,y=-y,v=-v),1-h>1e-6?(a=Math.acos(h),l=Math.sin(a),c=Math.sin((1-n)*a)/l,u=Math.sin(n*a)/l):(c=1-n,u=n),o[r+0]=c*_+u*g,o[r+1]=c*d+u*m,o[r+2]=c*f+u*y,o[r+3]=c*p+u*v,o},t.getRotation=function(t,e,i,s){return Math.atan2(s-e,i-t)/Math.PI*180},t.sortBigFirst=function(t,e){return t==e?0:e>t?1:-1},t.sortSmallFirst=function(t,e){return t==e?0:e>t?-1:1},t.sortNumBigFirst=function(t,e){return parseFloat(e)-parseFloat(t)},t.sortNumSmallFirst=function(t,e){return parseFloat(t)-parseFloat(e)},t.sortByKey=function(e,i,s){void 0===i&&(i=!1),void 0===s&&(s=!0);var n;return n=i?s?t.sortNumBigFirst:t.sortBigFirst:s?t.sortNumSmallFirst:t.sortSmallFirst,function(t,i){return n(t[e],i[e])}},t}(),Matrix=function(){function t(t,e,i,s,n,o){this.inPool=!1,this.bTransform=!1,void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===n&&(n=0),void 0===o&&(o=0),this.a=t,this.b=e,this.c=i,this.d=s,this.tx=n,this.ty=o,this._checkTransform()}__class(t,"laya.maths.Matrix");var e=t.prototype;return e.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},e._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},e.setTranslate=function(t,e){return this.tx=t,this.ty=e,this},e.translate=function(t,e){return this.tx+=t,this.ty+=e,this},e.scale=function(t,e){this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this.bTransform=!0},e.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),s=this.a,n=this.c,o=this.tx;this.a=s*e-this.b*i,this.b=s*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this.bTransform=!0},e.skew=function(t,e){var i=Math.tan(t),s=Math.tan(e),n=this.a,o=this.b;return this.a+=s*this.c,this.b+=s*this.d,this.c+=i*n,this.d+=i*o,this},e.invertTransformPoint=function(t){var e=this.a,i=this.b,s=this.c,n=this.d,o=this.tx,r=e*n-i*s,a=n/r,h=-i/r,l=-s/r,c=e/r,u=(s*this.ty-n*o)/r,_=-(e*this.ty-i*o)/r;return t.setTo(a*t.x+l*t.y+u,h*t.x+c*t.y+_)},e.transformPoint=function(t){return t.setTo(this.a*t.x+this.c*t.y+this.tx,this.b*t.x+this.d*t.y+this.ty)},e.transformPointN=function(t){return t.setTo(this.a*t.x+this.c*t.y,this.b*t.x+this.d*t.y)},e.transformPointArray=function(t,e){for(var i=t.length,s=0;i>s;s+=2){var n=t[s],o=t[s+1];e[s]=this.a*n+this.c*o+this.tx,e[s+1]=this.b*n+this.d*o+this.ty}return e},e.transformPointArrayScale=function(t,e){for(var i=t.length,s=0;i>s;s+=2){var n=t[s],o=t[s+1];e[s]=this.a*n+this.c*o,e[s+1]=this.b*n+this.d*o}return e},e.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},e.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},e.invert=function(){var t=this.a,e=this.b,i=this.c,s=this.d,n=this.tx,o=t*s-e*i;return this.a=s/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-s*n)/o,this.ty=-(t*this.ty-e*n)/o,this},e.setTo=function(t,e,i,s,n,o){return this.a=t,this.b=e,this.c=i,this.d=s,this.tx=n,this.ty=o,this},e.concat=function(t){var e=this.a,i=this.c,s=this.tx;return this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d,this.tx=s*t.a+this.ty*t.c+t.tx,this.ty=s*t.b+this.ty*t.d+t.ty,this},e.scaleEx=function(t,e){var i=this.a,s=this.b,n=this.c,o=this.d;0!==s||0!==n?(this.a=t*i,this.b=t*s,this.c=e*n,this.d=e*o):(this.a=t*i,this.b=0*o,this.c=0*i,this.d=e*o),this.bTransform=!0},e.rotateEx=function(t){var e=Math.cos(t),i=Math.sin(t),s=this.a,n=this.b,o=this.c,r=this.d;0!==n||0!==o?(this.a=e*s+i*o,this.b=e*n+i*r,this.c=-i*s+e*o,this.d=-i*n+e*r):(this.a=e*s,this.b=i*r,this.c=-i*s,this.d=e*r),this.bTransform=!0},e.clone=function(){var e=t._cache,i=e._length?e[--e._length]:new t;return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i.bTransform=this.bTransform,i},e.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t.bTransform=this.bTransform,t},e.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},e.destroy=function(){if(!this.inPool){var e=t._cache;this.inPool=!0,e._length||(e._length=0),e[e._length++]=this,this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},t.mul=function(t,e,i){var s=t.a,n=t.b,o=t.c,r=t.d,a=t.tx,h=t.ty,l=e.a,c=e.b,u=e.c,_=e.d,d=e.tx,f=e.ty;return 0!==c||0!==u?(i.a=s*l+n*u,i.b=s*c+n*_,i.c=o*l+r*u,i.d=o*c+r*_,i.tx=l*a+u*h+d,i.ty=c*a+_*h+f):(i.a=s*l,i.b=n*_,i.c=o*l,i.d=r*_,i.tx=l*a+d,i.ty=_*h+f),i},t.mul16=function(t,e,i){var s=t.a,n=t.b,o=t.c,r=t.d,a=t.tx,h=t.ty,l=e.a,c=e.b,u=e.c,_=e.d,d=e.tx,f=e.ty;return 0!==c||0!==u?(i[0]=s*l+n*u,i[1]=s*c+n*_,i[4]=o*l+r*u,i[5]=o*c+r*_,i[12]=l*a+u*h+d,i[13]=c*a+_*h+f):(i[0]=s*l,i[1]=n*_,i[4]=o*l,i[5]=r*_,i[12]=l*a+d,i[13]=_*h+f),i},t.mulPre=function(t,e,i,s,n,o,r,a){var h=t.a,l=t.b,c=t.c,u=t.d,_=t.tx,d=t.ty;return 0!==i||0!==s?(a.a=h*e+l*s,a.b=h*i+l*n,a.c=c*e+u*s,a.d=c*i+u*n,a.tx=e*_+s*d+o,a.ty=i*_+n*d+r):(a.a=h*e,a.b=l*n,a.c=c*e,a.d=u*n,a.tx=e*_+o,a.ty=n*d+r),a},t.mulPos=function(t,e,i,s,n,o,r,a){var h=t.a,l=t.b,c=t.c,u=t.d,_=t.tx,d=t.ty;return 0!==l||0!==c?(a.a=e*h+i*c,a.b=e*l+i*u,a.c=s*h+n*c,a.d=s*l+n*u,a.tx=h*o+c*r+_,a.ty=l*o+u*r+d):(a.a=e*h,a.b=i*u,a.c=s*h,a.d=n*u,a.tx=h*o+_,a.ty=u*r+d),a},t.preMul=function(t,e,i){var s=t.a,n=t.b,o=t.c,r=t.d,a=e.a,h=e.b,l=e.c,c=e.d,u=e.tx,_=e.ty;return i.a=a*s,i.b=i.c=0,i.d=c*r,i.tx=u*s+t.tx,i.ty=_*r+t.ty,0===h&&0===l&&0===n&&0===o||(i.a+=h*o,i.d+=l*n,i.b+=a*n+h*r,i.c+=l*s+c*o,i.tx+=_*o,i.ty+=u*n),i},t.preMulXY=function(t,e,i,s){var n=t.a,o=t.b,r=t.c,a=t.d;return s.a=n,s.b=o,s.c=r,s.d=a,s.tx=e*n+t.tx+i*r,s.ty=i*a+t.ty+e*o,s},t.create=function(){var e=t._cache,i=e._length?e[--e._length]:new t;return i.inPool=!1,i},t.EMPTY=new t,t.TEMP=new t,t._cache=[],t}(),Point=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}__class(t,"laya.maths.Point");var e=t.prototype;return e.setTo=function(t,e){return this.x=t,this.y=e,this},e.distance=function(t,e){return Math.sqrt((this.x-t)*(this.x-t)+(this.y-e)*(this.y-e))},e.toString=function(){return this.x+","+this.y},e.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(t>0){var e=1/t;this.x*=e,this.y*=e}},t.TEMP=new t,t.EMPTY=new t,t}(),Rectangle=function(){function t(t,e,i,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),this.x=t,this.y=e,this.width=i,this.height=s}__class(t,"laya.maths.Rectangle");var e=t.prototype;return e.setTo=function(t,e,i,s){return this.x=t,this.y=e,this.width=i,this.height=s,this},e.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.right&&e>=this.y&&e<this.bottom},e.intersects=function(t){return!(t.x>this.x+this.width||t.x+t.width<this.x||t.y>this.y+this.height||t.y+t.height<this.y)},e.intersection=function(e,i){return this.intersects(e)?(i||(i=new t),i.x=Math.max(this.x,e.x),i.y=Math.max(this.y,e.y),i.width=Math.min(this.right,e.right)-i.x,i.height=Math.min(this.bottom,e.bottom)-i.y,i):null},e.union=function(e,i){return i||(i=new t),this.clone(i),e.width<=0||e.height<=0?i:(i.addPoint(e.x,e.y),i.addPoint(e.right,e.bottom),this)},e.clone=function(e){return e||(e=new t),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},e.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},e.equals=function(t){return!(!t||t.x!==this.x||t.y!==this.y||t.width!==this.width||t.height!==this.height)},e.addPoint=function(t,e){return this.x>t&&(this.width+=this.x-t,this.x=t),this.y>e&&(this.height+=this.y-e,this.y=e),this.width<t-this.x&&(this.width=t-this.x),this.height<e-this.y&&(this.height=e-this.y),this},e._getBoundPoints=function(){var e=t._temB;return e.length=0,0==this.width||0==this.height?e:(e.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),e)},e.isEmpty=function(){return this.width<=0||this.height<=0},__getset(0,e,"right",function(){return this.x+this.width}),__getset(0,e,"bottom",function(){return this.y+this.height}),t._getBoundPointS=function(e,i,s,n){var o=t._temA;return o.length=0,0==s||0==n?o:(o.push(e,i,e+s,i,e,i+n,e+s,i+n),o)},t._getWrapRec=function(e,i){if(!e||e.length<1)return i?i.setTo(0,0,0,0):t.TEMP.setTo(0,0,0,0);i=i?i:new t;var s,n,o,r,a,h=e.length,l=Point.TEMP;for(n=r=99999,o=a=-n,s=0;h>s;s+=2)l.x=e[s],l.y=e[s+1],n=n<l.x?n:l.x,r=r<l.y?r:l.y,o=o>l.x?o:l.x,a=a>l.y?a:l.y;return i.setTo(n,r,o-n,a-r)},t.EMPTY=new t,t.TEMP=new t,t._temB=[],t._temA=[],t}(),SoundManager=function(){function t(){}return __class(t,"laya.media.SoundManager"),__getset(1,t,"autoStopMusic",function(){return t._autoStopMusic},function(e){Laya.stage.off("blur",null,t._stageOnBlur),Laya.stage.off("focus",null,t._stageOnFocus),Laya.stage.off("visibilitychange",null,t._visibilityChange),t._autoStopMusic=e,e&&(Laya.stage.on("blur",null,t._stageOnBlur),Laya.stage.on("focus",null,t._stageOnFocus),Laya.stage.on("visibilitychange",null,t._visibilityChange))}),__getset(1,t,"muted",function(){return t._muted},function(e){e&&t.stopAllSound(),t.musicMuted=e,t._muted=e}),__getset(1,t,"musicMuted",function(){return t._musicMuted},function(e){e?(t._tMusic&&t.stopSound(t._tMusic),t._musicMuted=e):(t._musicMuted=e,t._tMusic&&t.playMusic(t._tMusic))}),__getset(1,t,"soundMuted",function(){return t._soundMuted},function(e){t._soundMuted=e}),t.addChannel=function(e){t._channels.indexOf(e)>=0||t._channels.push(e)},t.removeChannel=function(e){var i=0;for(i=t._channels.length-1;i>=0;i--)t._channels[i]==e&&t._channels.splice(i,1)},t._visibilityChange=function(){Laya.stage.isVisibility?t._stageOnFocus():t._stageOnBlur()},t._stageOnBlur=function(){t._isActive=!1,t._musicChannel&&(t._musicChannel.isStopped||(t._blurPaused=!0,t._musicLoops=t._musicChannel.loops,t._musicCompleteHandler=t._musicChannel.completeHandler,t._musicPosition=t._musicChannel.position,t._musicChannel.stop(),Laya.stage.once("mousedown",null,t._stageOnFocus))),t.stopAllSound()},t._stageOnFocus=function(){t._isActive=!0,Laya.stage.off("mousedown",null,t._stageOnFocus),t._blurPaused&&(t._tMusic&&t.playMusic(t._tMusic,t._musicLoops,t._musicCompleteHandler,t._musicPosition),t._blurPaused=!1)},t.playSound=function(e,i,s,n,o){if(void 0===i&&(i=1),void 0===o&&(o=0),!t._isActive)return null;if(t._muted)return null;if(e=URL.formatURL(e),e==t._tMusic){if(t._musicMuted)return null}else{if(Render.isConchApp){var r=Utils.getFileExtension(e);if("wav"!=r&&"ogg"!=r)return alert("The sound only supports wav or ogg format,for optimal performance reason,please refer to the official website document."),null}if(t._soundMuted)return null}var a=Laya.loader.getRes(e);n||(n=t._soundClass),a||(a=new n,
a.load(e),Loader.cacheRes(e,a));var h;return h=a.play(o,i),h.url=e,h.volume=e==t._tMusic?t.musicVolume:t.soundVolume,h.completeHandler=s,h},t.destroySound=function(t){var e=Laya.loader.getRes(t);e&&(Loader.clearRes(t),e.dispose())},t.playMusic=function(e,i,s,n){return void 0===i&&(i=0),void 0===n&&(n=0),e=URL.formatURL(e),t._tMusic=e,t._musicChannel&&t._musicChannel.stop(),t._musicChannel=t.playSound(e,i,s,null,n)},t.stopSound=function(e){e=URL.formatURL(e);var i,s=0;for(s=t._channels.length-1;s>=0;s--)i=t._channels[s],i.url==e&&i.stop()},t.stopAll=function(){t._tMusic=null;var e,i=0;for(i=t._channels.length-1;i>=0;i--)e=t._channels[i],e.stop()},t.stopAllSound=function(){var e,i=0;for(i=t._channels.length-1;i>=0;i--)e=t._channels[i],e.url!=t._tMusic&&e.stop()},t.stopMusic=function(){t._tMusic=null,t._musicChannel&&t._musicChannel.stop()},t.setSoundVolume=function(e,i){if(i)i=URL.formatURL(i),t._setVolume(i,e);else{t.soundVolume=e;var s,n=0;for(n=t._channels.length-1;n>=0;n--)s=t._channels[n],s.url!=t._tMusic&&(s.volume=e)}},t.setMusicVolume=function(e){t.musicVolume=e,t._setVolume(t._tMusic,e)},t._setVolume=function(e,i){e=URL.formatURL(e);var s,n=0;for(n=t._channels.length-1;n>=0;n--)s=t._channels[n],s.url==e&&(s.volume=i)},t.musicVolume=1,t.soundVolume=1,t.playbackRate=1,t._muted=!1,t._soundMuted=!1,t._musicMuted=!1,t._tMusic=null,t._musicChannel=null,t._channels=[],t._autoStopMusic=!1,t._blurPaused=!1,t._isActive=!0,t._musicLoops=0,t._musicPosition=0,t._musicCompleteHandler=null,t._soundClass=null,t}(),LocalStorage=function(){function t(){}var e;return __class(t,"laya.net.LocalStorage"),t.__init__=function(){t._baseClass||(t._baseClass=e,e.init()),t.items=t._baseClass.items,t.support=t._baseClass.support},t.setItem=function(e,i){t._baseClass.setItem(e,i)},t.getItem=function(e){return t._baseClass.getItem(e)},t.setJSON=function(e,i){t._baseClass.setJSON(e,i)},t.getJSON=function(e){return t._baseClass.getJSON(e)},t.removeItem=function(e){t._baseClass.removeItem(e)},t.clear=function(){t._baseClass.clear()},t._baseClass=null,t.items=null,t.support=!1,t.__init$=function(){e=function(){function t(){}return __class(t,""),t.init=function(){try{t.items=window.localStorage,t.setItem("laya","1"),t.removeItem("laya"),t.support=!0}catch(e){}t.support||console.log("LocalStorage is not supprot or browser is private mode.")},t.setItem=function(e,i){try{t.support&&t.items.setItem(e,i)}catch(s){console.warn("set localStorage failed",s)}},t.getItem=function(e){return t.support?t.items.getItem(e):null},t.setJSON=function(e,i){try{t.support&&t.items.setItem(e,JSON.stringify(i))}catch(s){console.warn("set localStorage failed",s)}},t.getJSON=function(e){return JSON.parse(t.support?t.items.getItem(e):null)},t.removeItem=function(e){t.support&&t.items.removeItem(e)},t.clear=function(){t.support&&t.items.clear()},t.items=null,t.support=!1,t}()},t}(),URL=function(){function t(e){this._url=null,this._path=null,this._url=t.formatURL(e),this._path=t.getPath(e)}__class(t,"laya.net.URL");var e=t.prototype;return __getset(0,e,"path",function(){return this._path}),__getset(0,e,"url",function(){return this._url}),t.formatURL=function(e,i){if(!e)return"null path";if(e.indexOf(":")>0)return e;null!=t.customFormat&&(e=t.customFormat(e,i));var s=e.charAt(0);if("."===s)return t.formatRelativePath((i||t.basePath)+e);if("~"===s)return t.rootPath+e.substring(1);if("d"===s){if(0===e.indexOf("data:image"))return e}else if("/"===s)return e;return(i||t.basePath)+e},t.formatRelativePath=function(t){for(var e=t.split("/"),i=0,s=e.length;s>i;i++)".."==e[i]&&(e.splice(i-1,2),i-=2);return e.join("/")},t.isAbsolute=function(t){return t.indexOf(":")>0||"/"==t.charAt(0)},t.getPath=function(t){var e=t.lastIndexOf("/");return e>0?t.substr(0,e+1):""},t.getFileName=function(t){var e=t.lastIndexOf("/");return e>0?t.substr(e+1):t},t.version={},t.basePath="",t.rootPath="",t.customFormat=function(e){var i=t.version[e];return!Render.isConchApp&&i&&(e+="?v="+i),e},t}(),Render=function(){function t(e,i){function s(){Laya.stage._loop(),Browser.window.requestAnimationFrame(s)}this._timeId=0;var n=t._mainCanvas.source.style;n.position="absolute",n.top=n.left="0px",n.background="#000000",t._mainCanvas.source.id="layaCanvas";var o=laya.renders.Render.isWebGL;t._mainCanvas.source.width=e,t._mainCanvas.source.height=i,o&&t.WebGL.init(t._mainCanvas,e,i),Browser.container.appendChild(t._mainCanvas.source),t._context=new RenderContext(e,i,o?null:t._mainCanvas),t._context.ctx.setIsMainContext(),Browser.window.requestAnimationFrame(s),Laya.stage.on("visibilitychange",this,this._onVisibilitychange)}__class(t,"laya.renders.Render");var e=t.prototype;return e._onVisibilitychange=function(){Laya.stage.isVisibility?0!=this._timeId&&Browser.window.clearInterval(this._timeId):this._timeId=Browser.window.setInterval(this._enterFrame,1e3)},e._enterFrame=function(t){Laya.stage._loop()},__getset(1,t,"context",function(){return t._context}),__getset(1,t,"canvas",function(){return t._mainCanvas.source}),t._context=null,t._mainCanvas=null,t.WebGL=null,t.isConchNode=!1,t.isConchApp=!1,t.isConchWebGL=!1,t.isWebGL=!1,t.is3DMode=!1,t.optimizeTextureMemory=function(t,e){return!0},t.__init$=function(){window.ConchRenderType=window.ConchRenderType||1,window.ConchRenderType|=window.conch?4:0,t.isConchNode=5==(5&window.ConchRenderType),t.isConchApp=4==(4&window.ConchRenderType),t.isConchWebGL=6==window.ConchRenderType},t}(),RenderContext=function(){function t(e,i,s){this.x=0,this.y=0,this._drawTexture=function(t,e,i){i[0].loaded&&this.ctx.drawTexture(i[0],i[1],i[2],i[3],i[4],t,e)},this._fillTexture=function(t,e,i){i[0].loaded&&this.ctx.fillTexture(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5],i[6],i[7])},this._drawTextureWithTransform=function(t,e,i){i[0].loaded&&this.ctx.drawTextureWithTransform(i[0],i[1],i[2],i[3],i[4],i[5],t,e,i[6])},this._fillQuadrangle=function(t,e,i){this.ctx.fillQuadrangle(i[0],i[1],i[2],i[3],i[4])},this._drawRect=function(t,e,i){var s=this.ctx;null!=i[4]&&(s.fillStyle=i[4],s.fillRect(t+i[0],e+i[1],i[2],i[3],null)),null!=i[5]&&(s.strokeStyle=i[5],s.lineWidth=i[6],s.strokeRect(t+i[0],e+i[1],i[2],i[3],i[6]))},this._drawPie=function(t,e,i){var s=this.ctx;Render.isWebGL&&s.setPathId(i[8]),s.beginPath(),Render.isWebGL?(s.movePath(i[0]+t,i[1]+e),s.moveTo(0,0)):s.moveTo(t+i[0],e+i[1]),s.arc(t+i[0],e+i[1],i[2],i[3],i[4]),s.closePath(),this._fillAndStroke(i[5],i[6],i[7],!0)},this._clipRect=function(t,e,i){this.ctx.clipRect(t+i[0],e+i[1],i[2],i[3])},this._fillRect=function(t,e,i){this.ctx.fillRect(t+i[0],e+i[1],i[2],i[3],i[4])},this._drawCircle=function(e,i,s){var n=this.ctx;Render.isWebGL&&n.setPathId(s[6]),Stat.drawCall++,n.beginPath(),Render.isWebGL&&n.movePath(s[0]+e,s[1]+i),n.arc(s[0]+e,s[1]+i,s[2],0,t.PI2),n.closePath(),this._fillAndStroke(s[3],s[4],s[5],!0)},this._fillCircle=function(e,i,s){Stat.drawCall++;var n=this.ctx;n.beginPath(),n.fillStyle=s[3],n.arc(s[0]+e,s[1]+i,s[2],0,t.PI2),n.fill()},this._setShader=function(t,e,i){this.ctx.setShader(i[0])},this._drawLine=function(t,e,i){var s=this.ctx;Render.isWebGL&&s.setPathId(i[6]),s.beginPath(),s.strokeStyle=i[4],s.lineWidth=i[5],Render.isWebGL?(s.movePath(t,e),s.moveTo(i[0],i[1]),s.lineTo(i[2],i[3])):(s.moveTo(t+i[0],e+i[1]),s.lineTo(t+i[2],e+i[3])),s.stroke()},this._drawLines=function(t,e,i){var s=this.ctx;Render.isWebGL&&s.setPathId(i[5]),s.beginPath(),t+=i[0],e+=i[1],Render.isWebGL&&s.movePath(t,e),s.strokeStyle=i[3],s.lineWidth=i[4];var n=i[2],o=2,r=n.length;if(Render.isWebGL)for(s.moveTo(n[0],n[1]);r>o;)s.lineTo(n[o++],n[o++]);else for(s.moveTo(t+n[0],e+n[1]);r>o;)s.lineTo(t+n[o++],e+n[o++]);s.stroke()},this._drawLinesWebGL=function(t,e,i){this.ctx.drawLines(t+this.x+i[0],e+this.y+i[1],i[2],i[3],i[4])},this._drawCurves=function(t,e,i){this.ctx.drawCurves(t,e,i)},this._draw=function(t,e,i){i[0].call(null,this,t,e)},this._transformByMatrix=function(t,e,i){this.ctx.transformByMatrix(i[0])},this._setTransform=function(t,e,i){this.ctx.setTransform(i[0],i[1],i[2],i[3],i[4],i[5])},this._setTransformByMatrix=function(t,e,i){this.ctx.setTransformByMatrix(i[0])},this._save=function(t,e,i){this.ctx.save()},this._restore=function(t,e,i){this.ctx.restore()},this._translate=function(t,e,i){this.ctx.translate(i[0],i[1])},this._transform=function(t,e,i){this.ctx.translate(i[1]+t,i[2]+e);var s=i[0];this.ctx.transform(s.a,s.b,s.c,s.d,s.tx,s.ty),this.ctx.translate(-t-i[1],-e-i[2])},this._rotate=function(t,e,i){this.ctx.translate(i[1]+t,i[2]+e),this.ctx.rotate(i[0]),this.ctx.translate(-t-i[1],-e-i[2])},this._scale=function(t,e,i){this.ctx.translate(i[2]+t,i[3]+e),this.ctx.scale(i[0],i[1]),this.ctx.translate(-t-i[2],-e-i[3])},this._alpha=function(t,e,i){this.ctx.globalAlpha*=i[0]},this._setAlpha=function(t,e,i){this.ctx.globalAlpha=i[0]},this._fillText=function(t,e,i){this.ctx.fillText(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5])},this._strokeText=function(t,e,i){this.ctx.strokeText(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5],i[6])},this._fillBorderText=function(t,e,i){this.ctx.fillBorderText(i[0],i[1]+t,i[2]+e,i[3],i[4],i[5],i[6],i[7])},this._blendMode=function(t,e,i){this.ctx.globalCompositeOperation=i[0]},this._beginClip=function(t,e,i){this.ctx.beginClip&&this.ctx.beginClip(t+i[0],e+i[1],i[2],i[3])},this._setIBVB=function(t,e,i){this.ctx.setIBVB(i[0]+t,i[1]+e,i[2],i[3],i[4],i[5],i[6],i[7])},this._fillTrangles=function(t,e,i){this.ctx.fillTrangles(i[0],i[1]+t,i[2]+e,i[3],i[4])},this._drawPath=function(t,e,i){var s=this.ctx;Render.isWebGL&&s.setPathId(-1),s.beginPath(),t+=i[0],e+=i[1];for(var n=i[2],o=0,r=n.length;r>o;o++){var a=n[o];switch(a[0]){case"moveTo":s.moveTo(t+a[1],e+a[2]);break;case"lineTo":s.lineTo(t+a[1],e+a[2]);break;case"arcTo":s.arcTo(t+a[1],e+a[2],t+a[3],e+a[4],a[5]);break;case"closePath":s.closePath()}}var h=i[3];null!=h&&(s.fillStyle=h.fillStyle,s.fill());var l=i[4];null!=l&&(s.strokeStyle=l.strokeStyle,s.lineWidth=l.lineWidth||1,s.lineJoin=l.lineJoin,s.lineCap=l.lineCap,s.miterLimit=l.miterLimit,s.stroke())},this.drawPoly=function(t,e,i){this.ctx.drawPoly(t+this.x+i[0],e+this.y+i[1],i[2],i[3],i[4],i[5],i[6])},this._drawPoly=function(t,e,i){var s=this.ctx,n=i[2],o=2,r=n.length;if(Render.isWebGL)for(s.setPathId(i[6]),s.beginPath(),t+=i[0],e+=i[1],s.movePath(t,e),s.moveTo(n[0],n[1]);r>o;)s.lineTo(n[o++],n[o++]);else for(s.beginPath(),t+=i[0],e+=i[1],s.moveTo(t+n[0],e+n[1]);r>o;)s.lineTo(t+n[o++],e+n[o++]);s.closePath(),this._fillAndStroke(i[3],i[4],i[5],i[7])},this._drawSkin=function(t,e,i){var s=i[0];if(s){var n=this.ctx;s.render(n,t,e)}},this._drawParticle=function(t,e,i){this.ctx.drawParticle(t+this.x,e+this.y,i[0])},s?this.ctx=s.getContext("2d"):(s=HTMLCanvas.create("3D"),this.ctx=RunDriver.createWebGLContext2D(s),s._setContext(this.ctx)),s.size(e,i),this.canvas=s}__class(t,"laya.renders.RenderContext");var e=t.prototype;return e.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},e.drawTexture=function(t,e,i,s,n){t.loaded&&this.ctx.drawTexture(t,e,i,s,n,this.x,this.y)},e._drawTextures=function(t,e,i){i[0].loaded&&this.ctx.drawTextures(i[0],i[1],t+this.x,e+this.y)},e.drawTextureWithTransform=function(t,e,i,s,n,o,r){t.loaded&&this.ctx.drawTextureWithTransform(t,e,i,s,n,o,this.x,this.y,r)},e.fillQuadrangle=function(t,e,i,s,n){this.ctx.fillQuadrangle(t,e,i,s,n)},e.drawCanvas=function(t,e,i,s,n){this.ctx.drawCanvas(t,e+this.x,i+this.y,s,n)},e.drawRect=function(t,e,i,s,n,o){void 0===o&&(o=1);var r=this.ctx;r.strokeStyle=n,r.lineWidth=o,r.strokeRect(t+this.x,e+this.y,i,s,o)},e._fillAndStroke=function(t,e,i,s){void 0===s&&(s=!1);var n=this.ctx;null!=t&&(n.fillStyle=t,Render.isWebGL?n.fill(s):n.fill()),null!=e&&i>0&&(n.strokeStyle=e,n.lineWidth=i,n.stroke())},e.clipRect=function(t,e,i,s){this.ctx.clipRect(t+this.x,e+this.y,i,s)},e.fillRect=function(t,e,i,s,n){this.ctx.fillRect(t+this.x,e+this.y,i,s,n)},e.drawCircle=function(e,i,s,n,o){void 0===o&&(o=1),Stat.drawCall++;var r=this.ctx;r.beginPath(),r.strokeStyle=n,r.lineWidth=o,r.arc(e+this.x,i+this.y,s,0,t.PI2),r.stroke()},e.fillCircle=function(e,i,s,n){Stat.drawCall++;var o=this.ctx;o.beginPath(),o.fillStyle=n,o.arc(e+this.x,i+this.y,s,0,t.PI2),o.fill()},e.setShader=function(t){this.ctx.setShader(t)},e.drawLine=function(t,e,i,s,n,o){void 0===o&&(o=1);var r=this.ctx;r.beginPath(),r.strokeStyle=n,r.lineWidth=o,r.moveTo(this.x+t,this.y+e),r.lineTo(this.x+i,this.y+s),r.stroke()},e.clear=function(){this.ctx.clear()},e.transformByMatrix=function(t){this.ctx.transformByMatrix(t)},e.setTransform=function(t,e,i,s,n,o){this.ctx.setTransform(t,e,i,s,n,o)},e.setTransformByMatrix=function(t){this.ctx.setTransformByMatrix(t)},e.save=function(){this.ctx.save()},e.restore=function(){this.ctx.restore()},e.translate=function(t,e){this.ctx.translate(t,e)},e.transform=function(t,e,i,s,n,o){this.ctx.transform(t,e,i,s,n,o)},e.rotate=function(t){this.ctx.rotate(t)},e.scale=function(t,e){this.ctx.scale(t,e)},e.alpha=function(t){this.ctx.globalAlpha*=t},e.setAlpha=function(t){this.ctx.globalAlpha=t},e.fillWords=function(t,e,i,s,n){this.ctx.fillWords(t,e,i,s,n)},e.fillBorderWords=function(t,e,i,s,n,o,r){this.ctx.fillBorderWords(t,e,i,s,n,o,r)},e.fillText=function(t,e,i,s,n,o){this.ctx.fillText(t,e+this.x,i+this.y,s,n,o)},e.strokeText=function(t,e,i,s,n,o,r){this.ctx.strokeText(t,e+this.x,i+this.y,s,n,o,r)},e.blendMode=function(t){this.ctx.globalCompositeOperation=t},e.flush=function(){this.ctx.flush&&this.ctx.flush()},e.addRenderObject=function(t){this.ctx.addRenderObject(t)},e.beginClip=function(t,e,i,s){this.ctx.beginClip&&this.ctx.beginClip(t,e,i,s)},e.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},e.fillTrangles=function(t,e,i){this.ctx.fillTrangles(i[0],i[1],i[2],i[3],i.length>4?i[4]:null)},t.PI2=2*Math.PI,t}(),RenderSprite=function(){function t(e,i){switch(this._next=i||t.NORENDER,e){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:return void(this._fun=this._image2);case 517:return void(this._fun=this._image2);case 32:return void(this._fun=Filter._filter);case 69905:return void(this._fun=t._initRenderFun)}this.onCreate(e)}__class(t,"laya.renders.RenderSprite");var e=t.prototype;return e.onCreate=function(t){},e._style=function(t,e,i,s){t._style.render(t,e,i,s);var n=this._next;n._fun.call(n,t,e,i,s)},e._no=function(t,e,i,s){},e._custom=function(t,e,i,s){t.customRender(e,i,s);var n=t._style._tf;this._next._fun.call(this._next,t,e,i-n.translateX,s-n.translateY)},e._clip=function(e,i,s,n){var o=this._next;if(o!=t.NORENDER){var r=e._style.scrollRect;i.ctx.save(),i.ctx.clipRect(s,n,r.width,r.height),o._fun.call(o,e,i,s-r.x,n-r.y),i.ctx.restore()}},e._blend=function(t,e,i,s){var n=t._style;n.blendMode&&(e.ctx.globalCompositeOperation=n.blendMode);var o=this._next;o._fun.call(o,t,e,i,s),e.ctx.globalCompositeOperation="source-over"},e._mask=function(t,e,i,s){var n=this._next;n._fun.call(n,t,e,i,s);var o=t.mask;o&&(e.ctx.globalCompositeOperation="destination-in",(o.numChildren>0||!o.graphics._isOnlyOne())&&(o.cacheAsBitmap=!0),o.render(e,i-t.pivotX,s-t.pivotY)),e.ctx.globalCompositeOperation="source-over"},e._graphics=function(t,e,i,s){var n=t._style._tf;t._graphics&&t._graphics._render(t,e,i-n.translateX,s-n.translateY);var o=this._next;o._fun.call(o,t,e,i,s)},e._image=function(t,e,i,s){var n=t._style;e.ctx.drawTexture2(i,s,n._tf.translateX,n._tf.translateY,t.transform,n.alpha,n.blendMode,t._graphics._one)},e._image2=function(t,e,i,s){var n=t._style._tf;e.ctx.drawTexture2(i,s,n.translateX,n.translateY,t.transform,1,null,t._graphics._one)},e._alpha=function(t,e,i,s){var n,o=t._style;if((n=o.alpha)>.01||t._needRepaint()){var r=e.ctx.globalAlpha;e.ctx.globalAlpha*=n;var a=this._next;a._fun.call(a,t,e,i,s),e.ctx.globalAlpha=r}},e._transform=function(e,i,s,n){var o=e.transform,r=this._next;o&&r!=t.NORENDER?(i.save(),i.transform(o.a,o.b,o.c,o.d,o.tx+s,o.ty+n),r._fun.call(r,e,i,0,0),i.restore()):r._fun.call(r,e,i,s,n)},e._childs=function(t,e,i,s){var n=t._style;if(i+=-n._tf.translateX+n.paddingLeft,s+=-n._tf.translateY+n.paddingTop,n._calculation){var o=t._getWords();if(o){var r=n;r&&(r.stroke?e.fillBorderWords(o,i,s,r.font,r.color,r.strokeColor,r.stroke):e.fillWords(o,i,s,r.font,r.color))}}var a,h=t._childs,l=h.length;if(t.viewport||t.optimizeScrollRect&&t._style.scrollRect){var c=t.viewport||t._style.scrollRect,u=c.x,_=c.y,d=c.right,f=c.bottom,p=NaN,g=NaN;for(m=0;l>m;++m)(a=h[m]).visible&&(p=a._x)<d&&p+a.width>u&&(g=a._y)<f&&g+a.height>_&&a.render(e,i,s)}else for(var m=0;l>m;++m)(a=h[m])._style.visible&&a.render(e,i,s)},e._canvas=function(t,e,i,s){var n=t._$P.cacheCanvas,o=this._next;if(!n)return void o._fun.call(o,t,c,i,s);var r,a,h,l,c=n.ctx,u=t._needRepaint()||!c;if("bitmap"===n.type?Stat.canvasBitmap++:Stat.canvasNormal++,u){n._cacheRec||(n._cacheRec=new Rectangle);var _,d;Render.isWebGL&&"bitmap"!==n.type?n._cacheRec.setTo(-t.pivotX,-t.pivotY,1,1):(l=t.getSelfBounds(),l.x-=t.pivotX,l.y-=t.pivotY,l.x-=16,l.y-=16,l.width+=32,l.height+=32,l.x=Math.floor(l.x+i)-i,l.y=Math.floor(l.y+s)-s,l.width=Math.floor(l.width),l.height=Math.floor(l.height),n._cacheRec.copyFrom(l)),l=n._cacheRec;var f=Render.isWebGL?1:Browser.pixelRatio*Laya.stage.clientScaleX,p=Render.isWebGL?1:Browser.pixelRatio*Laya.stage.clientScaleY;if(!Render.isWebGL){var g,m=1,y=1;for(g=t;g&&g!=Laya.stage;)m*=g.scaleX,y*=g.scaleY,g=g.parent;Render.isWebGL?(1>m&&(f*=m),1>y&&(p*=y)):(m>1&&(f*=m),y>1&&(p*=y))}if(_=l.width*f,d=l.height*p,a=l.x,h=l.y,Render.isWebGL&&"bitmap"===n.type&&(_>2048||d>2048))return console.warn("cache bitmap size larger than 2048,cache ignored"),n.ctx&&(Pool.recover("RenderContext",n.ctx),n.ctx.canvas.size(0,0),n.ctx=null),void o._fun.call(o,t,e,i,s);c||(c=n.ctx=Pool.getItem("RenderContext")||new RenderContext(_,d,HTMLCanvas.create("AUTO"))),c.ctx.sprite=t,r=c.canvas,r.clear(),(r.width!=_||r.height!=d)&&r.size(_,d),"bitmap"===n.type?r.context.asBitmap=!0:"normal"===n.type&&(r.context.asBitmap=!1);var v;if(1!=f||1!=p){var w=c.ctx;w.save(),w.scale(f,p),!Render.isConchWebGL&&Render.isConchApp&&(v=t._$P.cf,v&&w.setFilterMatrix&&w.setFilterMatrix(v._mat,v._alpha)),o._fun.call(o,t,c,-a,-h),w.restore(),Render.isConchApp&&!Render.isConchWebGL||t._applyFilters()}else w=c.ctx,!Render.isConchWebGL&&Render.isConchApp&&(v=t._$P.cf,v&&w.setFilterMatrix&&w.setFilterMatrix(v._mat,v._alpha)),o._fun.call(o,t,c,-a,-h),Render.isConchApp&&!Render.isConchWebGL||t._applyFilters();t._$P.staticCache&&(n.reCache=!1),Stat.canvasReCache++}else l=n._cacheRec,a=l.x,h=l.y,r=c.canvas;e.drawCanvas(r,i+a,s+h,l.width,l.height)},t.__init__=function(){function e(e,i){for(var s=0,n=0;n<e.length;n++)s|=e[n],t.renders[s]=i}var i,s=0,n=0;for(i=RunDriver.createRenderSprite(69905,null),n=t.renders.length=4096,s=0;n>s;s++)t.renders[s]=i;t.renders[0]=RunDriver.createRenderSprite(0,null),e([1,512,4,2],new t(1,null)),t.renders[513]=RunDriver.createRenderSprite(513,null),t.renders[517]=new t(517,null)},t._initRenderFun=function(e,i,s,n){var o=e._renderType,r=t.renders[o]=t._getTypeRender(o);r._fun(e,i,s,n)},t._getTypeRender=function(t){for(var e=null,i=2048;i>1;)i&t&&(e=RunDriver.createRenderSprite(i,e)),i>>=1;return e},t.IMAGE=1,t.ALPHA=2,t.TRANSFORM=4,t.BLEND=8,t.CANVAS=16,t.FILTERS=32,t.MASK=64,t.CLIP=128,t.STYLE=256,t.GRAPHICS=512,t.CUSTOM=1024,t.CHILDS=2048,t.INIT=69905,t.renders=[],t.NORENDER=new t(0,null),t}(),Context=function(){function t(){this._repaint=!1}__class(t,"laya.resource.Context");var e=t.prototype;return e.setIsMainContext=function(){},e.drawTextures=function(t,e,i,s){Stat.drawCall+=e.length/2;for(var n=t.width,o=t.height,r=0,a=e.length;a>r;r+=2)this.drawTexture(t,e[r],e[r+1],n,o,i,s)},e.drawCanvas=function(t,e,i,s,n){Stat.drawCall++,this.drawImage(t.source,e,i,s,n)},e.fillRect=function(t,e,i,s,n){Stat.drawCall++,n&&(this.fillStyle=n),this.__fillRect(t,e,i,s)},e.fillText=function(t,e,i,s,n,o){Stat.drawCall++,arguments.length>3&&null!=s&&(this.font=s,this.fillStyle=n,this.textAlign=o,this.textBaseline="top"),this.__fillText(t,e,i)},e.fillBorderText=function(t,e,i,s,n,o,r,a){Stat.drawCall++,this.font=s,this.fillStyle=n,this.textBaseline="top",this.strokeStyle=o,this.lineWidth=r,this.textAlign=a,this.__strokeText(t,e,i),this.__fillText(t,e,i)},e.strokeText=function(t,e,i,s,n,o,r){Stat.drawCall++,arguments.length>3&&null!=s&&(this.font=s,this.strokeStyle=n,this.lineWidth=o,this.textAlign=r,this.textBaseline="top"),this.__strokeText(t,e,i)},e.transformByMatrix=function(t){this.transform(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.setTransformByMatrix=function(t){this.setTransform(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.clipRect=function(t,e,i,s){Stat.drawCall++,this.beginPath(),this.rect(t,e,i,s),this.clip()},e.drawTexture=function(t,e,i,s,n,o,r){Stat.drawCall++;var a=t.uv,h=t.bitmap.width,l=t.bitmap.height;this.drawImage(t.source,a[0]*h,a[1]*l,(a[2]-a[0])*h,(a[5]-a[3])*l,e+o,i+r,s,n)},e.drawTextureWithTransform=function(t,e,i,s,n,o,r,a,h){Stat.drawCall++;var l=t.uv,c=t.bitmap.width,u=t.bitmap.height;this.save(),1!=h&&(this.globalAlpha*=h),o?(this.transform(o.a,o.b,o.c,o.d,o.tx+r,o.ty+a),this.drawImage(t.source,l[0]*c,l[1]*u,(l[2]-l[0])*c,(l[5]-l[3])*u,e,i,s,n)):this.drawImage(t.source,l[0]*c,l[1]*u,(l[2]-l[0])*c,(l[5]-l[3])*u,e+r,i+a,s,n),this.restore()},e.drawTexture2=function(t,e,i,s,n,o,r,a){"use strict";var h=a[0];if(h.loaded&&h.bitmap&&h.source){Stat.drawCall++;var l=1!==o;if(l){var c=this.globalAlpha;this.globalAlpha*=o}var u=h.uv,_=h.bitmap.width,d=h.bitmap.height;n?(this.save(),this.transform(n.a,n.b,n.c,n.d,n.tx+t,n.ty+e),this.drawImage(h.source,u[0]*_,u[1]*d,(u[2]-u[0])*_,(u[5]-u[3])*d,a[1]-i,a[2]-s,a[3],a[4]),this.restore()):this.drawImage(h.source,u[0]*_,u[1]*d,(u[2]-u[0])*_,(u[5]-u[3])*d,a[1]-i+t,a[2]-s+e,a[3],a[4]),l&&(this.globalAlpha=c)}},e.fillTexture=function(t,e,i,s,n,o,r,a){if(!a.pat){if(t.uv!=Texture.DEF_UV){var h=new HTMLCanvas("2D");h.getContext("2d"),h.size(t.width,t.height),h.context.drawTexture(t,0,0,t.width,t.height,0,0),t=new Texture(h)}a.pat=this.createPattern(t.bitmap.source,o)}var l=e,c=i,u=0,_=0;r&&(l+=r.x%t.width,c+=r.y%t.height,u-=r.x%t.width,_-=r.y%t.height),this.translate(l,c),this.fillRect(u,_,s,n,a.pat),this.translate(-l,-c)},e.flush=function(){return 0},e.fillWords=function(t,e,i,s,n){s&&(this.font=s),n&&(this.fillStyle=n);this.textBaseline="top",this.textAlign="left";for(var o=0,r=t.length;r>o;o++){var a=t[o];this.__fillText(a["char"],a.x+e,a.y+i)}},e.fillBorderWords=function(t,e,i,s,n,o,r){s&&(this.font=s),n&&(this.fillStyle=n),this.textBaseline="top",this.lineWidth=r,this.textAlign="left",this.strokeStyle=o;for(var a=0,h=t.length;h>a;a++){var l=t[a];this.__strokeText(l["char"],l.x+e,l.y+i),this.__fillText(l["char"],l.x+e,l.y+i)}},e.destroy=function(){this.canvas.width=this.canvas.height=0},e.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},e.drawCurves=function(t,e,i){this.beginPath(),this.strokeStyle=i[3],this.lineWidth=i[4];var s=i[2];t+=i[0],e+=i[1],this.moveTo(t+s[0],e+s[1]);for(var n=2,o=s.length;o>n;)this.quadraticCurveTo(t+s[n++],e+s[n++],t+s[n++],e+s[n++]);this.stroke()},t.__init__=function(t){var e=laya.resource.Context.prototype;t=t||CanvasRenderingContext2D.prototype,t.__fillText=t.fillText,t.__fillRect=t.fillRect,t.__strokeText=t.strokeText;var i=["drawTextures","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"];i.forEach(function(i){t[i]=e[i]})},t._default=new t,t}(),ResourceManager=function(){function t(){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++t._uniqueIDCounter,this._name="Content Manager",t._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,t._resourceManagers.push(this),this._resources=[]}__class(t,"laya.resource.ResourceManager");var e=t.prototype;return Laya.imps(e,{"laya.resource.IDispose":!0}),e.getResourceByIndex=function(t){return this._resources[t]},e.getResourcesLength=function(){return this._resources.length},e.addResource=function(t){t.resourceManager&&t.resourceManager.removeResource(t);var e=this._resources.indexOf(t);return-1===e?(t._resourceManager=this,this._resources.push(t),this.addSize(t.memorySize),!0):!1},e.removeResource=function(t){var e=this._resources.indexOf(t);return-1!==e?(this._resources.splice(e,1),t._resourceManager=null,this._memorySize-=t.memorySize,!0):!1},e.unload=function(){for(var t=this._resources.slice(0,this._resources.length),e=0;e<t.length;e++){var i=t[e];i.dispose()}t.length=0},e.setUniqueName=function(e){for(var i=!0,s=0;s<t._resourceManagers.length;s++)if(t._resourceManagers[s]._name===e&&t._resourceManagers[s]!==this)return void(i=!1);i?this.name!=e&&(this.name=e,t._isResourceManagersSorted=!1):this.setUniqueName(e.concat("-copy"))},e.dispose=function(){if(this===t._systemResourceManager)throw new Error("systemResourceManager不能被释放！");t._resourceManagers.splice(t._resourceManagers.indexOf(this),1),t._isResourceManagersSorted=!1;for(var e=this._resources.slice(0,this._resources.length),i=0;i<e.length;i++){var s=e[i];s.resourceManager.removeResource(s),s.dispose()}e.length=0},e.addSize=function(t){t&&(this.autoRelease&&t>0&&this._memorySize+t>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=t)},e.garbageCollection=function(t){var e=this._resources;e=e.slice(),e.sort(function(t,e){if(!t||!e)throw new Error("a或b不能为空！");return t.released&&e.released?0:t.released?1:e.released?-1:t.lastUseFrameCount-e.lastUseFrameCount});for(var i=Stat.loopCount,s=0,n=e.length;n>s;s++){var o=e[s];if(!(i-o.lastUseFrameCount>1))return void(this._memorySize>=t&&(this._isOverflow=!0));if(o.releaseResource(),this._memorySize<t)return void(this._isOverflow=!1)}},__getset(0,e,"id",function(){return this._id}),__getset(0,e,"name",function(){return this._name},function(e){!e&&""===e||this._name===e||(this._name=e,t._isResourceManagersSorted=!1)}),__getset(0,e,"memorySize",function(){return this._memorySize}),__getset(1,t,"systemResourceManager",function(){return null===t._systemResourceManager&&(t._systemResourceManager=new t,t._systemResourceManager._name="System Resource Manager"),t._systemResourceManager}),__getset(1,t,"sortedResourceManagersByName",function(){return t._isResourceManagersSorted||(t._isResourceManagersSorted=!0,t._resourceManagers.sort(t.compareResourceManagersByName)),t._resourceManagers}),t.__init__=function(){t.currentResourceManager=t.systemResourceManager},t.getLoadedResourceManagerByIndex=function(e){return t._resourceManagers[e]},t.getLoadedResourceManagersCount=function(){return t._resourceManagers.length},t.recreateContentManagers=function(e){void 0===e&&(e=!1);for(var i=t.currentResourceManager,s=0;s<t._resourceManagers.length;s++){t.currentResourceManager=t._resourceManagers[s];for(var n=0;n<t.currentResourceManager._resources.length;n++)t.currentResourceManager._resources[n].releaseResource(e),t.currentResourceManager._resources[n].activeResource(e)}t.currentResourceManager=i},t.releaseContentManagers=function(e){void 0===e&&(e=!1);for(var i=t.currentResourceManager,s=0;s<t._resourceManagers.length;s++){t.currentResourceManager=t._resourceManagers[s];for(var n=0;n<t.currentResourceManager._resources.length;n++){var o=t.currentResourceManager._resources[n];!o.released&&o.releaseResource(e)}}t.currentResourceManager=i},t.compareResourceManagersByName=function(t,e){if(t==e)return 0;var i=t._name,s=e._name;if(null==i)return null==s?0:-1;if(null==s)return 1;var n=i.localeCompare(s);return 0!=n?n:(e.setUniqueName(s),s=e._name,i.localeCompare(s))},t._uniqueIDCounter=0,t._systemResourceManager=null,t._isResourceManagersSorted=!1,t._resourceManagers=[],t.currentResourceManager=null,t}(),LayoutStyle=function(){function t(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return __class(t,"laya.ui.LayoutStyle"),__static(t,["EMPTY",function(){return this.EMPTY=new t}]),t}(),Styles=function(){function t(){}return __class(t,"laya.ui.Styles"),t.labelColor="#000000",t.buttonStateNum=3,t.scrollBarMinNum=15,t.scrollBarDelayTime=500,__static(t,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),t}(),UIUtils=function(){function t(){}return __class(t,"laya.ui.UIUtils"),t.fillArray=function(t,e,i){var s=t.concat();if(e)for(var n=e.split(","),o=0,r=Math.min(s.length,n.length);r>o;o++){var a=n[o];s[o]="true"==a?!0:"false"==a?!1:a,null!=i&&(s[o]=i(a))}return s},t.toColor=function(t){return Utils.toHexColor(t)},t.gray=function(e,i){void 0===i&&(i=!0),i?t.addFilter(e,t.grayFilter):t.clearFilter(e,ColorFilter)},t.addFilter=function(t,e){var i=t.filters||[];i.push(e),t.filters=i},t.clearFilter=function(t,e){var i=t.filters;if(null!=i&&i.length>0){for(var s=i.length-1;s>-1;s--){var n=i[s];Laya.__typeof(n,e)&&i.splice(s,1)}t.filters=i}},t._getReplaceStr=function(e){return t.escapeSequence[e]},t.adptString=function(e){return e.replace(/\\(\w)/g,t._getReplaceStr)},__static(t,["grayFilter",function(){return this.grayFilter=new ColorFilter([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"	"}}]),t}(),Browser=function(){function t(){}return __class(t,"laya.utils.Browser"),__getset(1,t,"pixelRatio",function(){return t.__init__(),t.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")>-1?2:RunDriver.getPixelRatio()}),__getset(1,t,"height",function(){return t.__init__(),(Laya.stage&&Laya.stage.canvasRotation?t.clientWidth:t.clientHeight)*t.pixelRatio}),__getset(1,t,"clientWidth",function(){return t.__init__(),t.window.innerWidth||t.document.body.clientWidth}),__getset(1,t,"window",function(){return t.__init__(),t._window}),__getset(1,t,"clientHeight",function(){return t.__init__(),t.window.innerHeight||t.document.body.clientHeight||t.document.documentElement.clientHeight}),__getset(1,t,"width",function(){return t.__init__(),(Laya.stage&&Laya.stage.canvasRotation?t.clientHeight:t.clientWidth)*t.pixelRatio}),__getset(1,t,"container",function(){return t.__init__(),t._container||(t._container=t.createElement("div"),t._container.id="layaContainer",t.document.body.appendChild(t._container)),t._container},function(e){t._container=e}),__getset(1,t,"document",function(){return t.__init__(),t._document}),t.__init__=function(){if(!t._window){t._window=RunDriver.getWindow(),t._document=t.window.document,t._window.addEventListener("message",function(t){laya.utils.Browser._onMessage(t)},!1),t.document.__createElement=t.document.createElement,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};var e=window.document.body.style;e.margin=0,e.overflow="hidden";
for(var i=window.document.getElementsByTagName("meta"),s=0,n=!1,o="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no";s<i.length;){var r=i[s];if("viewport"==r.name){r.content=o,n=!0;break}s++}n||(r=document.createElement("meta"),r.name="viewport",r.content=o,document.getElementsByTagName("head")[0].appendChild(r)),t.userAgent=t.window.navigator.userAgent,t.u=t.userAgent,t.onIOS=!!t.u.match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),t.onMobile=t.u.indexOf("Mobile")>-1,t.onIPhone=t.u.indexOf("iPhone")>-1,t.onIPad=t.u.indexOf("iPad")>-1,t.onAndriod=t.u.indexOf("Android")>-1||t.u.indexOf("Adr")>-1,t.onWP=t.u.indexOf("Windows Phone")>-1,t.onQQBrowser=t.u.indexOf("QQBrowser")>-1,t.onMQQBrowser=t.u.indexOf("MQQBrowser")>-1,t.onIE=!!t.window.ActiveXObject||"ActiveXObject"in t.window,t.onWeiXin=t.u.indexOf("MicroMessenger")>-1,t.onPC=!t.onMobile,t.onSafari=!!t.u.match(/Version\/\d+\.\d\x20Mobile\/\S+\x20Safari/),t.httpProtocol="http:"==t.window.location.protocol,t.webAudioEnabled=!!(t.window.AudioContext||t.window.webkitAudioContext||t.window.mozAudioContext),t.soundType=t.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",Sound=t.webAudioEnabled?WebAudioSound:AudioSound,t.webAudioEnabled&&WebAudioSound.initWebAudio(),t.enableTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,window.focus(),SoundManager._soundClass=Sound,Render._mainCanvas=Render._mainCanvas||HTMLCanvas.create("2D"),t.canvas||(t.canvas=HTMLCanvas.create("2D"),t.context=t.canvas.getContext("2d"))}},t._onMessage=function(e){if(e.data&&"size"==e.data.name){if(t.window.innerWidth=e.data.width,t.window.innerHeight=e.data.height,t.window.__innerHeight=e.data.clientHeight,!t.document.createEvent)return void console.warn("no document.createEvent");var i=t.document.createEvent("HTMLEvents");return i.initEvent("resize",!1,!1),void t.window.dispatchEvent(i)}},t.createElement=function(e){return t.__init__(),t.document.__createElement(e)},t.getElementById=function(e){return t.__init__(),t.document.getElementById(e)},t.removeElement=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},t.now=function(){return RunDriver.now()},t._window=null,t._document=null,t._container=null,t.userAgent=null,t.u=null,t.onIOS=!1,t.onMobile=!1,t.onIPhone=!1,t.onIPad=!1,t.onAndriod=!1,t.onAndroid=!1,t.onWP=!1,t.onQQBrowser=!1,t.onMQQBrowser=!1,t.onSafari=!1,t.onIE=!1,t.onWeiXin=!1,t.onPC=!1,t.httpProtocol=!1,t.webAudioEnabled=!1,t.soundType=null,t.enableTouch=!1,t.canvas=null,t.context=null,t.__init$=function(){},t}(),CacheManger=function(){function t(){}return __class(t,"laya.utils.CacheManger"),t.regCacheByFunction=function(e,i){t.unRegCacheByFunction(e,i);var s;s={tryDispose:e,getCacheList:i},t._cacheList.push(s)},t.unRegCacheByFunction=function(e,i){var s=0,n=0;for(n=t._cacheList.length,s=0;n>s;s++)if(t._cacheList[s].tryDispose==e&&t._cacheList[s].getCacheList==i)return void t._cacheList.splice(s,1)},t.forceDispose=function(){var e=0,i=t._cacheList.length;for(e=0;i>e;e++)t._cacheList[e].tryDispose(!0)},t.beginCheck=function(e){void 0===e&&(e=15e3),Laya.timer.loop(e,null,t._checkLoop)},t.stopCheck=function(){Laya.timer.clear(null,t._checkLoop)},t._checkLoop=function(){var e=t._cacheList;if(!(e.length<1)){var i=Browser.now(),s=0,n=0;for(n=s=e.length;s>0&&(t._index++,t._index=t._index%n,e[t._index].tryDispose(!1),!(Browser.now()-i>t.loopTimeLimit));)s--}},t.loopTimeLimit=2,t._cacheList=[],t._index=0,t}(),ClassUtils=function(){function t(){}return __class(t,"laya.utils.ClassUtils"),t.regClass=function(e,i){t._classMap[e]=i},t.getRegClass=function(e){return t._classMap[e]},t.getInstance=function(e){var i=t.getClass(e);return i?new i:(console.warn("[error] Undefined class:",e),null)},t.createByJson=function(e,i,s,n,o){"string"==typeof e&&(e=JSON.parse(e));var r=e.props;if(!i&&(i=o?o.runWith(e):t.getInstance(r.runtime||e.type),!i))return null;var a=e.child;if(a)for(var h=0,l=a.length;l>h;h++){var c=a[h];if("render"!==c.props.name&&"render"!==c.props.renderType||!i._$set_itemRender)if("Graphic"==c.type)t.addGraphicsToSprite(c,i);else if(t.isDrawType(c.type))t.addGraphicToSprite(c,i,!0);else{var u=t.createByJson(c,null,s,n,o);"Script"==c.type?u.hasOwnProperty("owner")?u.owner=i:u.hasOwnProperty("target")&&(u.target=i):"mask"==c.props.renderType?i.mask=u:i.addChild(u)}else i.itemRender=c}if(r)for(var _ in r){var d=r[_];"var"===_&&s?s[d]=i:d instanceof Array&&"function"==typeof i[_]?i[_].apply(i,d):i[_]=d}return n&&e.customProps&&n.runWith([i,e]),i.created&&i.created(),i},t.addGraphicsToSprite=function(e,i){var s;if(s=e.child,s&&!(s.length<1)){var n;n=t._getGraphicsFromSprite(e,i);var o=0,r=0;e.props&&(o=t._getObjVar(e.props,"x",0),r=t._getObjVar(e.props,"y",0)),0!=o&&0!=r&&n.translate(o,r);var a=0,h=0;for(h=s.length,a=0;h>a;a++)t._addGraphicToGraphics(s[a],n);0!=o&&0!=r&&n.translate(-o,-r)}},t.addGraphicToSprite=function(e,i,s){void 0===s&&(s=!1);var n;n=s?t._getGraphicsFromSprite(e,i):i.graphics,t._addGraphicToGraphics(e,n)},t._getGraphicsFromSprite=function(t,e){var i;if(!t||!t.props)return e.graphics;var s;switch(s=t.props.renderType){case"hit":case"unHit":var n;e.hitArea||(e.hitArea=new HitArea),n=e.hitArea,n[s]||(n[s]=new Graphics),i=n[s]}return i||(i=e.graphics),i},t._getTransformData=function(e){var i;(e.hasOwnProperty("pivotX")||e.hasOwnProperty("pivotY"))&&(i=i||new Matrix,i.translate(-t._getObjVar(e,"pivotX",0),-t._getObjVar(e,"pivotY",0)));var s=t._getObjVar(e,"scaleX",1),n=t._getObjVar(e,"scaleY",1),o=t._getObjVar(e,"rotation",0);t._getObjVar(e,"skewX",0),t._getObjVar(e,"skewY",0);return 1==s&&1==n&&0==o||(i=i||new Matrix,i.scale(s,n),i.rotate(.0174532922222222*o)),i},t._addGraphicToGraphics=function(e,i){var s;if(s=e.props){var n;if(n=t.DrawTypeDic[e.type]){var o;o=i;var r,a=t._getParams(s,n[1],n[2],n[3]);r=t._tM,(r||1!=t._alpha)&&(o.save(),r&&o.transform(r),1!=t._alpha&&o.alpha(t._alpha)),o[n[0]].apply(o,a),(r||1!=t._alpha)&&o.restore()}}},t._adptLineData=function(t){return t[2]=parseFloat(t[0])+parseFloat(t[2]),t[3]=parseFloat(t[1])+parseFloat(t[3]),t},t._adptTextureData=function(t){return t[0]=Loader.getRes(t[0]),t},t._adptLinesData=function(e){return e[2]=t._getPointListByStr(e[2]),e},t.isDrawType=function(e){return"Image"==e?!1:t.DrawTypeDic.hasOwnProperty(e)},t._getParams=function(e,i,s,n){void 0===s&&(s=0);var o;o=t._temParam,o.length=i.length;var r=0,a=0;for(a=i.length,r=0;a>r;r++)o[r]=t._getObjVar(e,i[r][0],i[r][1]);t._alpha=t._getObjVar(e,"alpha",1);var h;return h=t._getTransformData(e),h?(s||(s=0),h.translate(o[s],o[s+1]),o[s]=o[s+1]=0,t._tM=h):t._tM=null,n&&t[n]&&(o=t[n](o)),o},t._getPointListByStr=function(t){var e;e=t.split(",");var i=0,s=0;for(s=e.length,i=0;s>i;i++)e[i]=parseFloat(e[i]);return e},t._getObjVar=function(t,e,i){return t.hasOwnProperty(e)?t[e]:i},t._temParam=[],t._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},t.getClass=function(e){var i=t._classMap[e]||e;return"string"==typeof i?Laya.__classmap[i]:i},t._tM=null,t._alpha=NaN,__static(t,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),t}(),Color=function(){function t(e){if(this._color=[],"string"==typeof e){this.strColor=e,null===e&&(e="#000000"),"#"==e.charAt(0)&&(e=e.substr(1));var i=e.length;if(3==i||4==i){for(var s="",n=0;i>n;n++)s+=e[n]+e[n];e=s}var o=this.numColor=parseInt(e,16),r=8==e.length;if(r)return void(this._color=[parseInt(e.substr(0,2),16)/255,((16711680&o)>>16)/255,((65280&o)>>8)/255,(255&o)/255])}else o=this.numColor=e,this.strColor=Utils.toHexColor(o);this._color=[((16711680&o)>>16)/255,((65280&o)>>8)/255,(255&o)/255,1],this._color.__id=++t._COLODID}return __class(t,"laya.utils.Color"),t._initDefault=function(){t._DEFAULT={};for(var e in t._COLOR_MAP)t._SAVE[e]=t._DEFAULT[e]=new t(t._COLOR_MAP[e]);return t._DEFAULT},t._initSaveMap=function(){t._SAVE_SIZE=0,t._SAVE={};for(var e in t._DEFAULT)t._SAVE[e]=t._DEFAULT[e]},t.create=function(e){var i=t._SAVE[e+""];return null!=i?i:(t._SAVE_SIZE<1e3||t._initSaveMap(),t._SAVE[e+""]=new t(e))},t._SAVE={},t._SAVE_SIZE=0,t._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},t._DEFAULT=t._initDefault(),t._COLODID=1,t}(),Dragging=function(){function t(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}__class(t,"laya.utils.Dragging");var e=t.prototype;return e.start=function(t,e,i,s,n,o,r,a){void 0===a&&(a=.92),this.clearTimer(),this.target=t,this.area=e,this.hasInertia=i,this.elasticDistance=e?s:0,this.elasticBackTime=n,this.data=o,this._disableMouseEvent=r,this.ratio=a,1!=t.globalScaleX||1!=t.globalScaleY?this._parent=t.parent:this._parent=Laya.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,Laya.stage.on("mouseup",this,this.onStageMouseUp),Laya.stage.on("mouseout",this,this.onStageMouseUp),Laya.timer.frameLoop(1,this,this.loop)},e.clearTimer=function(){Laya.timer.clear(this,this.loop),Laya.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},e.stop=function(){this._dragging&&(MouseManager.instance.disableMouseEvent=!1,Laya.stage.off("mouseup",this,this.onStageMouseUp),Laya.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},e.loop=function(){var t=this._parent.getMousePoint(),e=t.x,i=t.y,s=e-this._lastX,n=i-this._lastY;if(this._clickOnly){if(!(Math.abs(s*Laya.stage._canvasTransform.getScaleX())>1||Math.abs(n*Laya.stage._canvasTransform.getScaleY())>1))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),MouseManager.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(s,n);0===s&&0===n||(this._lastX=e,this._lastY=i,this.target.x+=s*this._elasticRateX,this.target.y+=n*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},e.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var t=this.area.x-this.target.x;else t=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-t/this.elasticDistance),this.target.y<this.area.y)var e=this.area.y-this.target.y;else e=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-e/this.elasticDistance)}},e.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},e.onStageMouseUp=function(t){if(MouseManager.instance.disableMouseEvent=!1,Laya.stage.off("mouseup",this,this.onStageMouseUp),Laya.stage.off("mouseout",this,this.onStageMouseUp),Laya.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var e=this._offsets.length,i=Math.min(e,6),s=this._offsets.length-i,n=e-1;n>s;n--)this._offsetY+=this._offsets[n--],this._offsetX+=this._offsets[n];this._offsetX=this._offsetX/i*2,this._offsetY=this._offsetY/i*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=this._offsetX>0?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=this._offsetY>0?this.maxOffset:-this.maxOffset),Laya.timer.frameLoop(1,this,this.tweenMove)}else this.elasticDistance>0?this.checkElastic():this.clear()},e.checkElastic=function(){var t=NaN,e=NaN;if(this.target.x<this.area.x?t=this.area.x:this.target.x>this.area.x+this.area.width&&(t=this.area.x+this.area.width),this.target.y<this.area.y?e=this.area.y:this.target.y>this.area.y+this.area.height&&(e=this.area.y+this.area.height),isNaN(t)&&isNaN(e))this.clear();else{var i={};isNaN(t)||(i.x=t),isNaN(e)||(i.y=e),this._tween=Tween.to(this.target,i,this.elasticBackTime,Ease.sineOut,Handler.create(this,this.clear),0,!1,!1)}},e.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(Laya.timer.clear(this,this.tweenMove),this.elasticDistance>0?this.checkElastic():this.clear())},e.clear=function(){if(this.target){this.clearTimer();var t=this.target;this.target=null,this._parent=null,t.event("dragend",this.data)}},t}(),Ease=function(){function t(){}return __class(t,"laya.utils.Ease"),t.linearNone=function(t,e,i,s){return i*t/s+e},t.linearIn=function(t,e,i,s){return i*t/s+e},t.linearInOut=function(t,e,i,s){return i*t/s+e},t.linearOut=function(t,e,i,s){return i*t/s+e},t.bounceIn=function(e,i,s,n){return s-t.bounceOut(n-e,0,s,n)+i},t.bounceInOut=function(e,i,s,n){return.5*n>e?.5*t.bounceIn(2*e,0,s,n)+i:.5*t.bounceOut(2*e-n,0,s,n)+.5*s+i},t.bounceOut=function(t,e,i,s){return(t/=s)<1/2.75?i*(7.5625*t*t)+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},t.backIn=function(t,e,i,s,n){return void 0===n&&(n=1.70158),i*(t/=s)*t*((n+1)*t-n)+e},t.backInOut=function(t,e,i,s,n){return void 0===n&&(n=1.70158),(t/=.5*s)<1?.5*i*(t*t*(((n*=1.525)+1)*t-n))+e:i/2*((t-=2)*t*(((n*=1.525)+1)*t+n)+2)+e},t.backOut=function(t,e,i,s,n){return void 0===n&&(n=1.70158),i*((t=t/s-1)*t*((n+1)*t+n)+1)+e},t.elasticIn=function(e,i,s,n,o,r){void 0===o&&(o=0),void 0===r&&(r=0);var a;return 0==e?i:1==(e/=n)?i+s:(r||(r=.3*n),!o||s>0&&s>o||0>s&&-s>o?(o=s,a=r/4):a=r/t.PI2*Math.asin(s/o),-(o*Math.pow(2,10*(e-=1))*Math.sin((e*n-a)*t.PI2/r))+i)},t.elasticInOut=function(e,i,s,n,o,r){void 0===o&&(o=0),void 0===r&&(r=0);var a;return 0==e?i:2==(e/=.5*n)?i+s:(r||(r=n*(.3*1.5)),!o||s>0&&s>o||0>s&&-s>o?(o=s,a=r/4):a=r/t.PI2*Math.asin(s/o),1>e?-.5*(o*Math.pow(2,10*(e-=1))*Math.sin((e*n-a)*t.PI2/r))+i:o*Math.pow(2,-10*(e-=1))*Math.sin((e*n-a)*t.PI2/r)*.5+s+i)},t.elasticOut=function(e,i,s,n,o,r){void 0===o&&(o=0),void 0===r&&(r=0);var a;return 0==e?i:1==(e/=n)?i+s:(r||(r=.3*n),!o||s>0&&s>o||0>s&&-s>o?(o=s,a=r/4):a=r/t.PI2*Math.asin(s/o),o*Math.pow(2,-10*e)*Math.sin((e*n-a)*t.PI2/r)+s+i)},t.strongIn=function(t,e,i,s){return i*(t/=s)*t*t*t*t+e},t.strongInOut=function(t,e,i,s){return(t/=.5*s)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e},t.strongOut=function(t,e,i,s){return i*((t=t/s-1)*t*t*t*t+1)+e},t.sineInOut=function(t,e,i,s){return.5*-i*(Math.cos(Math.PI*t/s)-1)+e},t.sineIn=function(e,i,s,n){return-s*Math.cos(e/n*t.HALF_PI)+s+i},t.sineOut=function(e,i,s,n){return s*Math.sin(e/n*t.HALF_PI)+i},t.quintIn=function(t,e,i,s){return i*(t/=s)*t*t*t*t+e},t.quintInOut=function(t,e,i,s){return(t/=.5*s)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e},t.quintOut=function(t,e,i,s){return i*((t=t/s-1)*t*t*t*t+1)+e},t.quartIn=function(t,e,i,s){return i*(t/=s)*t*t*t+e},t.quartInOut=function(t,e,i,s){return(t/=.5*s)<1?.5*i*t*t*t*t+e:.5*-i*((t-=2)*t*t*t-2)+e},t.quartOut=function(t,e,i,s){return-i*((t=t/s-1)*t*t*t-1)+e},t.cubicIn=function(t,e,i,s){return i*(t/=s)*t*t+e},t.cubicInOut=function(t,e,i,s){return(t/=.5*s)<1?.5*i*t*t*t+e:.5*i*((t-=2)*t*t+2)+e},t.cubicOut=function(t,e,i,s){return i*((t=t/s-1)*t*t+1)+e},t.quadIn=function(t,e,i,s){return i*(t/=s)*t+e},t.quadInOut=function(t,e,i,s){return(t/=.5*s)<1?.5*i*t*t+e:.5*-i*(--t*(t-2)-1)+e},t.quadOut=function(t,e,i,s){return-i*(t/=s)*(t-2)+e},t.expoIn=function(t,e,i,s){return 0==t?e:i*Math.pow(2,10*(t/s-1))+e-.001*i},t.expoInOut=function(t,e,i,s){return 0==t?e:t==s?e+i:(t/=.5*s)<1?.5*i*Math.pow(2,10*(t-1))+e:.5*i*(-Math.pow(2,-10*--t)+2)+e},t.expoOut=function(t,e,i,s){return t==s?e+i:i*(-Math.pow(2,-10*t/s)+1)+e},t.circIn=function(t,e,i,s){return-i*(Math.sqrt(1-(t/=s)*t)-1)+e},t.circInOut=function(t,e,i,s){return(t/=.5*s)<1?.5*-i*(Math.sqrt(1-t*t)-1)+e:.5*i*(Math.sqrt(1-(t-=2)*t)+1)+e},t.circOut=function(t,e,i,s){return i*Math.sqrt(1-(t=t/s-1)*t)+e},t.HALF_PI=.5*Math.PI,t.PI2=2*Math.PI,t}(),Handler=function(){function t(t,e,i,s){this.once=!1,this._id=0,void 0===s&&(s=!1),this.setTo(t,e,i,s)}__class(t,"laya.utils.Handler");var e=t.prototype;return e.setTo=function(e,i,s,n){return this._id=t._gid++,this.caller=e,this.method=i,this.args=s,this.once=n,this},e.run=function(){if(null==this.method)return null;var t=this._id,e=this.method.apply(this.caller,this.args);return this._id===t&&this.once&&this.recover(),e},e.runWith=function(t){if(null==this.method)return null;var e=this._id;if(null==t)var i=this.method.apply(this.caller,this.args);else i=this.args||t.unshift?this.args?this.method.apply(this.caller,this.args.concat(t)):this.method.apply(this.caller,t):this.method.call(this.caller,t);return this._id===e&&this.once&&this.recover(),i},e.clear=function(){return this.caller=null,this.method=null,this.args=null,this},e.recover=function(){this._id>0&&(this._id=0,t._pool.push(this.clear()))},t.create=function(e,i,s,n){return void 0===n&&(n=!0),t._pool.length?t._pool.pop().setTo(e,i,s,n):new t(e,i,s,n)},t._pool=[],t._gid=1,t}(),HitArea=function(){function t(){this._hit=null,this._unHit=null}__class(t,"laya.utils.HitArea");var e=t.prototype;return e.isHit=function(e,i){return t.isHitGraphic(e,i,this.hit)?!t.isHitGraphic(e,i,this.unHit):!1},e.contains=function(t,e){return this.isHit(t,e)},__getset(0,e,"hit",function(){return this._hit||(this._hit=new Graphics),this._hit},function(t){this._hit=t}),__getset(0,e,"unHit",function(){return this._unHit||(this._unHit=new Graphics),this._unHit},function(t){this._unHit=t}),t.isHitGraphic=function(e,i,s){if(!s)return!1;var n;if(n=s.cmds,!n&&s._one&&(n=t._cmds,n.length=1,n[0]=s._one),!n)return!1;var o=0,r=0;r=n.length;var a;for(o=0;r>o;o++)if(a=n[o]){var h=Render._context;switch(a.callee){case h._translate:case 6:e-=a[0],i-=a[1]}if(t.isHitCmd(e,i,a))return!0}return!1},t.isHitCmd=function(e,i,s){if(!s)return!1;var n=Render._context,o=!1;switch(s.callee){case n._drawRect:case 13:t._rec.setTo(s[0],s[1],s[2],s[3]),o=t._rec.contains(e,i);break;case n._drawCircle:case n._fillCircle:case 14:var r=NaN;e-=s[0],i-=s[1],r=e*e+i*i,o=r<s[2]*s[2];break;case n._drawPoly:case 18:e-=s[0],i-=s[1],o=t.ptInPolygon(e,i,s[2])}return o},t.ptInPolygon=function(e,i,s){var n;n=t._ptPoint,n.setTo(e,i);var o=0,r=NaN,a=NaN,h=NaN,l=NaN,c=0;c=s.length;for(var u=0;c>u;u+=2)if(r=s[u],a=s[u+1],h=s[(u+2)%c],l=s[(u+3)%c],a!=l&&!(n.y<Math.min(a,l)||n.y>=Math.max(a,l))){var _=(n.y-a)*(h-r)/(l-a)+r;_>n.x&&o++}return o%2==1},t._cmds=[],__static(t,["_rec",function(){return this._rec=new Rectangle},"_ptPoint",function(){return this._ptPoint=new Point}]),t}(),HTMLChar=function(){function t(e,i,s,n){this["char"]=e,this.charNum=e.charCodeAt(0),this._x=this._y=0,this.width=i,this.height=s,this.style=n,this.isWord=!t._isWordRegExp.test(e)}__class(t,"laya.utils.HTMLChar");var e=t.prototype;return Laya.imps(e,{"laya.display.ILayout":!0}),e.setSprite=function(t){this._sprite=t},e.getSprite=function(){return this._sprite},e._isChar=function(){return!0},e._getCSSStyle=function(){return this.style},__getset(0,e,"width",function(){return this._w},function(t){this._w=t}),__getset(0,e,"x",function(){return this._x},function(t){this._sprite&&(this._sprite.x=t),this._x=t}),__getset(0,e,"y",function(){return this._y},function(t){this._sprite&&(this._sprite.y=t),this._y=t}),__getset(0,e,"height",function(){return this._h},function(t){this._h=t}),t._isWordRegExp=new RegExp("[\\w.]",""),t}(),Mouse=function(){function t(){}return __class(t,"laya.utils.Mouse"),__getset(1,t,"cursor",function(){return t._style.cursor},function(e){t._style.cursor=e}),t.hide=function(){"none"!=t.cursor&&(t._preCursor=t.cursor,t.cursor="none")},t.show=function(){"none"==t.cursor&&(t._preCursor?t.cursor=t._preCursor:t.cursor="auto")},t._preCursor=null,__static(t,["_style",function(){return this._style=Browser.document.body.style}]),t}(),Pool=function(){function t(){}return __class(t,"laya.utils.Pool"),t.getPoolBySign=function(e){return t._poolDic[e]||(t._poolDic[e]=[])},t.clearBySign=function(e){t._poolDic[e]&&(t._poolDic[e].length=0)},t.recover=function(e,i){i.__InPool||(i.__InPool=!0,t.getPoolBySign(e).push(i))},t.getItemByClass=function(e,i){var s=t.getPoolBySign(e),n=s.length?s.pop():new i;return n.__InPool=!1,n},t.getItemByCreateFun=function(e,i){var s=t.getPoolBySign(e),n=s.length?s.pop():i();return n.__InPool=!1,n},t.getItem=function(e){var i=t.getPoolBySign(e),s=i.length?i.pop():null;return s&&(s.__InPool=!1),s},t._poolDic={},t.InPoolSign="__InPool",t}(),RunDriver=function(){function t(){}return __class(t,"laya.utils.RunDriver"),t.FILTER_ACTIONS=[],t.pixelRatio=-1,t._charSizeTestDiv=null,t.now=function(){return Date.now()},t.getWindow=function(){return window},t.getPixelRatio=function(){if(t.pixelRatio<0){var e=Browser.context,i=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;t.pixelRatio=(Browser.window.devicePixelRatio||1)/i,t.pixelRatio<1&&(t.pixelRatio=1)}return t.pixelRatio},t.getIncludeStr=function(t){return null},t.createShaderCondition=function(t){var e="(function() {return "+t+";})";return Browser.window.eval(e)},t.fontMap=[],t.measureText=function(e,i){var s=t.hanzi.test(e);if(s&&t.fontMap[i])return t.fontMap[i];var n=Browser.context;n.font=i;var o=n.measureText(e);return s&&(t.fontMap[i]=o),o},t.getWebGLContext=function(t){},t.beginFlush=function(){},t.endFinish=function(){},t.addToAtlas=null,t.flashFlushImage=function(t){},t.drawToCanvas=function(t,e,i,s,n,o){var r=HTMLCanvas.create("2D"),a=new RenderContext(i,s,r);return RenderSprite.renders[e]._fun(t,a,n,o),r},t.createParticleTemplate2D=null,t.createGLTextur=null,t.createWebGLContext2D=null,t.changeWebGLSize=function(t,e){},t.createRenderSprite=function(t,e){return new RenderSprite(t,e)},t.createFilterAction=function(t){return new ColorFilterAction},t.createGraphics=function(){return new Graphics},t.clear=function(t){Render._context.ctx.clear()},t.clearAtlas=function(t){},t.addTextureToAtlas=function(t){},t.getTexturePixels=function(t,e,i,s,n){return null},t.skinAniSprite=function(){return null},__static(t,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),t}(),Stat=function(){function t(){}return __class(t,"laya.utils.Stat"),__getset(1,t,"onclick",null,function(e){t._canvas.source.onclick=e,t._canvas.source.style.pointerEvents=""}),t.show=function(e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),Render.isConchApp)return void(conch.showFPS&&conch.showFPS(e,i));var s=Browser.pixelRatio;t._width=130*s,t._vx=75*s,t._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},t._view[1]={title:"Sprite",value:"spriteCount",color:"white",units:"int"},t._view[2]={title:"DrawCall",value:"drawCall",color:"white",units:"int"},t._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},Render.isWebGL?(t._view[4]={title:"Shader",value:"shaderCall",color:"white",units:"int"},Render.is3DMode?(t._view[0].title="FPS(3D)",t._view[5]={title:"TriFaces",value:"trianglesFaces",color:"white",units:"int"},t._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},t._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"}):(t._view[0].title="FPS(WebGL)",t._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"})):t._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"},t._fontSize=12*s;for(var n=0;n<t._view.length;n++)t._view[n].x=4,t._view[n].y=n*t._fontSize+2*s;t._height=s*(12*t._view.length+3*s)+4,t._canvas||(t._canvas=new HTMLCanvas("2D"),t._canvas.size(t._width,t._height),t._ctx=t._canvas.getContext("2d"),t._ctx.textBaseline="top",t._ctx.font=t._fontSize+"px Sans-serif",t._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;left:"+e+"px;top:"+i+"px;width:"+t._width/s+"px;height:"+t._height/s+"px;"),t._first=!0,t.loop(),t._first=!1,Browser.container.appendChild(t._canvas.source),t.enable()},t.enable=function(){Laya.timer.frameLoop(1,t,t.loop)},t.hide=function(){t._canvas&&(Browser.removeElement(t._canvas.source),Laya.timer.clear(t,t.loop))},t.clear=function(){t.trianglesFaces=t.drawCall=t.shaderCall=t.spriteCount=t.treeNodeCollision=t.treeSpriteCollision=t.canvasNormal=t.canvasBitmap=t.canvasReCache=0},t.loop=function(){t._count++;var e=Browser.now();if(!(e-t._timer<1e3)){var i=t._count;if(t.FPS=Math.round(1e3*i/(e-t._timer)),t._canvas){t.trianglesFaces=Math.round(t.trianglesFaces/i),t.drawCall=Math.round(t.drawCall/i)-2,t.shaderCall=Math.round(t.shaderCall/i),t.spriteCount=Math.round(t.spriteCount/i)-1,t.canvasNormal=Math.round(t.canvasNormal/i),t.canvasBitmap=Math.round(t.canvasBitmap/i),t.canvasReCache=Math.ceil(t.canvasReCache/i),t.treeNodeCollision=Math.round(t.treeNodeCollision/i),t.treeSpriteCollision=Math.round(t.treeSpriteCollision/i);var s=t.FPS>0?Math.floor(1e3/t.FPS).toString():" ";t._fpsStr=t.FPS+(t.renderSlow?" slow":"")+" "+s,t._canvasStr=t.canvasReCache+"/"+t.canvasNormal+"/"+t.canvasBitmap,t.currentMemorySize=ResourceManager.systemResourceManager.memorySize;var n=t._ctx;n.clearRect(t._first?0:t._vx,0,t._width,t._height);for(var o=0;o<t._view.length;o++){var r=t._view[o];t._first&&(n.fillStyle="white",n.fillText(r.title,r.x,r.y,null,null,null)),n.fillStyle=r.color;var a=t[r.value];"M"==r.units&&(a=Math.floor(a/1048576*100)/100+" M"),n.fillText(a+"",r.x+t._vx,r.y,null,null,null)}t.clear()}t._count=0,t._timer=e}},t.FPS=0,t.loopCount=0,t.shaderCall=0,t.drawCall=0,t.trianglesFaces=0,t.spriteCount=0,t.treeNodeCollision=0,t.treeSpriteCollision=0,t.canvasNormal=0,t.canvasBitmap=0,t.canvasReCache=0,t.renderSlow=!1,t.currentMemorySize=0,t._fpsStr=null,t._canvasStr=null,t._canvas=null,t._ctx=null,t._timer=0,t._count=0,t._width=0,t._height=100,t._view=[],t._fontSize=12,t._first=!1,t._vx=NaN,t}(),Timer=function(){function t(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map=[],this._laters=[],this._handlers=[],this._temp=[],this._count=0,this.currTimer=Browser.now(),this._lastTimer=Browser.now(),Laya.timer&&Laya.timer.frameLoop(1,this,this._update)}var e;__class(t,"laya.utils.Timer");var i=t.prototype;return i._update=function(){if(this.scale<=0)return void(this._lastTimer=Browser.now());var t=this.currFrame=this.currFrame+this.scale,e=Browser.now();this._delta=(e-this._lastTimer)*this.scale;var i=this.currTimer=this.currTimer+this._delta;this._lastTimer=e;var s=this._handlers;for(this._count=0,r=0,a=s.length;a>r;r++)if(h=s[r],null!==h.method){var n=h.userFrame?t:i;n>=h.exeTime&&(h.repeat?n>h.exeTime&&(h.exeTime+=h.delay,h.run(!1),n>h.exeTime&&(h.exeTime+=Math.ceil((n-h.exeTime)/h.delay)*h.delay)):h.run(!0))}else this._count++;(this._count>30||t%200===0)&&this._clearHandlers();for(var o=this._laters,r=0,a=o.length-1;a>=r;r++){var h=o[r];null!==h.method&&(this._map[h.key]=null,h.run(!1)),this._recoverHandler(h),r===a&&(a=o.length-1)}o.length=0},i._clearHandlers=function(){for(var t=this._handlers,e=0,i=t.length;i>e;e++){var s=t[e];null!==s.method?this._temp.push(s):this._recoverHandler(s)}this._handlers=this._temp,this._temp=t,this._temp.length=0},i._recoverHandler=function(e){this._map[e.key]==e&&(this._map[e.key]=null),e.clear(),t._pool.push(e)},i._create=function(i,s,n,o,r,a,h){if(!n)return void r.apply(o,a);if(h){var l=this._getHandler(o,r);if(l)return l.repeat=s,l.userFrame=i,l.delay=n,l.caller=o,l.method=r,l.args=a,void(l.exeTime=n+(i?this.currFrame:this.currTimer+Browser.now()-this._lastTimer))}l=t._pool.length>0?t._pool.pop():new e,l.repeat=s,l.userFrame=i,l.delay=n,l.caller=o,l.method=r,l.args=a,l.exeTime=n+(i?this.currFrame:this.currTimer+Browser.now()-this._lastTimer),this._indexHandler(l),this._handlers.push(l)},i._indexHandler=function(t){var e=t.caller,i=t.method,s=e?e.$_GID||(e.$_GID=Utils.getGID()):0,n=i.$_TID||(i.$_TID=1e5*this._mid++);t.key=s+n,this._map[t.key]=t},i.once=function(t,e,i,s,n){void 0===n&&(n=!0),this._create(!1,!1,t,e,i,s,n)},i.loop=function(t,e,i,s,n){void 0===n&&(n=!0),this._create(!1,!0,t,e,i,s,n)},i.frameOnce=function(t,e,i,s,n){void 0===n&&(n=!0),this._create(!0,!1,t,e,i,s,n)},i.frameLoop=function(t,e,i,s,n){void 0===n&&(n=!0),this._create(!0,!0,t,e,i,s,n)},i.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+t._pool.length},i.clear=function(t,e){var i=this._getHandler(t,e);i&&(this._map[i.key]=null,i.key=0,i.clear())},i.clearAll=function(t){if(t)for(var e=0,i=this._handlers.length;i>e;e++){var s=this._handlers[e];s.caller===t&&(this._map[s.key]=null,s.key=0,s.clear())}},i._getHandler=function(t,e){var i=t?t.$_GID||(t.$_GID=Utils.getGID()):0,s=e.$_TID||(e.$_TID=1e5*this._mid++);return this._map[i+s]},i.callLater=function(i,s,n){if(null==this._getHandler(i,s)){if(t._pool.length)var o=t._pool.pop();else o=new e;o.caller=i,o.method=s,o.args=n,this._indexHandler(o),this._laters.push(o)}},i.runCallLater=function(t,e){var i=this._getHandler(t,e);i&&null!=i.method&&(this._map[i.key]=null,i.run(!0))},i.runTimer=function(t,e){this.runCallLater(t,e)},__getset(0,i,"delta",function(){return this._delta}),t._pool=[],t.__init$=function(){e=function(){function t(){this.key=0,this.repeat=!1,this.delay=0,this.userFrame=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null}__class(t,"");var e=t.prototype;return e.clear=function(){this.caller=null,this.method=null,this.args=null},e.run=function(t){var e=this.caller;if(e&&e.destroyed)return this.clear();var i=this.method,s=this.args;t&&this.clear(),null!=i&&(s?i.apply(e,s):i.call(e))},t}()},t}(),Tween=function(){function t(){this.gid=0}__class(t,"laya.utils.Tween");var e=t.prototype;return e.to=function(t,e,i,s,n,o,r){return void 0===o&&(o=0),void 0===r&&(r=!1),this._create(t,e,i,s,n,o,r,!0,!1,!0)},e.from=function(t,e,i,s,n,o,r){return void 0===o&&(o=0),void 0===r&&(r=!1),this._create(t,e,i,s,n,o,r,!1,!1,!0)},e._create=function(e,i,s,n,o,r,a,h,l,c){if(!e)throw new Error("Tween:target is null");this._target=e,this._duration=s,this._ease=n||i.ease||t.easeNone,this._complete=o||i.complete,this._delay=r,this._props=[],this._usedTimer=0,this._startTimer=Browser.now(),this._usedPool=l,
this.update=i.update;var u=e.$_GID||(e.$_GID=Utils.getGID());return t.tweenMap[u]?(a&&t.clearTween(e),t.tweenMap[u].push(this)):t.tweenMap[u]=[this],c?0>=r?this.firstStart(e,i,h):Laya.timer.once(r,this,this.firstStart,[e,i,h]):this._initProps(e,i,h),this},e.firstStart=function(t,e,i){return t.destroyed?void this.clear():(this._initProps(t,e,i),void this._beginLoop())},e._initProps=function(t,e,i){for(var s in e)if("number"==typeof t[s]){var n=i?t[s]:e[s],o=i?e[s]:t[s];this._props.push([s,n,o-n]),i||(t[s]=n)}},e._beginLoop=function(){Laya.timer.frameLoop(1,this,this._doEase)},e._doEase=function(){this._updateEase(Browser.now())},e._updateEase=function(e){var i=this._target;if(i){if(i.destroyed)return t.clearTween(i);var s=this._usedTimer=e-this._startTimer-this._delay;if(!(0>s)){if(s>=this._duration)return this.complete();for(var n=s>0?this._ease(s,0,1,this._duration):0,o=this._props,r=0,a=o.length;a>r;r++){var h=o[r];i[h[0]]=h[1]+n*h[2]}this.update&&this.update.run()}}},e.complete=function(){if(this._target){Laya.timer.runTimer(this,this.firstStart);for(var t=this._target,e=this._props,i=this._complete,s=0,n=e.length;n>s;s++){var o=e[s];t[o[0]]=o[1]+o[2]}this.update&&this.update.run(),this.clear(),i&&i.run()}},e.pause=function(){Laya.timer.clear(this,this._beginLoop),Laya.timer.clear(this,this._doEase)},e.setStartTime=function(t){this._startTimer=t},e.clear=function(){this._target&&(this._remove(),this._clear())},e._clear=function(){this.pause(),Laya.timer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._usedPool&&(this.update=null,Pool.recover("tween",this))},e.recover=function(){this._usedPool=!0,this._clear()},e._remove=function(){var e=t.tweenMap[this._target.$_GID];if(e)for(var i=0,s=e.length;s>i;i++)if(e[i]===this){e.splice(i,1);break}},e.restart=function(){this.pause(),this._usedTimer=0,this._startTimer=Browser.now();for(var t=this._props,e=0,i=t.length;i>e;e++){var s=t[e];this._target[s[0]]=s[1]}Laya.timer.once(this._delay,this,this._beginLoop)},e.resume=function(){this._usedTimer>=this._duration||(this._startTimer=Browser.now()-this._usedTimer-this._delay,this._beginLoop())},__getset(0,e,"progress",null,function(t){var e=t*this._duration;this._startTimer=Browser.now()-this._delay-e}),t.to=function(e,i,s,n,o,r,a,h){return void 0===r&&(r=0),void 0===a&&(a=!1),void 0===h&&(h=!0),Pool.getItemByClass("tween",t)._create(e,i,s,n,o,r,a,!0,h,!0)},t.from=function(e,i,s,n,o,r,a,h){return void 0===r&&(r=0),void 0===a&&(a=!1),void 0===h&&(h=!0),Pool.getItemByClass("tween",t)._create(e,i,s,n,o,r,a,!1,h,!0)},t.clearAll=function(e){if(e&&e.$_GID){var i=t.tweenMap[e.$_GID];if(i){for(var s=0,n=i.length;n>s;s++)i[s]._clear();i.length=0}}},t.clear=function(t){t.clear()},t.clearTween=function(e){t.clearAll(e)},t.easeNone=function(t,e,i,s){return i*t/s+e},t.tweenMap={},t}(),Utils=function(){function t(){}return __class(t,"laya.utils.Utils"),t.toRadian=function(e){return e*t._pi2},t.toAngle=function(e){return e*t._pi},t.toHexColor=function(t){if(0>t||isNaN(t))return null;for(var e=t.toString(16);e.length<6;)e="0"+e;return"#"+e},t.getGID=function(){return t._gid++},t.concatArray=function(t,e){if(!e)return t;if(!t)return e;var i=0,s=e.length;for(i=0;s>i;i++)t.push(e[i]);return t},t.clearArray=function(t){return t?(t.length=0,t):t},t.copyArray=function(t,e){if(t||(t=[]),!e)return t;t.length=e.length;var i=0,s=e.length;for(i=0;s>i;i++)t[i]=e[i];return t},t.getGlobalRecByPoints=function(t,e,i,s,n){var o;o=new Point(e,i),o=t.localToGlobal(o);var r;return r=new Point(s,n),r=t.localToGlobal(r),Rectangle._getWrapRec([o.x,o.y,r.x,r.y])},t.getGlobalPosAndScale=function(e){return t.getGlobalRecByPoints(e,0,0,1,1)},t.bind=function(t,e){var i=t;return i=t.bind(e)},t.measureText=function(t,e){return RunDriver.measureText(t,e)},t.updateOrder=function(t){if(!t||t.length<2)return!1;for(var e,i=1,s=0,n=t.length,o=NaN;n>i;){for(s=i,e=t[s],o=t[s]._zOrder;--s>-1&&t[s]._zOrder>o;)t[s+1]=t[s];t[s+1]=e,i++}var r=e.parent.conchModel;if(r)if(null!=r.updateZOrder)r.updateZOrder();else{for(i=0;n>i;i++)r.removeChild(t[i].conchModel);for(i=0;n>i;i++)r.addChildAt(t[i].conchModel,i)}return!0},t.transPointList=function(t,e,i){var s=0,n=t.length;for(s=0;n>s;s+=2)t[s]+=e,t[s+1]+=i},t.parseInt=function(t,e){void 0===e&&(e=0);var i=Browser.window.parseInt(t,e);return isNaN(i)?0:i},t.getFileExtension=function(e){t._extReg.lastIndex=e.lastIndexOf(".");var i=t._extReg.exec(e);return i&&i.length>1?i[1].toLowerCase():null},t.getTransformRelativeToWindow=function(t,e,i){var s=Laya.stage,n=laya.utils.Utils.getGlobalPosAndScale(t),o=s._canvasTransform.clone(),r=o.tx,a=o.ty;o.rotate(-Math.PI/180*Laya.stage.canvasDegree),o.scale(Laya.stage.clientScaleX,Laya.stage.clientScaleY);var h=Laya.stage.canvasDegree%180!=0,l=NaN,c=NaN;h?(l=i+n.y,c=e+n.x,l*=o.d,c*=o.a,90==Laya.stage.canvasDegree?(l=r-l,c+=a):(l+=r,c=a-c)):(l=e+n.x,c=i+n.y,l*=o.a,c*=o.d,l+=r,c+=a),c+=Laya.stage._safariOffsetY;var u=NaN,_=NaN;return h?(u=o.d*n.height,_=o.a*n.width):(u=o.a*n.width,_=o.d*n.height),{x:l,y:c,scaleX:u,scaleY:_}},t.fitDOMElementInArea=function(e,i,s,n,o,r){e._fitLayaAirInitialized||(e._fitLayaAirInitialized=!0,e.style.transformOrigin=e.style.webKittransformOrigin="left top",e.style.position="absolute");var a=t.getTransformRelativeToWindow(i,s,n);e.style.transform=e.style.webkitTransform="scale("+a.scaleX+","+a.scaleY+") rotate("+Laya.stage.canvasDegree+"deg)",e.style.width=o+"px",e.style.height=r+"px",e.style.left=a.x+"px",e.style.top=a.y+"px"},t._gid=1,t._pi=180/Math.PI,t._pi2=Math.PI/180,t._extReg=/\.(\w+)\??/g,t.parseXMLFromString=function(t){var e;if(t=t.replace(/>\s+</g,"><"),e=(new DOMParser).parseFromString(t,"text/xml"),e.firstChild.textContent.indexOf("This page contains the following errors")>-1)throw new Error(e.firstChild.firstChild.textContent);return e},t}(),VectorGraphManager=function(){function t(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],Render.isWebGL&&CacheManger.regCacheByFunction(Utils.bind(this.startDispose,this),Utils.bind(this.getCacheList,this))}__class(t,"laya.utils.VectorGraphManager");var e=t.prototype;return e.getId=function(){return this._id++},e.addShape=function(t,e){this.shapeDic[t]=e,this.useDic[t]||(this.useDic[t]=!0)},e.addLine=function(t,e){this.shapeLineDic[t]=e,this.shapeLineDic[t]||(this.shapeLineDic[t]=!0)},e.getShape=function(t){this._checkKey&&null!=this.useDic[t]&&(this.useDic[t]=!0)},e.deleteShape=function(t){this.shapeDic[t]&&(this.shapeDic[t]=null,delete this.shapeDic[t]),this.shapeLineDic[t]&&(this.shapeLineDic[t]=null,delete this.shapeLineDic[t]),null!=this.useDic[t]&&delete this.useDic[t]},e.getCacheList=function(){var t,e=[];for(t in this.shapeDic)e.push(this.shapeDic[t]);for(t in this.shapeLineDic)e.push(this.shapeLineDic[t]);return e},e.startDispose=function(t){var e;for(e in this.useDic)this.useDic[e]=!1;this._checkKey=!0},e.endDispose=function(){if(this._checkKey){var t;for(t in this.useDic)this.useDic[t]||this.deleteShape(t);this._checkKey=!1}},t.getInstance=function(){return t.instance=t.instance||new t},t.instance=null,t}(),WordText=function(){function t(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}__class(t,"laya.utils.WordText");var e=t.prototype;return e.setText=function(t){this.changed=!0,this._text=t},e.toString=function(){return this._text},e.charCodeAt=function(t){return this._text?this._text.charCodeAt(t):NaN},e.charAt=function(t){return this._text?this._text.charAt(t):null},__getset(0,e,"length",function(){return this._text?this._text.length:0}),t}(),UIConfig=function(){function t(){}return __class(t,"UIConfig"),t.touchScrollEnable=!0,t.mouseWheelEnable=!0,t.showButtons=!0,t.popupBgColor="#000000",t.popupBgAlpha=.5,t.closeDialogOnSide=!0,t}(),Circle=function(t){function e(){e.__super.call(this),this.initCircle()}__class(e,"circle.Circle",t);var i=e.prototype;return i.initCircle=function(){var t=new CircleUI;Laya.stage.addChild(t);for(var e=[],i=0;20>i;i++)e.push({thumbs_up:i});t.m_list.array=e},e}(Trade),Schedule=function(t){function e(){this.map=null,this.marker=null,this.mapDiv=null,this.infoText=null,e.__super.call(this),this.BMap=Browser.window.BMap,this.convertor=new this.BMap.Convertor,this.initTrade()}__class(e,"schedule.Schedule",t);var i=e.prototype;return i.initTrade=function(){this.createDom(),this.initMap(),this.createInfoText();new Handler(this,this.updatePosition),new Handler(this,this.onError);this.convertToBaiduCoord=this.convertToBaiduCoord.bind(this);var t=new ScheduleUI;t.scaleX=.5,t.scaleY=.5,Laya.stage.addChild(t),t.on("click",this,function(t){console.log(t)})},i.createDom=function(){this.mapDiv=Browser.createElement("div");var t=this.mapDiv.style;t.position="absolute",t.top="0px",t.left="0px",t.zIndex=-1,t.width=Browser.width/Browser.pixelRatio+"px",t.height=Laya.stage.height/Browser.pixelRatio+"px",console.log("---------",Browser.width,Browser.height,t.top),Browser.document.body.appendChild(this.mapDiv)},i.initMap=function(){function t(t){console.log(t.point.lng+", "+t.point.lat)}this.map=new this.BMap.Map(this.mapDiv),this.map.centerAndZoom(new this.BMap.Point(116.32715863448607,39.990912172420714),15),this.marker=new this.BMap.Marker(new this.BMap.Point(0,0)),this.map.addOverlay(this.marker);var e=new this.BMap.Label("当前位置",{offset:new this.BMap.Size(-15,30)});this.marker.setLabel(e),this.map.addEventListener("click",t)},i.createInfoText=function(){this.infoText=new Text,Laya.stage.addChild(this.infoText),this.infoText.fontSize=50,this.infoText.color="#FFFFFF",this.infoText.size(Laya.stage.width,Laya.stage.height)},i.updatePosition=function(t){var e=new this.BMap.Point(t.longitude,t.latitude);this.convertor.translate([e],1,5,this.convertToBaiduCoord),this.infoText.text="经度："+t.longitude+"	纬度："+t.latitude+"	精度："+t.accuracy+"\n海拔："+t.altitude+"	海拔精度："+t.altitudeAccuracy+"\n头："+t.heading+"\n速度："+t.speed+"\n时间戳："+t.timestamp},i.convertToBaiduCoord=function(t){if(0==t.status){var e=t.points[0];this.marker.setPosition(e),this.map.panTo(e),this.map.setZoom(17)}},i.onError=function(t){3==t.code?alert("获取位置超时"):2==t.code?alert("位置不可用"):1==t.code&&alert("无权限")},e}(Trade),Node=function(t){function e(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this.destroyed=!1,e.__super.call(this),this._childs=e.ARRAY_EMPTY,this._$P=e.PROP_EMPTY,this.timer=Laya.timer,this.conchModel=Render.isConchNode?this.createConchModel():null}__class(e,"laya.display.Node",t);var i=e.prototype;return i._setBit=function(t,e){if(1==t){var i=this._getBit(t);i!=e&&this._updateDisplayedInstage()}e?this._bits|=t:this._bits&=~t},i._getBit=function(t){return 0!=(this._bits&t)},i._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},i._setUpNoticeType=function(t){var e=this;for(e._setBit(t,!0),e=e.parent;e;){if(e._getBit(t))return;e._setBit(t,!0),e=e.parent}},i.on=function(t,e,i,s){return"display"!==t&&"undisplay"!==t||this._getBit(1)||this._setUpNoticeType(1),this._createListener(t,e,i,s,!1)},i.once=function(t,e,i,s){return"display"!==t&&"undisplay"!==t||this._getBit(1)||this._setUpNoticeType(1),this._createListener(t,e,i,s,!0)},i.createConchModel=function(){return null},i.destroy=function(t){void 0===t&&(t=!0),this.destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(t?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},i.destroyChildren=function(){if(this._childs)for(var t=this._childs.length-1;t>-1;t--)this._childs[t].destroy(!0)},i.addChild=function(t){if(!t||this.destroyed||t===this)return t;if(t.zOrder&&this._set$P("hasZorder",!0),t._parent===this){var i=this.getChildIndex(t);i!==this._childs.length-1&&(this._childs.splice(i,1),this._childs.push(t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,this._childs.length-1)),this._childChanged())}else t.parent&&t.parent.removeChild(t),this._childs===e.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(t),this.conchModel&&this.conchModel.addChildAt(t.conchModel,this._childs.length-1),t.parent=this,this._childChanged();return t},i.addChildren=function(t){for(var e=arguments,i=0,s=e.length;s>i;)this.addChild(e[i++])},i.addChildAt=function(t,i){if(!t||this.destroyed||t===this)return t;if(t.zOrder&&this._set$P("hasZorder",!0),i>=0&&i<=this._childs.length){if(t._parent===this){var s=this.getChildIndex(t);this._childs.splice(s,1),this._childs.splice(i,0,t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,i)),this._childChanged()}else t.parent&&t.parent.removeChild(t),this._childs===e.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(i,0,t),this.conchModel&&this.conchModel.addChildAt(t.conchModel,i),t.parent=this;return t}throw new Error("appendChildAt:The index is out of bounds")},i.getChildIndex=function(t){return this._childs.indexOf(t)},i.getChildByName=function(t){var e=this._childs;if(e)for(var i=0,s=e.length;s>i;i++){var n=e[i];if(n.name===t)return n}return null},i._get$P=function(t){return this._$P[t]},i._set$P=function(t,i){return this.destroyed||(this._$P===e.PROP_EMPTY&&(this._$P={}),this._$P[t]=i),i},i.getChildAt=function(t){return this._childs[t]},i.setChildIndex=function(t,e){var i=this._childs;if(0>e||e>=i.length)throw new Error("setChildIndex:The index is out of bounds.");var s=this.getChildIndex(t);if(0>s)throw new Error("setChildIndex:node is must child of this object.");return i.splice(s,1),i.splice(e,0,t),this.conchModel&&(this.conchModel.removeChild(t.conchModel),this.conchModel.addChildAt(t.conchModel,e)),this._childChanged(),t},i._childChanged=function(t){},i.removeChild=function(t){if(!this._childs)return t;var e=this._childs.indexOf(t);return this.removeChildAt(e)},i.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},i.removeChildByName=function(t){var e=this.getChildByName(t);return e&&this.removeChild(e),e},i.removeChildAt=function(t){var e=this.getChildAt(t);return e&&(this._childs.splice(t,1),this.conchModel&&this.conchModel.removeChild(e.conchModel),e.parent=null),e},i.removeChildren=function(t,i){if(void 0===t&&(t=0),void 0===i&&(i=2147483647),this._childs&&this._childs.length>0){var s=this._childs;if(0===t&&i>=r){var n=s;this._childs=e.ARRAY_EMPTY}else n=s.splice(t,i-t);for(var o=0,r=n.length;r>o;o++)n[o].parent=null,this.conchModel&&this.conchModel.removeChild(n[o].conchModel)}return this},i.replaceChild=function(t,e){var i=this._childs.indexOf(e);return i>-1?(this._childs.splice(i,1,t),this.conchModel&&(this.conchModel.removeChild(e.conchModel),this.conchModel.addChildAt(t.conchModel,i)),e.parent=null,t.parent=this,t):null},i._updateDisplayedInstage=function(){var t;t=this;var e=Laya.stage;for(this._displayedInStage=!1;t;){if(t._getBit(1)){this._displayedInStage=t._displayedInStage;break}if(t==e||t._displayedInStage){this._displayedInStage=!0;break}t=t.parent}},i._setDisplay=function(t){this._displayedInStage!==t&&(this._displayedInStage=t,t?this.event("display"):this.event("undisplay"))},i._displayChild=function(t,e){var i=t._childs;if(i)for(var s=0,n=i.length;n>s;s++){var o=i[s];o._getBit(1)&&(o._childs.length>0?this._displayChild(o,e):o._setDisplay(e))}t._setDisplay(e)},i.contains=function(t){if(t===this)return!0;for(;t;){if(t.parent===this)return!0;t=t.parent}return!1},i.timerLoop=function(t,e,i,s,n){void 0===n&&(n=!0),this.timer._create(!1,!0,t,e,i,s,n)},i.timerOnce=function(t,e,i,s,n){void 0===n&&(n=!0),this.timer._create(!1,!1,t,e,i,s,n)},i.frameLoop=function(t,e,i,s,n){void 0===n&&(n=!0),this.timer._create(!0,!0,t,e,i,s,n)},i.frameOnce=function(t,e,i,s,n){void 0===n&&(n=!0),this.timer._create(!0,!1,t,e,i,s,n)},i.clearTimer=function(t,e){this.timer.clear(t,e)},__getset(0,i,"numChildren",function(){return this._childs.length}),__getset(0,i,"parent",function(){return this._parent},function(t){this._parent!==t&&(t?(this._parent=t,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),t.displayedInStage&&this._displayChild(this,!0)),t._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=t))}),__getset(0,i,"displayedInStage",function(){return this._getBit(1)?this._displayedInStage:(this._setUpNoticeType(1),this._displayedInStage)}),e.ARRAY_EMPTY=[],e.PROP_EMPTY={},e.NOTICE_DISPLAY=1,e.MOUSEENABLE=2,e}(EventDispatcher),Resource=function(t){function e(){this._id=0,this._lastUseFrameCount=0,this._memorySize=0,this._name=null,this._url=null,this._loaded=!1,this._released=!1,this._disposed=!1,this._resourceManager=null,this.lock=!1,e.__super.call(this),this._$1__id=++e._uniqueIDCounter,e._loadedResources.push(this),e._isLoadedResourcesSorted=!1,this._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,ResourceManager.currentResourceManager&&ResourceManager.currentResourceManager.addResource(this)}__class(e,"laya.resource.Resource",t);var i=e.prototype;return Laya.imps(i,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),i.recreateResource=function(){this.startCreate(),this.completeCreate()},i.detoryResource=function(){},i.activeResource=function(t){void 0===t&&(t=!1),this._lastUseFrameCount=Stat.loopCount,(this._released||t)&&this.recreateResource()},i.releaseResource=function(t){return void 0===t&&(t=!1),!t&&this.lock?!1:!this._released||t?(this.detoryResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0):!1},i.setUniqueName=function(t){for(var i=!0,s=0;s<e._loadedResources.length;s++)if(e._loadedResources[s]._name===t&&e._loadedResources[s]!==this)return void(i=!1);i?this.name!=t&&(this.name=t,e._isLoadedResourcesSorted=!1):this.setUniqueName(t.concat("-copy"))},i.onAsynLoaded=function(t,e,i){throw new Error("Resource: must override this function!")},i.dispose=function(){if(null!==this._resourceManager)throw new Error("附属于resourceManager的资源不能独立释放！");this._disposed=!0,this.lock=!1,this.releaseResource();var t=e._loadedResources.indexOf(this);-1!==t&&(e._loadedResources.splice(t,1),e._isLoadedResourcesSorted=!1),Loader.clearRes(this.url)},i.startCreate=function(){this.event("recovering",this)},i.completeCreate=function(){this._released=!1,this.event("recovered",this)},__getset(0,i,"loaded",function(){return this._loaded}),__getset(0,i,"id",function(){return this._$1__id}),__getset(0,i,"url",function(){return this._url},function(t){this._url=t}),__getset(0,i,"name",function(){return this._name},function(t){!t&&""===t||this.name===t||(this._name=t,e._isLoadedResourcesSorted=!1)}),__getset(0,i,"disposed",function(){return this._disposed}),__getset(0,i,"released",function(){return this._released}),__getset(0,i,"resourceManager",function(){return this._resourceManager}),__getset(0,i,"lastUseFrameCount",function(){return this._lastUseFrameCount}),__getset(0,i,"memorySize",function(){return this._memorySize},function(t){var e=t-this._memorySize;this._memorySize=t,this.resourceManager&&this.resourceManager.addSize(e)}),__getset(1,e,"sortedLoadedResourcesByName",function(){return e._isLoadedResourcesSorted||(e._isLoadedResourcesSorted=!0,e._loadedResources.sort(e.compareResourcesByName)),e._loadedResources},laya.events.EventDispatcher._$SET_sortedLoadedResourcesByName),e.getLoadedResourceByIndex=function(t){return e._loadedResources[t]},e.getLoadedResourcesCount=function(){return e._loadedResources.length},e.compareResourcesByName=function(t,e){if(t===e)return 0;var i=t.name,s=e.name;if(null===i)return null===s?0:-1;if(null==s)return 1;var n=i.localeCompare(s);return 0!=n?n:(e.setUniqueName(s),s=e.name,i.localeCompare(s))},e._uniqueIDCounter=0,e._loadedResources=[],e._isLoadedResourcesSorted=!1,e}(EventDispatcher),LoaderManager=function(t){function e(){this.retryNum=1,this.retryDelay=0,this.maxLoader=5,this._loaders=[],this._loaderCount=0,this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},e.__super.call(this);for(var t=0;t<this._maxPriority;t++)this._resInfos[t]=[]}var i;__class(e,"laya.net.LoaderManager",t);var s=e.prototype;return s.create=function(t,e,i,s,n,o,r){function a(t,i){u++,t.progress=1,u===c&&e&&e.run()}function h(t,e){t.progress=e;for(var i=0,s=0;c>s;s++){var n=l[s];i+=n.progress}var o=i/c;_.runWith(o)}if(void 0===o&&(o=1),void 0===r&&(r=!0),t instanceof Array){var l=t,c=l.length,u=0;if(i)var _=Handler.create(i.caller,i.method,i.args,!1);for(var d=0;c>d;d++){var f=l[d];"string"==typeof f&&(f=l[d]={url:f}),f.progress=0;var p=i?Handler.create(null,h,[f],!1):null,g=i||e?Handler.create(null,a,[f]):null;this._create(f.url,g,p,f.clas||s,f.params||n,f.priority||o,r)}return!0}return this._create(t,e,i,s,n,o,r)},s._create=function(t,i,s,n,o,r,a){function h(e){l&&l.onAsynLoaded.call(l,t,e,o),i&&i.run()}void 0===r&&(r=1),void 0===a&&(a=!0);var l=this.getRes(t);if(l)s&&s.runWith(1),i&&i.run();else{var c=Utils.getFileExtension(t),u=e.createMap[c];n||(n=u[0]);var _=u[1];"atlas"==c?this.load(t,i,s,_,r,a):(n===Texture&&(_="htmlimage"),l=n?new n:null,this.load(t,Handler.create(null,h),s,_,r,!1,null,!0),a&&(this.cacheRes(t,l),l.url=t))}return l},s.load=function(t,s,n,o,r,a,h,l){if(void 0===r&&(r=1),void 0===a&&(a=!0),void 0===l&&(l=!1),t instanceof Array)return this._loadAssets(t,s,n,o,r,a,h);var c=Loader.getRes(t);if(null!=c)n&&n.runWith(1),s&&s.runWith(c),this._loaderCount||this.event("complete");else{var u=e._resMap[t];u?(s&&u._createListener("complete",s.caller,s.method,s.args,!1,!1),n&&u._createListener("progress",n.caller,n.method,n.args,!1,!1)):(u=this._infoPool.length?this._infoPool.pop():new i,u.url=t,u.type=o,u.cache=a,u.group=h,u.ignoreCache=l,s&&u.on("complete",s.caller,s.method,s.args),n&&u.on("progress",n.caller,n.method,n.args),e._resMap[t]=u,r=r<this._maxPriority?r:this._maxPriority-1,this._resInfos[r].push(u),this._next())}return this},s._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var t=0;t<this._maxPriority;t++){var e=this._resInfos[t];if(e.length>0){var i=e.shift();if(i)return this._doLoad(i)}}this._loaderCount||this.event("complete")}},s._doLoad=function(t){function e(e){i.offAll(),i._data=null,s._loaders.push(i),s._endLoad(t,e instanceof Array?[e]:e),s._loaderCount--,s._next()}this._loaderCount++;var i=this._loaders.length?this._loaders.pop():new Loader;i.on("complete",null,e),i.on("progress",null,function(e){t.event("progress",e)}),i.on("error",null,function(t){e(null)});var s=this;i.load(t.url,t.type,t.cache,t.group,t.ignoreCache)},s._endLoad=function(t,i){if(null==i){var s=this._failRes[t.url]||0;if(s<this.retryNum)return console.warn("[warn]Retry to load:",t.url),this._failRes[t.url]=s+1,void Laya.timer.once(this.retryDelay,this,this._addReTry,[t],!1);console.warn("[error]Failed to load:",t.url),this.event("error",t.url)}delete e._resMap[t.url],t.event("complete",i),t.offAll(),this._infoPool.push(t)},s._addReTry=function(t){this._resInfos[this._maxPriority-1].push(t),this._next()},s.clearRes=function(t,e){void 0===e&&(e=!1),Loader.clearRes(t,e)},s.getRes=function(t){return Loader.getRes(t)},s.cacheRes=function(t,e){Loader.cacheRes(t,e)},s.setGroup=function(t,e){Loader.setGroup(t,e)},s.clearResByGroup=function(t){Loader.clearResByGroup(t)},s.clearUnLoaded=function(){for(var t=0;t<this._maxPriority;t++){for(var i=this._resInfos[t],s=i.length-1;s>-1;s--){var n=i[s];n&&(n.offAll(),this._infoPool.push(n))}i.length=0}this._loaderCount=0,e._resMap={}},s.cancelLoadByUrls=function(t){if(t)for(var e=0,i=t.length;i>e;e++)this.cancelLoadByUrl(t[e])},s.cancelLoadByUrl=function(t){for(var i=0;i<this._maxPriority;i++)for(var s=this._resInfos[i],n=s.length-1;n>-1;n--){var o=s[n];o&&o.url===t&&(s[n]=null,o.offAll(),this._infoPool.push(o))}e._resMap[t]&&delete e._resMap[t]},s._loadAssets=function(t,e,i,s,n,o,r){function a(t,i){c++,t.progress=1,i||(d=!1),c===l&&e&&e.runWith(d)}function h(t,e){if(null!=i){t.progress=e;for(var s=0,n=0;n<_.length;n++){var o=_[n];s+=o.size*o.progress}var r=s/u;i.runWith(r)}}void 0===n&&(n=1),void 0===o&&(o=!0);for(var l=t.length,c=0,u=0,_=[],d=!0,f=0;l>f;f++){var p=t[f];"string"==typeof p&&(p={url:p,type:s,size:1,priority:n}),p.size||(p.size=1),p.progress=0,u+=p.size,_.push(p);var g=i?Handler.create(null,h,[p],!1):null,m=e||i?Handler.create(null,a,[p]):null;this.load(p.url,m,g,p.type,p.priority||1,o,p.group||r)}return this},e.cacheRes=function(t,e){Loader.cacheRes(t,e)},e._resMap={},__static(e,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),e.__init$=function(){i=function(t){function e(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,e.__super.call(this)}return __class(e,"",t),e}(EventDispatcher)},e}(EventDispatcher),Notice=function(t){function e(){e.__super.call(this)}return __class(e,"laya.debug.tools.Notice",t),e.notify=function(t,i){e.I.event(t,i)},e.listen=function(t,i,s,n,o){void 0===o&&(o=!1),o&&e.cancel(t,i,s),e.I.on(t,i,s,n)},e.cancel=function(t,i,s){e.I.off(t,i,s)},__static(e,["I",function(){return this.I=new e}]),e}(EventDispatcher),AudioSound=function(t){function e(){this.url=null,this.audio=null,this.loaded=!1,e.__super.call(this)}__class(e,"laya.media.h5audio.AudioSound",t);var i=e.prototype;return i.dispose=function(){var t=e._audioCache[this.url];t&&(t.src="",delete e._audioCache[this.url])},i.load=function(t){function i(){n(),r.loaded=!0,r.event("complete")}function s(){o.load=null,n(),r.event("error")}function n(){o.removeEventListener("canplaythrough",i),o.removeEventListener("error",s)}t=URL.formatURL(t),this.url=t;var o=e._audioCache[t];if(o&&o.readyState>=2)return void this.event("complete");o||(o=Browser.createElement("audio"),o.src=t,e._audioCache[t]=o),o.addEventListener("canplaythrough",i),o.addEventListener("error",s);var r=this;this.audio=o,o.load?o.load():s()},i.play=function(t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),!this.url)return null;var s;if(s=e._audioCache[this.url],!s)return null;var n;n=Pool.getItem("audio:"+this.url),Render.isConchApp?n||(n=Browser.createElement("audio"),n.src=s.src):n=n?n:s.cloneNode(!0);var o=new AudioSoundChannel(n);return o.url=this.url,o.loops=i,o.startTime=t,o.play(),SoundManager.addChannel(o),o},__getset(0,i,"duration",function(){var t;return t=e._audioCache[this.url],t?t.duration:0}),e._audioCache={},e}(EventDispatcher),SoundChannel=function(t){function e(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.completeHandler=null,e.__super.call(this)}__class(e,"laya.media.SoundChannel",t);var i=e.prototype;return i.play=function(){},i.stop=function(){},i.pause=function(){},i.resume=function(){},i.__runComplete=function(t){t&&t.run()},__getset(0,i,"volume",function(){return 1},function(t){}),__getset(0,i,"position",function(){return 0}),__getset(0,i,"duration",function(){return 0}),e}(EventDispatcher),Sound=function(t){function e(){e.__super.call(this)}__class(e,"laya.media.Sound",t);var i=e.prototype;return i.load=function(t){},i.play=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),null},i.dispose=function(){},__getset(0,i,"duration",function(){return 0}),e}(EventDispatcher),WebAudioSound=function(t){function e(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,e.__super.call(this)}__class(e,"laya.media.webaudio.WebAudioSound",t);var i=e.prototype;return i.load=function(t){var i=this;if(t=URL.formatURL(t),this.url=t,this.audioBuffer=e._dataCache[t],this.audioBuffer)return void this._loaded(this.audioBuffer);if(e.e.on("loaded:"+t,this,this._loaded),e.e.on("err:"+t,this,this._err),!e.__loadingSound[t]){e.__loadingSound[t]=!0;var s=new Browser.window.XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer",s.onload=function(){i.data=s.response,e.buffs.push({buffer:i.data,url:i.url}),e.decode()},s.onerror=function(t){i._err()},s.send()}},i._err=function(){this._removeLoadEvents(),e.__loadingSound[this.url]=!1,this.event("error")},i._loaded=function(t){this._removeLoadEvents(),this.audioBuffer=t,e._dataCache[this.url]=this.audioBuffer,this.loaded=!0,this.event("complete")},i._removeLoadEvents=function(){e.e.off("loaded:"+this.url,this,this._loaded),e.e.off("err:"+this.url,this,this._err)},i.__playAfterLoaded=function(){if(this.__toPlays){var t,e=0,i=0;t=this.__toPlays,i=t.length;var s;for(e=0;i>e;e++)s=t[e],s[2]&&!s[2].isStopped&&this.play(s[0],s[1],s[2]);this.__toPlays.length=0}},i.play=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),i=i?i:new WebAudioSoundChannel,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([t,e,i]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),i.url=this.url,i.loops=e,i.audioBuffer=this.audioBuffer,i.startTime=t,i.play(),SoundManager.addChannel(i),i},i.dispose=function(){delete e._dataCache[this.url],delete e.__loadingSound[this.url]},__getset(0,i,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),e.decode=function(){e.buffs.length<=0||e.isDecoding||(e.isDecoding=!0,e.tInfo=e.buffs.shift(),e.ctx.decodeAudioData(e.tInfo.buffer,e._done,e._fail))},e._done=function(t){e.e.event("loaded:"+e.tInfo.url,t),e.isDecoding=!1,e.decode()},e._fail=function(){e.e.event("err:"+e.tInfo.url,null),e.isDecoding=!1,e.decode()},e._playEmptySound=function(){if(null!=e.ctx){var t=e.ctx.createBufferSource();t.buffer=e._miniBuffer,t.connect(e.ctx.destination),t.start(0,0,0)}},e._unlock=function(){e._unlocked||(e._playEmptySound(),"running"==e.ctx.state&&(Browser.document.removeEventListener("mousedown",e._unlock,!0),Browser.document.removeEventListener("touchend",e._unlock,!0),e._unlocked=!0))},e.initWebAudio=function(){"running"!=e.ctx.state&&(e._unlock(),Browser.document.addEventListener("mousedown",e._unlock,!0),Browser.document.addEventListener("touchend",e._unlock,!0))},e._dataCache={},e.buffs=[],e.isDecoding=!1,e._unlocked=!1,e.tInfo=null,e.__loadingSound={},__static(e,["window",function(){return this.window=Browser.window},"webAudioEnabled",function(){return this.webAudioEnabled=e.window.AudioContext||e.window.webkitAudioContext||e.window.mozAudioContext},"ctx",function(){return this.ctx=e.webAudioEnabled?new(e.window.AudioContext||e.window.webkitAudioContext||e.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=e.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new EventDispatcher}]),e}(EventDispatcher),HttpRequest=function(t){function e(){this._responseType=null,this._data=null,e.__super.call(this),this._http=new Browser.window.XMLHttpRequest}__class(e,"laya.net.HttpRequest",t);var i=e.prototype;return i.send=function(t,e,i,s,n){void 0===i&&(i="get"),void 0===s&&(s="text"),this._responseType=s,this._data=null;var o=this,r=this._http;if(r.open(i,t,!0),n)for(var a=0;a<n.length;a++)r.setRequestHeader(n[a++],n[a]);else Render.isConchApp||(e&&"string"!=typeof e?r.setRequestHeader("Content-Type","application/json"):r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));r.responseType="arraybuffer"!==s?"text":"arraybuffer",r.onerror=function(t){o._onError(t)},r.onabort=function(t){o._onAbort(t)},r.onprogress=function(t){o._onProgress(t)},r.onload=function(t){o._onLoad(t)},r.send(e)},i._onProgress=function(t){t&&t.lengthComputable&&this.event("progress",t.loaded/t.total)},i._onAbort=function(t){this.error("Request was aborted by user")},i._onError=function(t){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},i._onLoad=function(t){var e=this._http,i=void 0!==e.status?e.status:200;200===i||204===i||0===i?this.complete():this.error("["+e.status+"]"+e.statusText+":"+e.responseURL)},i.error=function(t){this.clear(),this.event("error",t)},i.complete=function(){this.clear();var t=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=Utils.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(e){t=!1,this.error(e.message)}t&&this.event("complete",this._data instanceof Array?[this._data]:this._data);
},i.clear=function(){var t=this._http;t.onerror=t.onabort=t.onprogress=t.onload=null},__getset(0,i,"url",function(){return this._http.responseURL}),__getset(0,i,"http",function(){return this._http}),__getset(0,i,"data",function(){return this._data}),e}(EventDispatcher),Loader=function(t){function e(){this._data=null,this._url=null,this._type=null,this._cache=!1,this._http=null,e.__super.call(this)}__class(e,"laya.net.Loader",t);var i=e.prototype;return i.load=function(t,i,s,n,o){if(void 0===s&&(s=!0),void 0===o&&(o=!1),this._url=t,0===t.indexOf("data:image")?i="image":t=URL.formatURL(t),this._type=i||(i=this.getTypeFromUrl(t)),this._cache=s,this._data=null,!o&&e.loadedMap[t])return this._data=e.loadedMap[t],this.event("progress",1),void this.event("complete",this._data);if(n&&e.setGroup(t,n),null!=e.parserMap[i])return void(e.parserMap[i]instanceof laya.utils.Handler?e.parserMap[i].runWith(this):e.parserMap[i].call(null,this));if("image"===i||"htmlimage"===i||"nativeimage"===i)return this._loadImage(t);if("sound"===i)return this._loadSound(t);this._http||(this._http=new HttpRequest,this._http.on("progress",this,this.onProgress),this._http.on("error",this,this.onError),this._http.on("complete",this,this.onLoaded));var r;switch(i){case"atlas":r="json";break;case"font":r="xml";break;default:r=i}this._http.send(t,null,"get",r)},i.getTypeFromUrl=function(t){var i=Utils.getFileExtension(t);return i?e.typeMap[i]:(console.warn("Not recognize the resources suffix",t),"text")},i._loadImage=function(t){function e(){i.onload=null,i.onerror=null}t=URL.formatURL(t);var i,s=this,n=function(){e(),s.onLoaded(i)},o=function(){e(),s.event("error","Load image failed")};"nativeimage"===this._type?(i=new Browser.window.Image,i.crossOrigin="",i.onload=n,i.onerror=o,i.src=t):new HTMLImage.create(t,{onload:n,onerror:o,onCreate:function(t){i=t}})},i._loadSound=function(t){function e(){s(),o.onLoaded(n)}function i(){s(),n.dispose(),o.event("error","Load sound failed")}function s(){n.offAll()}var n=new SoundManager._soundClass,o=this;n.on("complete",this,e),n.on("error",this,i),n.load(t)},i.onProgress=function(t){"atlas"===this._type?this.event("progress",.3*t):this.event("progress",t)},i.onError=function(t){this.event("error",t)},i.onLoaded=function(t){var i=this._type;if("image"===i){var s=new Texture(t);s.url=this._url,this.complete(s)}else if("sound"===i||"htmlimage"===i||"nativeimage"===i)this.complete(t);else if("atlas"===i){if(!t.src&&!t._setContext){if(!this._data){if(this._data=t,t.meta&&t.meta.image)for(var n=t.meta.image.split(","),o=this._url.indexOf("/")>=0?"/":"\\",r=this._url.lastIndexOf(o),a=r>=0?this._url.substr(0,r+1):"",h=0,l=n.length;l>h;h++)n[h]=a+n[h];else n=[this._url.replace(".json",".png")];n.reverse(),t.toLoads=n,t.pics=[]}return this.event("progress",.3+1/n.length*.6),this._loadImage(n.pop())}if(this._data.pics.push(t),this._data.toLoads.length>0)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var c=this._data.frames,u=this._url.split("?")[0],_=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:u.substring(0,u.lastIndexOf("."))+"/",d=this._data.pics,f=URL.formatURL(this._url),p=e.atlasMap[f]||(e.atlasMap[f]=[]);p.dir=_;for(var g in c){var m=c[g],y=d[m.frame.idx?m.frame.idx:0],v=URL.formatURL(_+g);e.cacheRes(v,Texture.create(y,m.frame.x,m.frame.y,m.frame.w,m.frame.h,m.spriteSourceSize.x,m.spriteSourceSize.y,m.sourceSize.w,m.sourceSize.h)),e.loadedMap[v].url=v,p.push(v)}this.complete(this._data)}else if("font"==i){if(!t.src)return this._data=t,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var w=new BitmapFont;w.parseFont(this._data,t);var C=this._url.split(".fnt")[0].split("/"),b=C[C.length-1];Text.registerBitmapFont(b,w),this._data=w,this.complete(this._data)}else this.complete(t)},i.complete=function(t){this._data=t,e._loaders.push(this),e._isWorking||e.checkNext()},i.endLoad=function(t){t&&(this._data=t),this._cache&&e.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},__getset(0,i,"url",function(){return this._url}),__getset(0,i,"data",function(){return this._data}),__getset(0,i,"cache",function(){return this._cache}),__getset(0,i,"type",function(){return this._type}),e.checkNext=function(){e._isWorking=!0;for(var t=Browser.now(),i=t;e._startIndex<e._loaders.length;)if(i=Browser.now(),e._loaders[e._startIndex].endLoad(),e._startIndex++,Browser.now()-t>e.maxTimeOut)return console.warn("loader callback cost a long time:"+(Browser.now()-t)+" url="+e._loaders[e._startIndex-1].url),void Laya.timer.frameOnce(1,null,e.checkNext);e._loaders.length=0,e._startIndex=0,e._isWorking=!1},e.clearRes=function(t,i){void 0===i&&(i=!1),t=URL.formatURL(t);var s=e.getAtlas(t);if(s){for(var n=0,o=s.length;o>n;n++){var r=s[n],a=e.getRes(r);a&&a.destroy(i),delete e.loadedMap[r]}s.length=0,delete e.atlasMap[t],delete e.loadedMap[t]}else{var h=e.loadedMap[t];h&&(h instanceof laya.resource.Texture&&h.bitmap&&h.destroy(i),delete e.loadedMap[t])}},e.getRes=function(t){return e.loadedMap[URL.formatURL(t)]},e.getAtlas=function(t){return e.atlasMap[URL.formatURL(t)]},e.cacheRes=function(t,i){t=URL.formatURL(t),null!=e.loadedMap[t]?console.warn("Resources already exist,is repeated loading:",t):e.loadedMap[t]=i},e.setGroup=function(t,i){e.groupMap[i]||(e.groupMap[i]=[]),e.groupMap[i].push(t)},e.clearResByGroup=function(t){if(e.groupMap[t]){var i=e.groupMap[t],s=0,n=i.length;for(s=0;n>s;s++)e.clearRes(i[s]);i.length=0}},e.TEXT="text",e.JSON="json",e.XML="xml",e.BUFFER="arraybuffer",e.IMAGE="image",e.SOUND="sound",e.ATLAS="atlas",e.FONT="font",e.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font"},e.parserMap={},e.groupMap={},e.maxTimeOut=100,e.loadedMap={},e.atlasMap={},e._loaders=[],e._isWorking=!1,e._startIndex=0,e}(EventDispatcher),Texture=function(t){function e(t,i){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,e.__super.call(this),t&&t.useNum++,this.setTo(t,i)}__class(e,"laya.resource.Texture",t);var i=e.prototype;return i.setTo=function(t,i){if(this.bitmap=t,this.uv=i||e.DEF_UV,t){this._w=t.width,this._h=t.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=this._w>0;var s=this;if(this._loaded)RunDriver.addToAtlas&&RunDriver.addToAtlas(s);else{var n=t;n instanceof laya.resource.HTMLImage&&n.image&&n.image.addEventListener("load",function(t){RunDriver.addToAtlas&&RunDriver.addToAtlas(s)},!1)}}},i.active=function(){this.bitmap&&this.bitmap.activeResource()},i.destroy=function(t){void 0===t&&(t=!1),this.bitmap&&this.bitmap.useNum>0&&(t?(this.bitmap.dispose(),this.bitmap.useNum=0):(this.bitmap.useNum--,0==this.bitmap.useNum&&this.bitmap.dispose()),this.bitmap=null,this.url&&this===Laya.loader.getRes(this.url)&&Laya.loader.clearRes(this.url,t),this._loaded=!1)},i.load=function(t){var e=this;this._loaded=!1;var i=this.bitmap||(this.bitmap=HTMLImage.create(t));i&&i.useNum++;var s=this;i.onload=function(){i.onload=null,s._loaded=!0,e.sourceWidth=e._w=i.width,e.sourceHeight=e._h=i.height,s.event("loaded",this),RunDriver.addToAtlas&&RunDriver.addToAtlas(s)}},i.addTextureToAtlas=function(t){RunDriver.addTextureToAtlas(this)},i.getPixels=function(t,e,i,s){if(Render.isWebGL)return RunDriver.getTexturePixels(this,t,e,i,s);Browser.canvas.size(i,s),Browser.canvas.clear(),Browser.context.drawTexture(this,-t,-e,this.width,this.height,0,0);var n=Browser.context.getImageData(0,0,i,s);return n.data},i.onAsynLoaded=function(t,e){e&&e.useNum++,this.setTo(e,this.uv)},__getset(0,i,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),__getset(0,i,"loaded",function(){return this._loaded}),__getset(0,i,"released",function(){return this.bitmap?this.bitmap.released:!0}),__getset(0,i,"width",function(){return this._w?this._w:this.uv&&this.uv!==e.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(t){this._w=t,this.sourceWidth||(this.sourceWidth=t)}),__getset(0,i,"repeat",function(){return Render.isWebGL&&this.bitmap?this.bitmap.repeat:!0},function(t){t&&Render.isWebGL&&this.bitmap&&(this.bitmap.repeat=t,t&&(this.bitmap.enableMerageInAtlas=!1))}),__getset(0,i,"height",function(){return this._h?this._h:this.uv&&this.uv!==e.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(t){this._h=t,this.sourceHeight||(this.sourceHeight=t)}),__getset(0,i,"isLinearSampling",function(){return Render.isWebGL?9728!=this.bitmap.minFifter:!0},function(t){!t&&Render.isWebGL&&(t||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),e.moveUV=function(t,e,i){for(var s=0;8>s;s+=2)i[s]+=t,i[s+1]+=e;return i},e.create=function(t,i,s,n,o,r,a,h,l){void 0===r&&(r=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===l&&(l=0);var c=t instanceof laya.resource.Texture,u=c?t.uv:e.DEF_UV,_=c?t.bitmap:t,d=new e(_,null);_.width&&i+n>_.width&&(n=_.width-i),_.height&&s+o>_.height&&(o=_.height-s),d.width=n,d.height=o,d.offsetX=r,d.offsetY=a,d.sourceWidth=h||n,d.sourceHeight=l||o;var f=1/_.width,p=1/_.height;i*=f,s*=p,n*=f,o*=p;var g=d.uv[0],m=d.uv[1],y=d.uv[4],v=d.uv[5],w=y-g,C=v-m,b=e.moveUV(u[0],u[1],[i,s,i+n,s,i+n,s+o,i,s+o]);return d.uv=[g+b[0]*w,m+b[1]*C,y-(1-b[2])*w,m+b[3]*C,y-(1-b[4])*w,v-(1-b[5])*C,g+b[6]*w,v-(1-b[7])*C],d},e.createFromTexture=function(t,i,s,n,o){var r=Rectangle.TEMP.setTo(i-t.offsetX,s-t.offsetY,n,o),a=r.intersection(e._rect1.setTo(0,0,t.width,t.height),e._rect2);if(!a)return null;var h=e.create(t,a.x,a.y,a.width,a.height,a.x-r.x,a.y-r.y,n,o);return h.bitmap.useNum--,h},e.DEF_UV=[0,0,1,0,1,1,0,1],e.INV_UV=[0,1,1,1,1,0,0,0],e._rect1=new Rectangle,e._rect2=new Rectangle,e}(EventDispatcher),AutoBitmap=function(t){function e(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,e.__super.call(this)}__class(e,"laya.ui.AutoBitmap",t);var i=e.prototype;return i.destroy=function(){t.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},i._setChanged=function(){this._isChanged||(this._isChanged=!0,Laya.timer.callLater(this,this.changeSource))},i.changeSource=function(){e.cacheCount++>50&&e.clearCache(),this._isChanged=!1;var t=this._source;if(t&&t.bitmap){var i=this.width,s=this.height,n=this._sizeGrid,o=t.sourceWidth,r=t.sourceHeight;if(!n||o===i&&r===s)this.cleanByTexture(t,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,i,s);else{t.$_GID||(t.$_GID=Utils.getGID());var a=t.$_GID+"."+i+"."+s+"."+n.join(".");if(e.cmdCaches[a])return void(this.cmds=e.cmdCaches[a]);this.clear();var h=n[0],l=n[1],c=n[2],u=n[3],_=n[4],d=!1;if(u+l>i){var f=i;d=!0,i=u+l}d&&(this.save(),this.clipRect(0,0,f,s)),u&&h&&this.drawTexture(e.getTexture(t,0,0,u,h),0,0,u,h),l&&h&&this.drawTexture(e.getTexture(t,o-l,0,l,h),i-l,0,l,h),u&&c&&this.drawTexture(e.getTexture(t,0,r-c,u,c),0,s-c,u,c),l&&c&&this.drawTexture(e.getTexture(t,o-l,r-c,l,c),i-l,s-c,l,c),h&&this.drawBitmap(_,e.getTexture(t,u,0,o-u-l,h),u,0,i-u-l,h),c&&this.drawBitmap(_,e.getTexture(t,u,r-c,o-u-l,c),u,s-c,i-u-l,c),u&&this.drawBitmap(_,e.getTexture(t,0,h,u,r-h-c),0,h,u,s-h-c),l&&this.drawBitmap(_,e.getTexture(t,o-l,h,l,r-h-c),i-l,h,l,s-h-c),this.drawBitmap(_,e.getTexture(t,u,h,o-u-l,r-h-c),u,h,i-u-l,s-h-c),d&&this.restore(),this.autoCacheCmd&&!Render.isConchApp&&(e.cmdCaches[a]=this.cmds)}this._repaint()}},i.drawBitmap=function(t,e,i,s,n,o){void 0===n&&(n=0),void 0===o&&(o=0),.1>n||.1>o||(!t||e.width==n&&e.height==o?this.drawTexture(e,i,s,n,o):this.fillTexture(e,i,s,n,o))},__getset(0,i,"sizeGrid",function(){return this._sizeGrid},function(t){this._sizeGrid=t,this._setChanged()}),__getset(0,i,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(t){this._width!=t&&(this._width=t,this._setChanged())}),__getset(0,i,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(t){this._height!=t&&(this._height=t,this._setChanged())}),__getset(0,i,"source",function(){return this._source},function(t){t?(this._source=t,this._setChanged()):(this._source=null,this.clear())}),e.getTexture=function(t,i,s,n,o){0>=n&&(n=1),0>=o&&(o=1),t.$_GID||(t.$_GID=Utils.getGID());var r=t.$_GID+"."+i+"."+s+"."+n+"."+o,a=e.textureCache[r];return a||(a=e.textureCache[r]=Texture.createFromTexture(t,i,s,n,o)),a},e.clearCache=function(){e.cacheCount=0,e.cmdCaches={},e.textureCache={}},e.setCache=function(t,i){e.cacheCount++,e.textureCache[t]=i},e.getCache=function(t){return e.textureCache[t]},e.cmdCaches={},e.cacheCount=0,e.textureCache={},e}(Graphics),CSSStyle=function(t){function e(t){this._bgground=null,this._border=null,this._rect=null,this.lineHeight=0,e.__super.call(this),this._padding=e._PADDING,this._spacing=e._SPACING,this._aligns=e._ALIGNS,this._font=Font.EMPTY,this._ower=t}__class(e,"laya.display.css.CSSStyle",t);var i=e.prototype;return i.destroy=function(){this._ower=null,this._font=null,this._rect=null},i.inherit=function(t){this._font=t._font,this._spacing=t._spacing===e._SPACING?e._SPACING:t._spacing.slice(),this.lineHeight=t.lineHeight},i._widthAuto=function(){return 0!==(262144&this._type)},i.widthed=function(t){return 0!=(8&this._type)},i._calculation=function(t,e){function i(t,e,i){return t*i[0]+e*i[1]+i[2]}function s(t){var e=o.width,s=n.width;r.width&&(n.width=i(e,s,r.width)),r.height&&(n.height=i(e,s,r.height)),r.left&&(n.x=i(e,s,r.left)),r.top&&(n.y=i(e,s,r.top))}if(e.indexOf("%")<0)return!1;var n=this._ower,o=n.parent,r=this._rect;null===r&&(o._getCSSStyle()._type|=524288,o.on("resize",this,s),this._rect=r={input:{}});var a=e.split(" ");return a[0]=parseFloat(a[0])/100,1==a.length?a[1]=a[2]=0:(a[1]=parseFloat(a[1])/100,a[2]=parseFloat(a[2])),r[t]=a,r.input[t]=e,s(t),!0},i.heighted=function(t){return 0!=(8192&this._type)},i.size=function(t,e){var i=this._ower,s=!1;-1!==t&&t!=this._ower.width&&(this._type|=8,this._ower.width=t,s=!0),-1!==e&&e!=this._ower.height&&(this._type|=8192,this._ower.height=e,s=!0),s&&(i._layoutLater(),524288&this._type&&i.event("resize",this))},i._getAlign=function(){return this._aligns[0]},i._getValign=function(){return this._aligns[1]},i._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},i._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new Font(this._font))},i.render=function(t,e,i,s){var n=t.width,o=t.height;i-=t.pivotX,s-=t.pivotY,this._bgground&&null!=this._bgground.color&&e.ctx.fillRect(i,s,n,o,this._bgground.color),this._border&&this._border.color&&e.drawRect(i,s,n,o,this._border.color.strColor,this._border.size)},i.getCSSStyle=function(){return this},i.cssText=function(t){this.attrs(e.parseOneCSS(t,";"))},i.attrs=function(t){if(t)for(var e=0,i=t.length;i>e;e++){var s=t[e];this[s[0]]=s[1]}},i.setTransform=function(t){"none"===t?this._tf=Style._TF_EMPTY:this.attrs(e.parseOneCSS(t,","))},i.translate=function(t,e){this._tf===Style._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.translateX=t,this._tf.translateY=e},i.scale=function(t,e){this._tf===Style._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.scaleX=t,this._tf.scaleY=e},i._enableLayout=function(){return 0===(2&this._type)&&0===(4&this._type)},__getset(0,i,"block",t.prototype._$get_block,function(t){t?this._type|=1:this._type&=-2}),__getset(0,i,"valign",function(){return e._valigndef[this._aligns[1]]},function(t){this._aligns===e._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=e._valigndef[t]}),__getset(0,i,"height",null,function(t){if(this._type|=8192,"string"==typeof t){if(this._calculation("height",t))return;t=parseInt(t)}this.size(-1,t)}),__getset(0,i,"width",null,function(t){if(this._type|=8,"string"==typeof t){var e=t.indexOf("auto");if(e>=0&&(this._type|=262144,t=t.substr(0,e)),this._calculation("width",t))return;t=parseInt(t)}this.size(t,-1)}),__getset(0,i,"fontWeight",function(){return this._font.weight},function(t){this._createFont().weight=t}),__getset(0,i,"left",null,function(t){var e=this._ower;if("string"==typeof t){if("center"===t?t="50% -50% 0":"right"===t&&(t="100% -100% 0"),this._calculation("left",t))return;t=parseInt(t)}e.x=t}),__getset(0,i,"_translate",null,function(t){this.translate(t[0],t[1])}),__getset(0,i,"absolute",function(){return 0!==(4&this._type)}),__getset(0,i,"top",null,function(t){var e=this._ower;if("string"==typeof t){if("middle"===t?t="50% -50% 0":"bottom"===t&&(t="100% -100% 0"),this._calculation("top",t))return;t=parseInt(t)}e.y=t}),__getset(0,i,"align",function(){return e._aligndef[this._aligns[0]]},function(t){this._aligns===e._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=e._aligndef[t]}),__getset(0,i,"bold",function(){return this._font.bold},function(t){this._createFont().bold=t}),__getset(0,i,"padding",function(){return this._padding},function(t){this._padding=t}),__getset(0,i,"leading",function(){return this._spacing[1]},function(t){"string"==typeof t&&(t=parseInt(t+"")),this._spacing===e._SPACING&&(this._spacing=[0,0]),this._spacing[1]=t}),__getset(0,i,"lineElement",function(){return 0!=(65536&this._type)},function(t){t?this._type|=65536:this._type&=-65537}),__getset(0,i,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(t){this.lineElement=!1,"right"===t?this._type|=32768:this._type&=-32769}),__getset(0,i,"textDecoration",function(){return this._font.decoration},function(t){this._createFont().decoration=t}),__getset(0,i,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(t){"nowrap"===t&&(this._type|=131072),"none"===t&&(this._type&=-131073)}),__getset(0,i,"background",null,function(t){return t?(this._bgground||(this._bgground={}),this._bgground.color=t,this._ower.conchModel&&this._ower.conchModel.bgColor(t),this._type|=16384,void(this._ower._renderType|=256)):void(this._bgground=null)}),__getset(0,i,"wordWrap",function(){return 0===(131072&this._type)},function(t){t?this._type&=-131073:this._type|=131072}),__getset(0,i,"color",function(){return this._font.color},function(t){this._createFont().color=t}),__getset(0,i,"password",function(){return this._font.password},function(t){this._createFont().password=t}),__getset(0,i,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(t){"none"===t?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=t),this._ower.conchModel&&this._ower.conchModel.bgColor(t),this._ower._renderType|=256}),__getset(0,i,"font",function(){return this._font.toString()},function(t){this._createFont().set(t)}),__getset(0,i,"weight",null,function(t){this._createFont().weight=t}),__getset(0,i,"letterSpacing",function(){return this._spacing[0]},function(t){"string"==typeof t&&(t=parseInt(t+"")),this._spacing===e._SPACING&&(this._spacing=[0,0]),this._spacing[0]=t}),__getset(0,i,"fontSize",function(){return this._font.size},function(t){this._createFont().size=t}),__getset(0,i,"italic",function(){return this._font.italic},function(t){this._createFont().italic=t}),__getset(0,i,"fontFamily",function(){return this._font.family},function(t){this._createFont().family=t}),__getset(0,i,"stroke",function(){return this._font.stroke[0]},function(t){this._createFont().stroke===Font._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=t}),__getset(0,i,"strokeColor",function(){return this._font.stroke[1]},function(t){this._createFont().stroke===Font._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=t}),__getset(0,i,"border",function(){return this._border?this._border.value:""},function(t){if("none"==t)return void(this._border=null);this._border||(this._border={}),this._border.value=t;var e=t.split(" ");if(this._border.color=Color.create(e[e.length-1]),1==e.length)return this._border.size=1,void(this._border.type="solid");var i=0;e[0].indexOf("px")>0?(this._border.size=parseInt(e[0]),i++):this._border.size=1,this._border.type=e[i],this._ower._renderType|=256}),__getset(0,i,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(t){return t?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==t?null:Color.create(t),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),void(this._ower._renderType|=256)):void(this._border=null)}),__getset(0,i,"position",function(){return 4&this._type?"absolute":""},function(t){"absolute"==t?this._type|=4:this._type&=-5}),__getset(0,i,"display",null,function(t){switch(t){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),__getset(0,i,"paddingLeft",function(){return this.padding[3]}),__getset(0,i,"paddingTop",function(){return this.padding[0]}),__getset(0,i,"_scale",null,function(t){this._ower.scale(t[0],t[1])}),__getset(0,i,"_rotate",null,function(t){this._ower.rotation=t}),e.parseOneCSS=function(t,i){for(var s,n=[],o=t.split(i),r=0,a=o.length;a>r;r++){var h=o[r],l=h.indexOf(":"),c=h.substr(0,l).replace(/^\s+|\s+$/g,"");if(0!=c.length){var u=h.substr(l+1).replace(/^\s+|\s+$/g,""),_=[c,u];switch(c){case"italic":case"bold":_[1]="true"==u;break;case"line-height":_[0]="lineHeight",_[1]=parseInt(u);break;case"font-size":_[0]="fontSize",_[1]=parseInt(u);break;case"padding":s=u.split(" "),s.length>1||(s[1]=s[2]=s[3]=s[0]),_[1]=[parseInt(s[0]),parseInt(s[1]),parseInt(s[2]),parseInt(s[3])];break;case"rotate":_[0]="_rotate",_[1]=parseFloat(u);break;case"scale":s=u.split(" "),_[0]="_scale",_[1]=[parseFloat(s[0]),parseFloat(s[1])];break;case"translate":s=u.split(" "),_[0]="_translate",_[1]=[parseInt(s[0]),parseInt(s[1])];break;default:(_[0]=e._CSSTOVALUE[c])||(_[0]=c)}n.push(_)}}return n},e.parseCSS=function(t,i){for(var s;null!=(s=e._parseCSSRegExp.exec(t));)e.styleSheets[s[1]]=e.parseOneCSS(s[2],";")},e.EMPTY=new e(null),e._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor","float":"cssFloat"},e._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),e._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},e._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},e.styleSheets={},e.ALIGN_CENTER=1,e.ALIGN_RIGHT=2,e.VALIGN_MIDDLE=1,e.VALIGN_BOTTOM=2,e._CSS_BLOCK=1,e._DISPLAY_NONE=2,e._ABSOLUTE=4,e._WIDTH_SET=8,e._PADDING=[0,0,0,0],e._RECT=[-1,-1,-1,-1],e._SPACING=[0,0],e._ALIGNS=[0,0,0],e.ADDLAYOUTED=512,e._NEWFONT=4096,e._HEIGHT_SET=8192,e._BACKGROUND_SET=16384,e._FLOAT_RIGHT=32768,e._LINE_ELEMENT=65536,e._NOWARP=131072,e._WIDTHAUTO=262144,e._LISTERRESZIE=524288,e}(Style),ColorFilter=function(t){function e(t){e.__super.call(this),t||(t=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var i=0,s=0,n=0;20>n;n++)n%5!=4?this._mat[i++]=t[n]:this._alpha[s++]=t[n];this._action=RunDriver.createFilterAction(32),this._action.data=this}__class(e,"laya.filters.ColorFilter",t);var i=e.prototype;return Laya.imps(i,{"laya.filters.IFilter":!0}),i.callNative=function(t){t._$P.cf=this;t.conchModel&&t.conchModel.setFilterMatrix&&t.conchModel.setFilterMatrix(this._mat,this._alpha)},__getset(0,i,"type",function(){return 32}),__getset(0,i,"action",function(){return this._action}),e}(Filter),UIEvent=function(t){function e(){e.__super.call(this)}return __class(e,"laya.ui.UIEvent",t),e.SHOW_TIP="showtip",e.HIDE_TIP="hidetip",e}(Event),Sprite=function(t){function e(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,e.__super.call(this),this._style=Style.EMPTY}__class(e,"laya.display.Sprite",t);var i=e.prototype;return Laya.imps(i,{"laya.display.ILayout":!0}),i.createConchModel=function(){return new ConchNode},i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._style&&this._style.destroy(),this._transform=null,this._style=null,this._graphics=null},i.updateZOrder=function(){Utils.updateOrder(this._childs)&&this.repaint()},i.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},i.setBounds=function(t){this._set$P("uBounds",t)},i.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new Rectangle),Rectangle._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},i.getSelfBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new Rectangle),Rectangle._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds)},i._boundPointsToParent=function(t){void 0===t&&(t=!1);var e=0,i=0;this._style&&(e=this._style._tf.translateX,i=this._style._tf.translateY,t=t||0!==this._style._tf.rotate,this._style.scrollRect&&(e+=this._style.scrollRect.x,i+=this._style.scrollRect.y));var s=this._getBoundPointsM(t);if(!s||s.length<1)return s;if(8!=s.length&&(s=t?GrahamScan.scanPList(s):Rectangle._getWrapRec(s,Rectangle.TEMP)._getBoundPoints()),!this.transform)return Utils.transPointList(s,this._x-e,this._y-i),s;var n=Point.TEMP,o=0,r=s.length;for(o=0;r>o;o+=2)n.x=s[o],n.y=s[o+1],this.toParentPoint(n),s[o]=n.x,s[o+1]=n.y;return s},i.getGraphicBounds=function(t){return void 0===t&&(t=!1),this._graphics?this._graphics.getBounds(t):Rectangle.TEMP.setTo(0,0,0,0)},i._getBoundPointsM=function(t){if(void 0===t&&(t=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var e=Utils.clearArray(this._$P.temBM),i=Rectangle.TEMP;return i.copyFrom(this.scrollRect),Utils.concatArray(e,i._getBoundPoints()),e}var s,n,o,r=this._graphics?this._graphics.getBoundPoints():Utils.clearArray(this._$P.temBM);o=this._childs;for(var a=0,h=o.length;h>a;a++)s=o[a],s instanceof laya.display.Sprite&&1==s.visible&&(n=s._boundPointsToParent(t),n&&(r=r?Utils.concatArray(r,n):n));return r},i.getStyle=function(){return this._style===Style.EMPTY&&(this._style=new Style),this._style},i.setStyle=function(t){this._style=t},i._adjustTransform=function(){"use strict";this._tfChanged=!1;var t,e=this._style,i=e._tf,s=i.scaleX,n=i.scaleY;if(i.rotate||1!==s||1!==n||i.skewX||i.skewY){t=this._transform||(this._transform=Matrix.create()),t.bTransform=!0;var o=.0174532922222222*(i.rotate-i.skewX),r=.0174532922222222*(i.rotate+i.skewY),a=Math.cos(r),h=Math.sin(r),l=Math.sin(o),c=Math.cos(o);return t.a=s*a,t.b=s*h,t.c=-n*l,t.d=n*c,t.tx=t.ty=0,t}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,t},i.pos=function(t,e,i){if(void 0===i&&(i=!1),this._x!==t||this._y!==e){if(this.destroyed)return this;if(i){this._x=t,this._y=e,this.conchModel&&this.conchModel.pos(this._x,this._y);var s=this._parent;s&&0===s._repaint&&(s._repaint=1,s.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=t,this.y=e}return this},i.pivot=function(t,e){return this.pivotX=t,this.pivotY=e,this},i.size=function(t,e){return this.width=t,this.height=e,this},i.scale=function(t,e,i){void 0===i&&(i=!1);var s=this.getStyle(),n=s._tf;if(n.scaleX!=t||n.scaleY!=e){if(this.destroyed)return this;if(i){s.setScale(t,e),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(t,e),this._renderType|=4;var o=this._parent;o&&0===o._repaint&&(o._repaint=1,o.parentRepaint())}else this.scaleX=t,this.scaleY=e}return this},i.skew=function(t,e){return this.skewX=t,this.skewY=e,this},i.render=function(t,e,i){Stat.spriteCount++,RenderSprite.renders[this._renderType]._fun(this,t,e+this._x,i+this._y),this._repaint=0},i.drawToCanvas=function(t,e,i,s){if(Render.isConchNode){var n=HTMLCanvas.create("2D"),o=new RenderContext(t,e,n);return o.ctx.setCanvasType(1),this.conchModel.drawToCanvas(n.source,i,s),n}return RunDriver.drawToCanvas(this,this._renderType,t,e,i,s)},i.customRender=function(t,e,i){this._renderType|=1024},i._applyFilters=function(){if(!Render.isWebGL){var t;if(t=this._$P.filters,t&&!(t.length<1))for(var e=0,i=t.length;i>e;e++)t[e].action.apply(this._$P.cacheCanvas)}},i._isHaveGlowFilter=function(){var t=0,e=0;if(this.filters)for(t=0;t<this.filters.length;t++)if(8==this.filters[t].type)return!0;for(t=0,e=this._childs.length;e>t;t++)if(this._childs[t]._isHaveGlowFilter())return!0;return!1},i.localToGlobal=function(t,e){void 0===e&&(e=!1),e===!0&&(t=new Point(t.x,t.y));for(var i=this;i&&i!=Laya.stage;)t=i.toParentPoint(t),i=i.parent;return t},i.globalToLocal=function(t,e){void 0===e&&(e=!1),e&&(t=new Point(t.x,t.y));for(var i=this,s=[];i&&i!=Laya.stage;)s.push(i),i=i.parent;for(var n=s.length-1;n>=0;)i=s[n],t=i.fromParentPoint(t),n--;return t},i.toParentPoint=function(t){if(!t)return t;t.x-=this.pivotX,t.y-=this.pivotY,this.transform&&this._transform.transformPoint(t),t.x+=this._x,t.y+=this._y;var e=this._style.scrollRect;return e&&(t.x-=e.x,t.y-=e.y),t},i.fromParentPoint=function(t){if(!t)return t;t.x-=this._x,t.y-=this._y;var e=this._style.scrollRect;return e&&(t.x+=e.x,t.y+=e.y),this.transform&&this._transform.invertTransformPoint(t),t.x+=this.pivotX,t.y+=this.pivotY,t},i.on=function(e,i,s,n){return 1!==this._mouseEnableState&&this.isMouseEvent(e)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(e,i,s,n,!1)):t.prototype.on.call(this,e,i,s,n)},i.once=function(e,i,s,n){return 1!==this._mouseEnableState&&this.isMouseEvent(e)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(e,i,s,n,!0)):t.prototype.once.call(this,e,i,s,n)},i._$2__onDisplay=function(){if(1!==this._mouseEnableState){var t=this;for(t=t.parent;t&&1!==t._mouseEnableState&&!t._getBit(2);)t.mouseEnabled=!0,t._setBit(2,!0),t=t.parent}},i.loadImage=function(t,e,i,s,n,o){function r(t){a.destroyed||(a.size(e+(s||t.width),i+(n||t.height)),a.repaint(),o&&o.runWith(t))}var a=this;return void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=0),this.graphics.loadImage(t,e,i,s,n,r),this},i.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},i._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},i._childChanged=function(t){this._childs.length?this._renderType|=2048:this._renderType&=-2049,t&&this._get$P("hasZorder")&&Laya.timer.callLater(this,this.updateZOrder),this.repaint()},i.parentRepaint=function(){var t=this._parent;t&&0===t._repaint&&(t._repaint=1,t.parentRepaint())},i.startDrag=function(t,e,i,s,n,o,r){void 0===e&&(e=!1),void 0===i&&(i=0),void 0===s&&(s=300),void 0===o&&(o=!1),void 0===r&&(r=.92),this._$P.dragging||this._set$P("dragging",new Dragging),this._$P.dragging.start(this,t,e,i,s,n,o,r)},i.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},i._setDisplay=function(e){if(!e){var i=this._$P.cacheCanvas;i&&i.ctx&&(Pool.recover("RenderContext",i.ctx),i.ctx.canvas.size(0,0),i.ctx=null);var s=this._$P._filterCache;s&&(s.destroy(),s.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1)}t.prototype._setDisplay.call(this,e)},i.hitTestPoint=function(t,e){var i=this.globalToLocal(Point.TEMP.setTo(t,e)),s=this._$P.hitArea?this._$P.hitArea:Rectangle.TEMP.setTo(0,0,this._width,this._height);return s.contains(i.x,i.y)},
i.getMousePoint=function(){return this.globalToLocal(Point.TEMP.setTo(Laya.stage.mouseX,Laya.stage.mouseY))},i._getWords=function(){return null},i._addChildsToLayout=function(t){var e=this._getWords();if(null==e&&0==this._childs.length)return!1;if(e)for(var i=0,s=e.length;s>i;i++)t.push(e[i]);return this._childs.forEach(function(e,i,s){e._style._enableLayout()&&e._addToLayout(t)}),!0},i._addToLayout=function(t){this._style.absolute||(this._style.block?t.push(this):this._addChildsToLayout(t)&&(this.x=this.y=0))},i._isChar=function(){return!1},i._getCSSStyle=function(){return this._style.getCSSStyle()},i._setAttributes=function(t,e){switch(t){case"x":this.x=parseFloat(e);break;case"y":this.y=parseFloat(e);break;case"width":this.width=parseFloat(e);break;case"height":this.height=parseFloat(e);break;default:this[t]=e}},i._layoutLater=function(){this.parent&&this.parent._layoutLater()},__getset(0,i,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(t){this._optimizeScrollRect!=t&&(this._optimizeScrollRect=t,this.conchModel&&this.conchModel.optimizeScrollRect(t))}),__getset(0,i,"customRenderEnable",null,function(t){if(t&&(this._renderType|=1024,Render.isConchNode)){e.CustomList.push(this);var i=new HTMLCanvas("2d");i._setContext(new CanvasRenderingContext2D),this.customContext=new RenderContext(0,0,i),i.context.setCanvasType&&i.context.setCanvasType(2),this.conchModel.custom(i.context)}}),__getset(0,i,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(t){this.cacheAs=t?this._$P.hasFilter?"none":"normal":"none"}),__getset(0,i,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(t){var e=this._$P.cacheCanvas;t!==(e?e.type:"none")&&("none"!==t?(this._getBit(1)||this._setUpNoticeType(1),e||(e=this._set$P("cacheCanvas",Pool.getItemByClass("cacheCanvas",Object))),e.type=t,e.reCache=!0,this._renderType|=16,"bitmap"==t&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1)):this._$P.hasFilter?this._set$P("cacheForFilters",!0):(e&&Pool.recover("cacheCanvas",e),this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)),this.repaint())}),__getset(0,i,"zOrder",function(){return this._zOrder},function(t){this._zOrder!=t&&(this._zOrder=t,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(t),this._parent&&(t&&this._parent._set$P("hasZorder",!0),Laya.timer.callLater(this._parent,this.updateZOrder)))}),__getset(0,i,"rotation",function(){return this._style._tf.rotate},function(t){var e=this.getStyle();if(e._tf.rotate!==t){e.setRotate(t),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(t),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),__getset(0,i,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(t){this._width!==t&&(this._width=t,this.conchModel&&this.conchModel.size(t,this._height),this.repaint())}),__getset(0,i,"x",function(){return this._x},function(t){if(this._x!==t){if(this.destroyed)return;this._x=t,this.conchModel&&this.conchModel.pos(t,this._y);var e=this._parent;e&&0===e._repaint&&(e._repaint=1,e.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),__getset(0,i,"globalScaleY",function(){for(var t=1,e=this;e&&e!==Laya.stage;)t*=e.scaleX,e=e.parent;return t}),__getset(0,i,"hitArea",function(){return this._$P.hitArea},function(t){this._set$P("hitArea",t)}),__getset(0,i,"staticCache",function(){return this._$P.staticCache},function(t){this._set$P("staticCache",t),t||this.reCache()}),__getset(0,i,"texture",function(){return this._texture},function(t){this._texture!=t&&(this._texture=t,this.graphics.cleanByTexture(t,0,0))}),__getset(0,i,"y",function(){return this._y},function(t){if(this._y!==t){if(this.destroyed)return;this._y=t,this.conchModel&&this.conchModel.pos(this._x,t);var e=this._parent;e&&0===e._repaint&&(e._repaint=1,e.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),__getset(0,i,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(t){this._height!==t&&(this._height=t,this.conchModel&&this.conchModel.size(this._width,t),this.repaint())}),__getset(0,i,"blendMode",function(){return this._style.blendMode},function(t){this.getStyle().blendMode=t,this.conchModel&&this.conchModel.blendMode(t),t&&"source-over"!=t?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),__getset(0,i,"scaleX",function(){return this._style._tf.scaleX},function(t){var e=this.getStyle();if(e._tf.scaleX!==t){e.setScaleX(t),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(t,e._tf.scaleY),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),__getset(0,i,"scaleY",function(){return this._style._tf.scaleY},function(t){var e=this.getStyle();if(e._tf.scaleY!==t){e.setScaleY(t),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(e._tf.scaleX,t),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),__getset(0,i,"stage",function(){return Laya.stage}),__getset(0,i,"skewX",function(){return this._style._tf.skewX},function(t){var e=this.getStyle();if(e._tf.skewX!==t){e.setSkewX(t),this._tfChanged=!0,this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),__getset(0,i,"scrollRect",function(){return this._style.scrollRect},function(t){this.getStyle().scrollRect=t,this.repaint(),t?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(t.x,t.y,t.width,t.height)):(this._renderType&=-129,this.conchModel&&(e.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),__getset(0,i,"skewY",function(){return this._style._tf.skewY},function(t){var e=this.getStyle();if(e._tf.skewY!==t){e.setSkewY(t),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(e._tf.skewX,t),this._renderType|=4;var i=this._parent;i&&0===i._repaint&&(i._repaint=1,i.parentRepaint())}}),__getset(0,i,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(t){this._tfChanged=!1,this._transform=t,t&&(this._x=t.tx,this._y=t.ty,t.tx=t.ty=0,this.conchModel&&this.conchModel.transform(t.a,t.b,t.c,t.d,this._x,this._y)),t?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),__getset(0,i,"pivotX",function(){return this._style._tf.translateX},function(t){this.getStyle().setTranslateX(t),this.conchModel&&this.conchModel.pivot(t,this._style._tf.translateY),this.repaint()}),__getset(0,i,"pivotY",function(){return this._style._tf.translateY},function(t){this.getStyle().setTranslateY(t),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,t),this.repaint()}),__getset(0,i,"alpha",function(){return this._style.alpha},function(t){this._style&&this._style.alpha!==t&&(t=0>t?0:t>1?1:t,this.getStyle().alpha=t,this.conchModel&&this.conchModel.alpha(t),1!==t?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),__getset(0,i,"visible",function(){return this._style.visible},function(t){this._style&&this._style.visible!==t&&(this.getStyle().visible=t,this.conchModel&&this.conchModel.visible(t),this.parentRepaint())}),__getset(0,i,"graphics",function(){return this._graphics||(this.graphics=RunDriver.createGraphics())},function(t){this._graphics&&(this._graphics._sp=null),this._graphics=t,t?(this._renderType&=-2,this._renderType|=512,t._sp=this,this.conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(e.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),__getset(0,i,"filters",function(){return this._$P.filters},function(t){t&&0===t.length&&(t=null),this._$P.filters!=t&&(this._set$P("filters",t?t.slice():null),Render.isConchApp&&(this.conchModel&&(e.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),Render.isWebGL&&(t&&t.length?this._renderType|=32:this._renderType&=-33),t&&t.length>0?(this._getBit(1)||this._setUpNoticeType(1),Render.isWebGL&&1==t.length&&t[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(Render.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),__getset(0,i,"parent",t.prototype._$get_parent,function(e){t.prototype._$set_parent.call(this,e),e&&this._getBit(2)&&this._$2__onDisplay()}),__getset(0,i,"mask",function(){return this._$P._mask},function(t){t&&this.mask&&this.mask._$P.maskParent||(t?(this.cacheAs="bitmap",this._set$P("_mask",t),t._set$P("maskParent",this)):(this.cacheAs="none",this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",t)),this.conchModel&&this.conchModel.mask(t?t.conchModel:null),this._renderType|=64,this.parentRepaint())}),__getset(0,i,"mouseEnabled",function(){return this._mouseEnableState>1},function(t){this._mouseEnableState=t?2:1}),__getset(0,i,"globalScaleX",function(){for(var t=1,e=this;e&&e!==Laya.stage;)t*=e.scaleX,e=e.parent;return t}),__getset(0,i,"mouseX",function(){return this.getMousePoint().x}),__getset(0,i,"mouseY",function(){return this.getMousePoint().y}),e.fromImage=function(t){return(new e).loadImage(t)},e.CustomList=[],__static(e,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=window.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),e}(Node),Bitmap=function(t){function e(){this.useNum=0,e.__super.call(this),this._w=0,this._h=0}__class(e,"laya.resource.Bitmap",t);var i=e.prototype;return i.dispose=function(){this._resourceManager.removeResource(this),t.prototype.dispose.call(this)},__getset(0,i,"width",function(){return this._w}),__getset(0,i,"height",function(){return this._h}),__getset(0,i,"source",function(){return this._source}),e}(Resource),LoaderHook=function(t){function e(){e.__super.call(this)}__class(e,"laya.debug.tools.enginehook.LoaderHook",t);var i=e.prototype;return i.checkUrls=function(t){var i;i="string"==typeof t?t:t.url,e.preFails[i]&&e.enableFailDebugger},i.chekUrlList=function(t){var e=0,i=0;for(i=t.length,e=0;i>e;e++)this.checkUrls(t[e])},i.load=function(e,i,s,n,o,r,a,h){return void 0===o&&(o=1),void 0===r&&(r=!0),void 0===h&&(h=!1),e instanceof Array?this.chekUrlList(e):this.checkUrls(e),t.prototype.load.call(this,e,i,s,n,o,r,a,h)},e.init=function(){e.isInited||(e.isInited=!0,Laya.loader=new e,Laya.loader.on("error",null,e.onFail),e.preFails=LocalStorage.getJSON("LoadFailItems"),e.preFails||(e.preFails={}))},e.onFail=function(t){OutPutView.I.dTrace("LoadFail:"+t),e.nowFails[t]=!0,LocalStorage.setJSON("LoadFailItems",e.nowFails)},e.resetFails=function(){e.nowFails={},LocalStorage.setJSON("LoadFailItems",e.nowFails)},e.preFails={},e.nowFails={},e.enableFailDebugger=!0,e.FailSign="LoadFailItems",e.isInited=!1,e}(LoaderManager),AudioSoundChannel=function(t){function e(t){this._audio=null,this._onEnd=null,this._resumePlay=null,e.__super.call(this),this._onEnd=Utils.bind(this.__onEnd,this),this._resumePlay=Utils.bind(this.__resumePlay,this),t.addEventListener("ended",this._onEnd),this._audio=t}__class(e,"laya.media.h5audio.AudioSoundChannel",t);var i=e.prototype;return i.__onEnd=function(){return 1==this.loops?(this.completeHandler&&(Laya.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete")):(this.loops>0&&this.loops--,void this.play())},i.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,Browser.container.appendChild(this._audio),this._audio.play()}catch(t){this.event("error")}},i.play=function(){this.isStopped=!1;try{this._audio.playbackRate=SoundManager.playbackRate,this._audio.currentTime=this.startTime}catch(t){return void this._audio.addEventListener("canplay",this._resumePlay)}SoundManager.addChannel(this),Browser.container.appendChild(this._audio),"play"in this._audio&&this._audio.play()},i.stop=function(){this.isStopped=!0,SoundManager.removeChannel(this),this.completeHandler=null,this._audio&&("pause"in this._audio&&Render.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),Browser.onIE||Pool.recover("audio:"+this.url,this._audio),Browser.removeElement(this._audio),this._audio=null)},i.pause=function(){this.isStopped=!0,SoundManager.removeChannel(this),"pause"in this._audio&&this._audio.pause()},i.resume=function(){this._audio&&(this.isStopped=!1,SoundManager.addChannel(this),"play"in this._audio&&this._audio.play())},__getset(0,i,"position",function(){return this._audio?this._audio.currentTime:0}),__getset(0,i,"duration",function(){return this._audio?this._audio.duration:0}),__getset(0,i,"volume",function(){return this._audio?this._audio.volume:1},function(t){this._audio&&(this._audio.volume=t)}),e}(SoundChannel),WebAudioSoundChannel=function(t){function e(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=WebAudioSound.ctx,e.__super.call(this),this._onPlayEnd=Utils.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}__class(e,"laya.media.webaudio.WebAudioSoundChannel",t);var i=e.prototype;return i.play=function(){if(SoundManager.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var t=this.context,e=this.gain,i=t.createBufferSource();this.bufferSource=i,i.buffer=this.audioBuffer,i.connect(e),e&&e.disconnect(),e.connect(t.destination),i.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=Browser.now(),this.gain.gain.value=this._volume,0==this.loops&&(i.loop=!0),i.playbackRate.value=SoundManager.playbackRate,i.start(0,this.startTime),this._currentTime=0}},i.__onPlayEnd=function(){return 1==this.loops?(this.completeHandler&&(Laya.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete")):(this.loops>0&&this.loops--,void this.play())},i._clearBufferSource=function(){if(this.bufferSource){var t=this.bufferSource;t.stop?t.stop(0):t.noteOff(0),t.disconnect(0),t.onended=null,e._tryCleanFailed||this._tryClearBuffer(t),this.bufferSource=null}},i._tryClearBuffer=function(t){if(!Browser.onIOS)return void(e._tryCleanFailed=!0);try{t.buffer=WebAudioSound._miniBuffer}catch(i){e._tryCleanFailed=!0}},i.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,SoundManager.removeChannel(this),this.completeHandler=null},i.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,SoundManager.removeChannel(this)},i.resume=function(){this.startTime=this._pauseTime,this.play()},__getset(0,i,"position",function(){return this.bufferSource?(Browser.now()-this._startTime)/1e3+this.startTime:0}),__getset(0,i,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),__getset(0,i,"volume",function(){return this._volume},function(t){this.isStopped||(this._volume=t,this.gain.gain.value=t)}),e._tryCleanFailed=!1,e}(SoundChannel),Component=function(t){function e(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,e.__super.call(this),this._layout=LayoutStyle.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}__class(e,"laya.ui.Component",t);var i=e.prototype;return Laya.imps(i,{"laya.ui.IComponent":!0}),i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},i.preinitialize=function(){},i.createChildren=function(){},i.initialize=function(){},i.callLater=function(t,e){Laya.timer.callLater(this,t,e)},i.runCallLater=function(t){Laya.timer.runCallLater(this,t)},i.commitMeasure=function(){},i.changeSize=function(){this.event("resize")},i.getLayout=function(){return this._layout===LayoutStyle.EMPTY&&(this._layout=new LayoutStyle),this._layout},i._setLayoutEnabled=function(t){this._layout&&this._layout.enable!=t&&(this._layout.enable=t,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},i.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},i.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},i.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},i.resetLayoutX=function(){var t=this._layout;if(isNaN(t.anchorX)||(this.pivotX=t.anchorX*this.width),this.layoutEnabled){var e=this.parent;e&&(isNaN(t.centerX)?isNaN(t.left)?isNaN(t.right)||(this.x=Math.round(e.width-this.displayWidth-t.right+this.pivotX*this.scaleX)):(this.x=Math.round(t.left+this.pivotX*this.scaleX),isNaN(t.right)||(this.width=(e._width-t.left-t.right)/(this.scaleX||.01))):this.x=Math.round(.5*(e.width-this.displayWidth)+t.centerX+this.pivotX*this.scaleX))}},i.resetLayoutY=function(){var t=this._layout;if(isNaN(t.anchorY)||(this.pivotY=t.anchorY*this.height),this.layoutEnabled){var e=this.parent;e&&(isNaN(t.centerY)?isNaN(t.top)?isNaN(t.bottom)||(this.y=Math.round(e.height-this.displayHeight-t.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(t.top+this.pivotY*this.scaleY),isNaN(t.bottom)||(this.height=(e._height-t.top-t.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(e.height-this.displayHeight)+t.centerY+this.pivotY*this.scaleY))}},i.onMouseOver=function(t){Laya.stage.event("showtip",this._toolTip)},i.onMouseOut=function(t){Laya.stage.event("hidetip",this._toolTip)},__getset(0,i,"displayWidth",function(){return this.width*this.scaleX}),__getset(0,i,"width",function(){return this._width?this._width:this.measureWidth},function(t){this._width!=t&&(this._width=t,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),__getset(0,i,"measureWidth",function(){var t=0;this.commitMeasure();for(var e=this.numChildren-1;e>-1;e--){var i=this.getChildAt(e);i.visible&&(t=Math.max(i.x+i.width*i.scaleX,t))}return t}),__getset(0,i,"displayHeight",function(){return this.height*this.scaleY}),__getset(0,i,"height",function(){return this._height?this._height:this.measureHeight},function(t){this._height!=t&&(this._height=t,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),__getset(0,i,"dataSource",function(){return this._dataSource},function(t){this._dataSource=t;for(var e in this._dataSource)this.hasOwnProperty(e)&&"function"!=typeof this[e]&&(this[e]=this._dataSource[e])}),__getset(0,i,"scaleY",t.prototype._$get_scaleY,function(e){t.prototype._$get_scaleY.call(this)!=e&&(t.prototype._$set_scaleY.call(this,e),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),__getset(0,i,"measureHeight",function(){var t=0;this.commitMeasure();for(var e=this.numChildren-1;e>-1;e--){var i=this.getChildAt(e);i.visible&&(t=Math.max(i.y+i.height*i.scaleY,t))}return t}),__getset(0,i,"scaleX",t.prototype._$get_scaleX,function(e){t.prototype._$get_scaleX.call(this)!=e&&(t.prototype._$set_scaleX.call(this,e),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),__getset(0,i,"top",function(){return this._layout.top},function(t){t!=this._layout.top&&(this.getLayout().top=t,this._setLayoutEnabled(!0)),this.resetLayoutY()}),__getset(0,i,"bottom",function(){return this._layout.bottom},function(t){t!=this._layout.bottom&&(this.getLayout().bottom=t,this._setLayoutEnabled(!0)),this.resetLayoutY()}),__getset(0,i,"left",function(){return this._layout.left},function(t){t!=this._layout.left&&(this.getLayout().left=t,this._setLayoutEnabled(!0)),this.resetLayoutX()}),__getset(0,i,"right",function(){return this._layout.right},function(t){t!=this._layout.right&&(this.getLayout().right=t,this._setLayoutEnabled(!0)),this.resetLayoutX()}),__getset(0,i,"centerX",function(){return this._layout.centerX},function(t){t!=this._layout.centerX&&(this.getLayout().centerX=t,this._setLayoutEnabled(!0)),this.resetLayoutX()}),__getset(0,i,"centerY",function(){return this._layout.centerY},function(t){t!=this._layout.centerY&&(this.getLayout().centerY=t,this._setLayoutEnabled(!0)),this.resetLayoutY()}),__getset(0,i,"anchorX",function(){return this._layout.anchorX},function(t){t!=this._layout.anchorX&&(this.getLayout().anchorX=t,this._setLayoutEnabled(!0)),this.resetLayoutX()}),__getset(0,i,"anchorY",function(){return this._layout.anchorY},function(t){t!=this._layout.anchorY&&(this.getLayout().anchorY=t,this._setLayoutEnabled(!0)),this.resetLayoutY()}),__getset(0,i,"tag",function(){return this._tag},function(t){this._tag=t}),__getset(0,i,"toolTip",function(){return this._toolTip},function(t){this._toolTip!=t&&(this._toolTip=t,null!=t?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),__getset(0,i,"comXml",function(){return this._comXml},function(t){this._comXml=t}),__getset(0,i,"gray",function(){return this._gray},function(t){t!==this._gray&&(this._gray=t,UIUtils.gray(this,t))}),__getset(0,i,"disabled",function(){return this._disabled},function(t){t!==this._disabled&&(this.gray=this._disabled=t,this.mouseEnabled=!t)}),e}(Sprite),ArrowLine=function(t){function e(t){this.lineLen=160,this.arrowLen=10,this.sign="Y",this._targetChanger=null,this._isMoving=!1,this.lenControl=new Rect,this.rotationControl=new Rect,this.lenChanger=ValueChanger.create(this,"lineLen"),this.lenControlXChanger=ValueChanger.create(this.lenControl,"x"),void 0===t&&(t="X"),e.__super.call(this),this.sign=t,this.addChild(this.lenControl),this.addChild(this.rotationControl),this.lenControl.on("mousedown",this,this.controlMouseDown),this.drawMe()}__class(e,"laya.debug.tools.comps.ArrowLine",t);var i=e.prototype;return i.drawMe=function(){var t;t=this.graphics,t.clear(),t.drawLine(0,0,this.lineLen,0,"#ffff00"),t.drawLine(this.lineLen,0,this.lineLen-this.arrowLen,-this.arrowLen,"#ff0000"),t.drawLine(this.lineLen,0,this.lineLen-this.arrowLen,this.arrowLen,"#ff0000"),t.fillText(this.sign,50,-5,"","#ff0000","left"),this._isMoving&&this._targetChanger&&t.fillText(this._targetChanger.key+":"+this._targetChanger.value.toFixed(2),this.lineLen-15,-25,"","#ffff00","center"),this.lenControl.posTo(this.lineLen-15,0),this.rotationControl.posTo(this.lineLen+10,0),this.size(this.arrowLen,this.lineLen)},i.clearMoveEvents=function(){Laya.stage.off("mousemove",this,this.stageMouseMove),Laya.stage.off("mouseup",this,this.stageMouseUp)},i.controlMouseDown=function(t){this.clearMoveEvents(),this.lenControlXChanger.record(),this.lenChanger.record(),this.targetChanger&&this.targetChanger.record(),this._isMoving=!0,Laya.stage.on("mousemove",this,this.stageMouseMove),Laya.stage.on("mouseup",this,this.stageMouseUp)},i.stageMouseMove=function(t){this.lenControlXChanger.value=this.mouseX,this.lenChanger.showValueByScale(this.lenControlXChanger.scaleValue),this.targetChanger&&this.targetChanger.showValueByScale(this.lenControlXChanger.scaleValue),this.drawMe()},i.stageMouseUp=function(t){this._isMoving=!1,this.noticeChange(),this.clearMoveEvents(),this.lenControlXChanger.recover(),this.lenChanger.recover(),this.drawMe()},i.noticeChange=function(){var t=NaN;t=this.lenChanger.dValue,console.log("lenChange:",t)},__getset(0,i,"targetChanger",function(){return this._targetChanger},function(t){this._targetChanger&&this._targetChanger.dispose(),this._targetChanger=t}),e}(Sprite),Axis=function(t){function e(){this._target=null,this._lenType=[["width","height"],["scaleX","scaleY"]],this._type=1,this.xAxis=new ArrowLine("X"),this.yAxis=new ArrowLine("Y"),this.controlBox=new Rect,this._point=new Point,this.oPoint=new Point,this.myRotationChanger=ValueChanger.create(this,"rotation"),this.targetRotationChanger=ValueChanger.create(null,"rotation"),this.stageMouseRotationChanger=new ValueChanger,e.__super.call(this),this.mouseEnabled=!0,this.size(1,1),this.initMe(),this.xAxis.rotationControl.on("mousedown",this,this.controlMouseDown),this.yAxis.rotationControl.on("mousedown",this,this.controlMouseDown),this.controlBox.on("mousedown",this,this.controlBoxMouseDown),this.on("dragmove",this,this.dragging)}__class(e,"laya.debug.tools.comps.Axis",t);var i=e.prototype;return i.updateChanges=function(){if(this._target){var t;t=this._lenType[this._type],this.xAxis.targetChanger=ValueChanger.create(this._target,t[0]),this.yAxis.targetChanger=ValueChanger.create(this._target,t[1])}},i.switchType=function(){this._type++,this._type=this._type%this._lenType.length,this.type=this._type},i.controlBoxMouseDown=function(t){this.startDrag()},i.dragging=function(){this._target&&(this._point.setTo(this.x,this.y),DisControlTool.transPoint(this.parent,this._target.parent,this._point),this._target.pos(this._point.x,this._point.y))},i.initMe=function(){this.addChild(this.xAxis),this.addChild(this.yAxis),this.yAxis.rotation=90,this.addChild(this.controlBox),this.controlBox.posTo(0,0)},i.clearMoveEvents=function(){Laya.stage.off("mousemove",this,this.stageMouseMove),Laya.stage.off("mouseup",this,this.stageMouseUp)},i.controlMouseDown=function(t){this.targetRotationChanger.target=this.target,this.clearMoveEvents(),this.oPoint.setTo(0,0),this.myRotationChanger.record(),this.oPoint=this.localToGlobal(this.oPoint),this.stageMouseRotationChanger.value=this.getStageMouseRatation(),this.stageMouseRotationChanger.record(),this.targetRotationChanger.record(),Laya.stage.on("mousemove",this,this.stageMouseMove),Laya.stage.on("mouseup",this,this.stageMouseUp)},i.getStageMouseRatation=function(){return MathUtil.getRotation(this.oPoint.x,this.oPoint.y,Laya.stage.mouseX,Laya.stage.mouseY)},i.stageMouseMove=function(t){this.stageMouseRotationChanger.value=this.getStageMouseRatation();var e=NaN;e=-this.stageMouseRotationChanger.dValue,this.target?this.targetRotationChanger.showValueByAdd(e):this.myRotationChanger.showValueByAdd(e)},i.stageMouseUp=function(t){this.noticeChange(),this.clearMoveEvents()},i.noticeChange=function(){console.log("rotate:",-this.stageMouseRotationChanger.dValue)},__getset(0,i,"target",function(){return this._target},function(t){this._target=t,this.updateChanges()}),__getset(0,i,"type",function(){return this._type},function(t){this._type=t,this.updateChanges()}),e}(Sprite),Rect=function(t){function e(){this.recWidth=10,e.__super.call(this),this.drawMe()}__class(e,"laya.debug.tools.comps.Rect",t);var i=e.prototype;return i.drawMe=function(){var t;t=this.graphics,t.clear(),t.drawRect(0,0,this.recWidth,this.recWidth,"#22ff22"),this.size(this.recWidth,this.recWidth)},i.posTo=function(t,e){this.x=t-.5*this.recWidth,this.y=e-.5*this.recWidth},e}(Sprite),Text=function(t){function e(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,e.__super.call(this),this.overflow=e.VISIBLE,this._style=new CSSStyle(this),this._style.wordWrap=!1}__class(e,"laya.display.Text",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._lines=null,this._words&&(this._words.length=0,this._words=null)},i._getBoundPointsM=function(t){void 0===t&&(t=!1);var e=Rectangle.TEMP;return e.setTo(0,0,this.width,this.height),e._getBoundPoints()},i.getGraphicBounds=function(t){void 0===t&&(t=!1);var e=Rectangle.TEMP;return e.setTo(0,0,this.width,this.height),e},i._getCSSStyle=function(){return this._style},i.lang=function(t,i,s,n,o,r,a,h,l,c,u){if(t=e.langPacks&&e.langPacks[t]?e.langPacks[t]:t,arguments.length<2)this._text=t;else{for(var _=0,d=arguments.length;d>_;_++)t=t.replace("{"+_+"}",arguments[_+1]);this._text=t}},i.renderText=function(t,e){var i=this.graphics;i.clear();var s=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;Browser.context.font=s;var n=this.padding,o=n[3],r="left",a=this._lines,h=this.leading+this._charSize.height,l=this._currBitmapFont;l&&(h=this.leading+l.getMaxHeight());var c=n[0];if(!l&&this._width>0&&this._textWidth<=this._width&&("right"==this.align?(r="right",o=this._width-n[1]):"center"==this.align&&(r="center",o=.5*this._width+n[3]-n[1])),this._height>0){var u=this._textHeight>this._height?"top":this.valign;"middle"===u?c=.5*(this._height-e*h)+n[0]-n[2]:"bottom"===u&&(c=this._height-e*h-n[2])}var _=this._style;if(l&&l.autoScaleSize)var d=l.fontSize/this.fontSize;if(this._clipPoint)if(i.save(),l&&l.autoScaleSize){var f=0,p=0;f=this._width?this._width-n[3]-n[1]:this._textWidth,p=this._height?this._height-n[0]-n[2]:this._textHeight,f*=d,p*=d,i.clipRect(n[3],n[0],f,p)}else i.clipRect(n[3],n[0],this._width?this._width-n[3]-n[1]:this._textWidth,this._height?this._height-n[0]-n[2]:this._textHeight);var g=_.password;"prompt"in this&&this.prompt==this._text&&(g=!1);for(var m=0,y=0,v=Math.min(this._lines.length,e+t)||1,w=t;v>w;w++){var C,b=a[w];if(g){var x=b.length;b="";for(var S=x;S>0;S--)b+="●"}if(m=o-(this._clipPoint?this._clipPoint.x:0),y=c+h*w-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(r,m,y,w),l){var T=this.width;l.autoScaleSize&&(T=this.width*d),l.drawText(b,this,m,y,this.align,T)}else Render.isWebGL?(this._words||(this._words=[]),C=this._words.length>w-t?this._words[w-t]:new WordText,C.setText(b)):C=b,_.stroke?i.fillBorderText(C,m,y,s,this.color,_.strokeColor,_.stroke,r):i.fillText(C,m,y,s,this.color,r)}if(l&&l.autoScaleSize){var I=1/d;this.scale(I,I)}this._clipPoint&&i.restore(),this._startX=o,this._startY=c},i.drawUnderline=function(t,e,i,s){var n=this._lineWidths[s];switch(t){case"center":e-=n/2;break;case"right":e-=n;break;case"left":}i+=this._charSize.height,this._graphics.drawLine(e,i,e+n,i,this.underlineColor||this.color,1)},i.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear();Browser.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new Point(0,0)):this._clipPoint=null;var t=this._lines.length;if(this.overflow!=e.VISIBLE){var i=this.overflow==e.HIDDEN?Math.floor:Math.ceil;t=Math.min(t,i((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var s=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(s,t),this.repaint()},i.evalTextSize=function(){var t=NaN,e=NaN;t=Math.max.apply(this,this._lineWidths),e=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],t==this._textWidth&&e==this._textHeight||(this._textWidth=t,this._textHeight=e,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight));
},i.checkEnabledViewportOrNot=function(){return this.overflow==e.SCROLL&&(this._width>0&&this._textWidth>this._width||this._height>0&&this._textHeight>this._height)},i.changeText=function(t){this._text!==t&&(this.lang(t+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},i.parseLines=function(t){var i=this.wordWrap||this.overflow==e.HIDDEN;if(i)var s=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var n=Browser.context.measureText(e._testWord);this._charSize.width=n.width,this._charSize.height=n.height||this.fontSize}for(var o=t.replace(/\r\n/g,"\n").split("\n"),r=0,a=o.length;a>r;r++){var h=o[r];i?this.parseLine(h,s):(this._lineWidths.push(this.getTextWidth(h)),this._lines.push(h))}},i.parseLine=function(t,i){var s,n=(Browser.context,this._lines),o=0,r=NaN,a=NaN,h=0;if(r=this.getTextWidth(t),i>=r)return n.push(t),void this._lineWidths.push(r);r=this._charSize.width,o=Math.floor(i/r),0==o&&(o=1),r=this.getTextWidth(t.substring(0,o)),a=r;for(var l=o,c=t.length;c>l;l++)if(r=this.getTextWidth(t.charAt(l)),a+=r,a>i)if(this.wordWrap){var u=t.substring(h,l);if(u.charCodeAt(u.length-1)<255&&(s=/(?:\w|-)+$/.exec(u),s&&(l=s.index+h,0==s.index?l+=u.length:u=t.substring(h,l))),n.push(u),this._lineWidths.push(a-r),h=l,!(c>l+o)){n.push(t.substring(h,c)),this._lineWidths.push(this.getTextWidth(n[n.length-1])),h=-1;break}l+=o,r=this.getTextWidth(t.substring(h,l)),a=r,l--}else if(this.overflow==e.HIDDEN)return n.push(t.substring(0,l)),void this._lineWidths.push(this.getTextWidth(n[n.length-1]));this.wordWrap&&-1!=h&&(n.push(t.substring(h,c)),this._lineWidths.push(this.getTextWidth(n[n.length-1])))},i.getTextWidth=function(t){return this._currBitmapFont?this._currBitmapFont.getTextWidth(t):Browser.context.measureText(t).width},i.getWordWrapWidth=function(){var t=this.padding,e=NaN;return e=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width,0>=e&&(e=this.wordWrap?100:Browser.width),0>=e&&(e=100),e-t[3]-t[1]},i.getCharPoint=function(t,e){this._isChanged&&Laya.timer.runCallLater(this,this.typeset);for(var i=0,s=this._lines,n=0,o=0,r=s.length;r>o;o++){if(i+=s[o].length,i>t){var a=o;break}n=i}var h=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;Browser.context.font=h;var l=this.getTextWidth(this._text.substring(n,t)),c=e||new Point;return c.setTo(this._startX+l-(this._clipPoint?this._clipPoint.x:0),this._startY+a*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},__getset(0,i,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(e){e!=this._width&&(t.prototype._$set_width.call(this,e),this.isChanged=!0)}),__getset(0,i,"textWidth",function(){return this._isChanged&&Laya.timer.runCallLater(this,this.typeset),this._textWidth}),__getset(0,i,"height",function(){return this._height?this._height:this.textHeight+this.padding[0]+this.padding[2]},function(e){e!=this._height&&(t.prototype._$set_height.call(this,e),this.isChanged=!0)}),__getset(0,i,"textHeight",function(){return this._isChanged&&Laya.timer.runCallLater(this,this.typeset),this._textHeight}),__getset(0,i,"padding",function(){return this._getCSSStyle().padding},function(t){this._getCSSStyle().padding=t,this.isChanged=!0}),__getset(0,i,"bold",function(){return this._getCSSStyle().bold},function(t){this._getCSSStyle().bold=t,this.isChanged=!0}),__getset(0,i,"text",function(){return this._text||""},function(t){this._text!==t&&(this.lang(t+""),this.isChanged=!0,this.event("change"))}),__getset(0,i,"color",function(){return this._getCSSStyle().color},function(t){this._getCSSStyle().color!=t&&(this._getCSSStyle().color=t,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),__getset(0,i,"font",function(){return this._getCSSStyle().fontFamily},function(t){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),e._bitmapFonts&&e._bitmapFonts[t]&&(this._currBitmapFont=e._bitmapFonts[t]),this._getCSSStyle().fontFamily=t,this.isChanged=!0}),__getset(0,i,"fontSize",function(){return this._getCSSStyle().fontSize},function(t){this._getCSSStyle().fontSize=t,this.isChanged=!0}),__getset(0,i,"italic",function(){return this._getCSSStyle().italic},function(t){this._getCSSStyle().italic=t,this.isChanged=!0}),__getset(0,i,"align",function(){return this._getCSSStyle().align},function(t){this._getCSSStyle().align=t,this.isChanged=!0}),__getset(0,i,"valign",function(){return this._getCSSStyle().valign},function(t){this._getCSSStyle().valign=t,this.isChanged=!0}),__getset(0,i,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(t){this._getCSSStyle().wordWrap=t,this.isChanged=!0}),__getset(0,i,"leading",function(){return this._getCSSStyle().leading},function(t){this._getCSSStyle().leading=t,this.isChanged=!0}),__getset(0,i,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(t){this._getCSSStyle().backgroundColor=t,this.isChanged=!0}),__getset(0,i,"borderColor",function(){return this._getCSSStyle().borderColor},function(t){this._getCSSStyle().borderColor=t,this.isChanged=!0}),__getset(0,i,"stroke",function(){return this._getCSSStyle().stroke},function(t){this._getCSSStyle().stroke=t,this.isChanged=!0}),__getset(0,i,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(t){this._getCSSStyle().strokeColor=t,this.isChanged=!0}),__getset(0,i,"isChanged",null,function(t){this._isChanged!==t&&(this._isChanged=t,t&&Laya.timer.callLater(this,this.typeset))}),__getset(0,i,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(t){if(!(this.overflow!=e.SCROLL||this.textWidth<this._width)&&this._clipPoint){t=t<this.padding[3]?this.padding[3]:t;var i=this._textWidth-this._width;t=t>i?i:t;var s=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=t,this.renderText(this._lastVisibleLineIndex,s)}}),__getset(0,i,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(t){if(!(this.overflow!=e.SCROLL||this.textHeight<this._height)&&this._clipPoint){t=t<this.padding[0]?this.padding[0]:t;var i=this._textHeight-this._height;t=t>i?i:t;var s=t/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=s;var n=(this._height/(this._charSize.height+this.leading)|0)+1;this._clipPoint.y=t,this.renderText(s,n)}}),__getset(0,i,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),__getset(0,i,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),__getset(0,i,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),__getset(0,i,"underlineColor",function(){return this._underlineColor},function(t){this._underlineColor=t,this._isChanged=!0,this.typeset()}),e.registerBitmapFont=function(t,i){e._bitmapFonts||(e._bitmapFonts={}),e._bitmapFonts[t]=i},e.unregisterBitmapFont=function(t,i){if(void 0===i&&(i=!0),e._bitmapFonts&&e._bitmapFonts[t]){var s=e._bitmapFonts[t];i&&s.destroy(),delete e._bitmapFonts[t]}},e._testWord="游",e.langPacks=null,e.VISIBLE="visible",e.SCROLL="scroll",e.HIDDEN="hidden",e._bitmapFonts=null,e}(Sprite),DebugInfoLayer=function(t){function e(){this.nodeRecInfoLayer=null,this.lineLayer=null,this.txtLayer=null,this.popLayer=null,this.graphicLayer=null,this.cacheViewLayer=null,e.__super.call(this),this.nodeRecInfoLayer=new Sprite,this.lineLayer=new Sprite,this.txtLayer=new Sprite,this.popLayer=new Sprite,this.graphicLayer=new Sprite,this.cacheViewLayer=new Sprite,this.nodeRecInfoLayer.name="nodeRecInfoLayer",this.lineLayer.name="lineLayer",this.txtLayer.name="txtLayer",this.popLayer.name="popLayer",this.graphicLayer.name="graphicLayer",this.cacheViewLayer.name="cacheViewLayer",this.addChild(this.lineLayer),this.addChild(this.cacheViewLayer),this.addChild(this.nodeRecInfoLayer),this.addChild(this.txtLayer),this.addChild(this.popLayer),this.addChild(this.graphicLayer),e.I=this,this.zOrder=999,Laya.stage.on("doubleclick",this,this.setTop)}__class(e,"laya.debug.view.nodeInfo.DebugInfoLayer",t);var i=e.prototype;return i.setTop=function(){DisControlTool.setTop(this)},i.isDebugItem=function(t){return DisControlTool.isInTree(this,t)},e.init=function(){e.I||(new e,Laya.stage.addChild(e.I))},e.I=null,e}(Sprite),NodeInfoPanel=function(t){function e(){this._stateDic={},this.isWorkState=!1,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.NodeInfoPanel",t);var i=e.prototype;return i.showDisInfo=function(t){this.recoverNodes(),NodeInfosItem.showDisInfos(t),this.showOnly(t),this.isWorkState=!0},i.showOnly=function(t){t&&(this.hideBrothers(t),this.showOnly(t.parent))},i.recoverNodes=function(){NodeInfosItem.hideAllInfos();var t,e,i;for(t in this._stateDic)if(e=this._stateDic[t],i=e.target)try{i.visible=e.visible}catch(s){}this.isWorkState=!1},i.hideOtherChain=function(t){if(t)for(;t;)this.hideBrothers(t),t=t.parent},i.hideChilds=function(t){if(t){var e,i=0,s=0;e=t._childs,s=e.length;var n;for(i=0;s>i;i++)n=e[i],n!=NodeInfosItem.NodeInfoContainer&&(this.saveNodeInfo(n),n.visible=!1)}},i.hideBrothers=function(t){if(t){var e;if(e=t.parent){var i,s=0,n=0;i=e._childs,n=i.length;var o;for(s=0;n>s;s++)o=i[s],o!=NodeInfosItem.NodeInfoContainer&&o!=t&&(this.saveNodeInfo(o),o.visible=!1)}}},i.saveNodeInfo=function(t){if(IDTools.idObj(t),!this._stateDic.hasOwnProperty(IDTools.getObjID(t))){var e;e={},e.target=t,e.visible=t.visible,this._stateDic[IDTools.getObjID(t)]=e}},i.recoverNodeInfo=function(t){if(IDTools.idObj(t),this._stateDic.hasOwnProperty(IDTools.getObjID(t))){var e;e=this._stateDic[IDTools.getObjID(t)],t.visible=e.visible}},e.init=function(){e.I||(e.I=new e,NodeInfosItem.init(),ToolPanel.init())},e.I=null,e}(Sprite),NodeInfosItem=function(t){function e(){this._infoTxt=null,this._tar=null,e.__super.call(this),this._infoTxt=new Text,this._infoTxt.color="#ff0000",this._infoTxt.bgColor="#00ff00",this._infoTxt.fontSize=12}__class(e,"laya.debug.view.nodeInfo.NodeInfosItem",t);var i=e.prototype;return i.removeSelf=function(){return this._infoTxt.removeSelf(),laya.display.Node.prototype.removeSelf.call(this)},i.showToUI=function(){e.NodeInfoContainer.nodeRecInfoLayer.addChild(this),this._infoTxt.removeSelf(),e.NodeInfoContainer.txtLayer.addChild(this._infoTxt),this.findOkPos()},i.randomAPos=function(t){this._infoTxt.x=this.x+Laya.stage.width*Math.random(),this._infoTxt.y=this.y+t*Math.random()},i.findOkPos=function(){var t=0;return t=20,void this.randomAPos(t)},i.isPosOk=function(){var t;t=e.NodeInfoContainer.nodeRecInfoLayer;var i,s=0,n=0;i=t._childs,n=i.length;var o,r;if(r=this._infoTxt.getBounds(),r.x<0)return!1;if(r.y<0)return!1;if(r.right>Laya.stage.width)return!1;for(s=0;n>s;s++)if(o=i[s],o!=this._infoTxt&&r.intersects(o.getBounds()))return!1;return!0},i.showInfo=function(t){if(this._tar=t,t){e._txts.length=0;var i,s=0,n=0;for(n=e.showValues.length,t.name?e._txts.push(ClassTool.getClassName(t)+"("+t.name+")"):e._txts.push(ClassTool.getClassName(t)),s=0;n>s;s++)i=e.showValues[s],e._txts.push(i+":"+e.getNodeValue(t,i));this._infoTxt.text=e._txts.join("\n"),this.graphics.clear();var o;o=t._getBoundPointsM(!0),!o||o.length<1||(o=GrahamScan.pListToPointList(o,!0),WalkTools.walkArr(o,t.localToGlobal,t),o=GrahamScan.pointListToPlist(o),e._disBoundRec=Rectangle._getWrapRec(o,e._disBoundRec),this.graphics.drawRect(0,0,e._disBoundRec.width,e._disBoundRec.height,null,"#00ffff"),this.pos(e._disBoundRec.x,e._disBoundRec.y))}},i.fresh=function(){this.showInfo(this._tar)},i.clearMe=function(){this._tar=null},i.recover=function(){Pool.recover("NodeInfosItem",this)},e.init=function(){e.NodeInfoContainer||(DebugInfoLayer.init(),e.NodeInfoContainer=DebugInfoLayer.I,Laya.stage.addChild(e.NodeInfoContainer))},e.getNodeInfoByNode=function(t){IDTools.idObj(t);var i=0;return i=IDTools.getObjID(t),e._nodeInfoDic[i]||(e._nodeInfoDic[i]=new e),e._nodeInfoDic[i]},e.hideAllInfos=function(){var t,i;for(t in e._nodeInfoDic)i=e._nodeInfoDic[t],i.removeSelf();e.clearRelations()},e.showNodeInfo=function(t){var i;i=e.getNodeInfoByNode(t),i.showInfo(t),i.showToUI()},e.showDisInfos=function(t){var i;if(i=t,t){for(;t;)e.showNodeInfo(t),t=t.parent;DisControlTool.setTop(e.NodeInfoContainer),e.apdtTxtInfoPoss(i),e.updateRelations()}},e.apdtTxtInfoPoss=function(t){var i;for(i=[];t;)i.push(t),t=t.parent;var s,n,o=0,r=0;r=i.length;var a=NaN;a=Laya.stage.width-150;var h=0;for(h=100,t=i[0],t&&(s=e.getNodeInfoByNode(t),s&&(n=s._infoTxt,a=Laya.stage.width-n.width-10,h=n.height+10)),i=i.reverse(),o=0;r>o;o++)t=i[o],s=e.getNodeInfoByNode(t),s&&(n=s._infoTxt,n.pos(a,h*o))},e.clearRelations=function(){var t;t=e.NodeInfoContainer.lineLayer.graphics,t.clear()},e.updateRelations=function(){var t;t=e.NodeInfoContainer.lineLayer.graphics,t.clear();var i,s;for(i in e._nodeInfoDic)s=e._nodeInfoDic[i],s.parent&&t.drawLine(s.x,s.y,s._infoTxt.x,s._infoTxt.y,"#0000ff")},e.getNodeValue=function(t,i){var s;switch(e._nodePoint.setTo(0,0),i){case"x":s=t.x+" (g:"+t.localToGlobal(e._nodePoint).x+")";break;case"y":s=t.y+" (g:"+t.localToGlobal(e._nodePoint).y+")";break;default:s=t[i]}return s},e.NodeInfoContainer=null,e._nodeInfoDic={},e._txts=[],__static(e,["showValues",function(){return this.showValues=["x","y","scaleX","scaleY","width","height","visible","mouseEnabled"]},"_disBoundRec",function(){return this._disBoundRec=new Rectangle},"_nodePoint",function(){return this._nodePoint=new Point}]),e}(Sprite),NodeRecInfo=function(t){function e(){this.txt=null,this._tar=null,this.recColor="#00ff00",e.__super.call(this),this.txt=new Text,this.txt.color="#ff0000",this.txt.bgColor="#00ff00",this.txt.fontSize=12,this.addChild(this.txt)}__class(e,"laya.debug.view.nodeInfo.recinfos.NodeRecInfo",t);var i=e.prototype;return i.setInfo=function(t){this.txt.text=t},i.setTarget=function(t){this._tar=t},i.showInfo=function(t){if(this._tar=t,t&&t._$P){this.graphics.clear();var i;i=t._getBoundPointsM(!0),!i||i.length<1||(i=GrahamScan.pListToPointList(i,!0),WalkTools.walkArr(i,t.localToGlobal,t),i=GrahamScan.pointListToPlist(i),e._disBoundRec=Rectangle._getWrapRec(i,e._disBoundRec),this.graphics.drawRect(0,0,e._disBoundRec.width,e._disBoundRec.height,null,DebugConsts.RECACHE_REC_COLOR,2),this.pos(e._disBoundRec.x,e._disBoundRec.y))}},i.fresh=function(){this.showInfo(this._tar)},i.clearMe=function(){this._tar=null},__static(e,["_disBoundRec",function(){return this._disBoundRec=new Rectangle}]),e}(Sprite),ToolPanel=function(t){function e(){e.__super.call(this),Base64AtlasManager.base64.preLoad(Handler.create(this,this.showToolBar)),ContextMenu.init(),DisResizer.init();var t;t=new TipManagerForDebug}__class(e,"laya.debug.view.nodeInfo.ToolPanel",t);var i=e.prototype;return i.showToolBar=function(){DebugPanelView.I.show()},i.createViews=function(){e.typeClassDic.Find=FindView,e.typeClassDic.Filter=FilterView,e.typeClassDic.TxtInfo=TxtInfoView,e.typeClassDic.Tree=NodeTreeView},i.switchShow=function(t){var e;e=this.getView(t),e&&e.switchShow()},i.getView=function(t){var i;return i=e.viewDic[t],!i&&e.typeClassDic[t]&&(i=e.viewDic[t]=new e.typeClassDic[t]),i},i.showTxtInfo=function(t){OutPutView.I.showTxt(t)},i.showNodeTree=function(t){NodeTree.I.setDis(t),DebugPanelView.I.switchToTree()},i.showSelectInStage=function(t){NodeTree.I.showSelectInStage(t),DebugPanelView.I.switchToTree()},i.showSelectItems=function(t){DebugPanelView.I.swichToSelect(),SelectInfosView.I.setSelectList(t)},e.init=function(){e.I||(e.I=new e)},e.I=null,e.viewDic={},e.Find="Find",e.Filter="Filter",e.TxtInfo="TxtInfo",e.Tree="Tree",__static(e,["typeClassDic",function(){return this.typeClassDic={}}]),e}(Sprite),AnimationPlayerBase=function(t){function e(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,e.__super.call(this),this._interval=Config.animationInterval,this._setUpNoticeType(1)}__class(e,"laya.display.AnimationPlayerBase",t);var i=e.prototype;return i.play=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=!0),void 0===i&&(i=""),this._isPlaying=!0,this.index="string"==typeof t?this._getFrameByLabel(t):t,this.loop=e,this._actionName=i,this._isReverse=1==this.wrapMode,this.interval>0&&this.timerLoop(this.interval,this,this._frameLoop,null,!0)},i._getFrameByLabel=function(t){var e=0;for(e=0;e<this._count;e++)if(this._labels[e]&&this._labels[e].indexOf(t)>=0)return e;return 0},i._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=this._count>0?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=this._count-2>=0?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},i._setControlNode=function(t){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),this._controlNode=t,t&&t!=this&&(t.on("display",this,this._checkResumePlaying),t.on("undisplay",this,this._checkResumePlaying))},i._setDisplay=function(e){t.prototype._setDisplay.call(this,e),this._checkResumePlaying()},i._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},i.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},i.addLabel=function(t,e){this._labels||(this._labels={}),this._labels[e]||(this._labels[e]=[]),this._labels[e].push(t)},i.removeLabel=function(t){if(t){if(this._labels)for(var e in this._labels)this._removeLabelFromLabelList(this._labels[e],t)}else this._labels=null},i._removeLabelFromLabelList=function(t,e){if(t)for(var i=t.length-1;i>=0;i--)t[i]==e&&t.splice(i,1)},i.gotoAndStop=function(t){this.index="string"==typeof t?this._getFrameByLabel(t):t,this.stop()},i._displayToIndex=function(t){},i.clear=function(){this.stop(),this._labels=null},__getset(0,i,"interval",function(){return this._interval},function(t){this._interval!=t&&(this._frameRateChanged=!0,this._interval=t,this._isPlaying&&t>0&&this.timerLoop(t,this,this._frameLoop,null,!0))}),__getset(0,i,"isPlaying",function(){return this._isPlaying}),__getset(0,i,"index",function(){return this._index},function(t){if(this._index=t,this._displayToIndex(t),this._labels&&this._labels[t])for(var e=this._labels[t],i=0,s=e.length;s>i;i++)this.event("label",e[i])}),__getset(0,i,"count",function(){return this._count}),e.WRAP_POSITIVE=0,e.WRAP_REVERSE=1,e.WRAP_PINGPONG=2,e}(Sprite),Stage=function(t){function e(){function t(){"hidden"==Browser.document[o]?(i._isVisibility=!1,n._isInputting()&&(Input.inputElement.target.focus=!1)):i._isVisibility=!0,n.event("visibilitychange")}this.focus=null,this.frameRate="fast",this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._safariOffsetY=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._wgColor=null,e.__super.call(this),this.offset=new Point,this._canvasTransform=new Matrix,this._previousOrientation=Browser.window.orientation;var i=this;this.transform=Matrix.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var s=Browser.window,n=this;s.addEventListener("focus",function(){i._isFocused=!0,n.event("focus"),n.event("focuschange")}),s.addEventListener("blur",function(){i._isFocused=!1,n.event("blur"),n.event("focuschange"),n._isInputting()&&(Input.inputElement.target.focus=!1)});var o="visibilityState",r="visibilitychange",a=s.document;"undefined"!=typeof a.hidden?(r="visibilitychange",o="visibilityState"):"undefined"!=typeof a.mozHidden?(r="mozvisibilitychange",o="mozVisibilityState"):"undefined"!=typeof a.msHidden?(r="msvisibilitychange",o="msVisibilityState"):"undefined"!=typeof a.webkitHidden&&(r="webkitvisibilitychange",o="webkitVisibilityState"),s.document.addEventListener(r,t),s.addEventListener("resize",function(){var t=Browser.window.orientation;null!=t&&t!=i._previousOrientation&&n._isInputting()&&(Input.inputElement.target.focus=!1),i._previousOrientation=t,n._isInputting()||(Browser.onSafari&&(n._safariOffsetY=(Browser.window.__innerHeight||Browser.document.body.clientHeight||Browser.document.documentElement.clientHeight)-Browser.window.innerHeight),n._resetCanvas())}),s.addEventListener("orientationchange",function(t){n._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),Browser.onMobile&&this.on("mousedown",this,this._onmouseMove)}__class(e,"laya.display.Stage",t);var i=e.prototype;return i._isInputting=function(){return Browser.onMobile&&Input.isInputting},i._changeCanvasSize=function(){this.setScreenSize(Browser.clientWidth*Browser.pixelRatio,Browser.clientHeight*Browser.pixelRatio)},i._resetCanvas=function(){if(this.screenAdaptationEnabled){var t=Render._mainCanvas;t.source.style;Laya.timer.once(100,this,this._changeCanvasSize)}},i.setScreenSize=function(t,e){var i=!1;if("none"!==this._screenMode){var s=1>t/e?"vertical":"horizontal";if(i=s!==this._screenMode){var n=e;e=t,t=n}}this.canvasRotation=i;var o=Render._mainCanvas,r=o.source.style,a=this._canvasTransform.identity(),h=this._scaleMode,l=t/this.designWidth,c=e/this.designHeight,u=this.designWidth,_=this.designHeight,d=t,f=e,p=Browser.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,h){case"noscale":l=c=1,d=this.designWidth,f=this.designHeight;break;case"showall":l=c=Math.min(l,c),u=d=Math.round(this.designWidth*l),_=f=Math.round(this.designHeight*c);break;case"noborder":l=c=Math.max(l,c),d=Math.round(this.designWidth*l),f=Math.round(this.designHeight*c);break;case"full":l=c=1,this._width=u=t,this._height=_=e;break;case"fixedwidth":c=l,this._height=_=Math.round(e/l);break;case"fixedheight":l=c,this._width=u=Math.round(t/c);break;case"fixedauto":t/e<this.designWidth/this.designHeight?(c=l,this._height=_=Math.round(e/l)):(l=c,this._width=u=Math.round(t/c))}l*=this.scaleX,c*=this.scaleY,1===l&&1===c?this.transform.identity():(this.transform.a=this._formatData(l/(d/u)),this.transform.d=this._formatData(c/(f/_)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),o.size(u,_),RunDriver.changeWebGLSize(u,_),a.scale(d/u/p,f/_/p),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=t-d:this.offset.x=.5*(t-d)/p,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=e-f:this.offset.y=.5*(e-f)/p,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),a.translate(this.offset.x,this.offset.y),this._safariOffsetY&&a.translate(0,this._safariOffsetY),this.canvasDegree=0,i&&("horizontal"===this._screenMode?(a.rotate(Math.PI/2),a.translate(e/p,0),this.canvasDegree=90):(a.rotate(-Math.PI/2),a.translate(0,t/p),this.canvasDegree=-90)),a.a=this._formatData(a.a),a.d=this._formatData(a.d),a.tx=this._formatData(a.tx),a.ty=this._formatData(a.ty),r.transformOrigin=r.webkitTransformOrigin=r.msTransformOrigin=r.mozTransformOrigin=r.oTransformOrigin="0px 0px 0px",r.transform=r.webkitTransform=r.msTransform=r.mozTransform=r.oTransform="matrix("+a.toString()+")",this._safariOffsetY&&a.translate(0,-this._safariOffsetY),a.translate(parseInt(r.left)||0,parseInt(r.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},i._formatData=function(t){return Math.abs(t)<1e-6?0:Math.abs(1-t)<.001?t>0?1:-1:t},i.getMousePoint=function(){return Point.TEMP.setTo(this.mouseX,this.mouseY)},i.repaint=function(){this._repaint=1},i.parentRepaint=function(){},i._loop=function(){return this.render(Render.context,0,0),!0},i._onmouseMove=function(t){this._mouseMoveTime=Browser.now()},i.getTimeFromFrameStart=function(){return Browser.now()-this._frameStartTime},i.render=function(e,i,s){if("sleep"===this.frameRate){var n=Browser.now();if(!(n-this._frameStartTime>=1e3))return;this._frameStartTime=n}if(this._renderCount++,Render.isFlash&&this.repaint(),!this._style.visible)return void(this._renderCount%5===0&&(Stat.loopCount++,MouseManager.instance.runEvent(),Laya.timer._update()));this._frameStartTime=Browser.now();var o="mouse"===this.frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this.frameRate,r="slow"!==o,a=this._renderCount%2===0;if(Stat.renderSlow=!r,r||a){Stat.loopCount++,MouseManager.instance.runEvent(),Laya.timer._update();var h,l=0,c=0;if(Render.isConchNode)for(l=0,c=this._scenes.length;c>l;l++)h=this._scenes[l],h&&h._updateSceneConch();else for(l=0,c=this._scenes.length;c>l;l++)h=this._scenes[l],h&&h._updateScene();if(Render.isConchNode){var u=Sprite.CustomList;for(l=0,c=u.length;c>l;l++){var _=u[l];_.customRender(_.customContext,0,0)}return}Render.isWebGL&&this.renderingEnabled&&(e.clear(),t.prototype.render.call(this,e,i,s))}Render.isConchNode||!this.renderingEnabled||!r&&a||(Render.isWebGL?(RunDriver.clear(this._bgColor),RunDriver.beginFlush(),e.flush(),RunDriver.endFinish(),VectorGraphManager.instance&&VectorGraphManager.getInstance().endDispose()):(RunDriver.clear(this._bgColor),t.prototype.render.call(this,e,i,s)))},i._requestFullscreen=function(){var t=Browser.document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},i._fullScreenChanged=function(){Laya.stage.event("fullscreenchange")},i.exitFullscreen=function(){var t=Browser.document;t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()},__getset(0,i,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),__getset(0,i,"width",t.prototype._$get_width,function(e){this.designWidth=e,t.prototype._$set_width.call(this,e),Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,i,"isFocused",function(){return this._isFocused}),__getset(0,i,"alignH",function(){return this._alignH},function(t){this._alignH=t,Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,i,"height",t.prototype._$get_height,function(e){this.designHeight=e,t.prototype._$set_height.call(this,e),Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,i,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||Matrix.create()},t.prototype._$set_transform),__getset(0,i,"isVisibility",function(){return this._isVisibility}),__getset(0,i,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),__getset(0,i,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),__getset(0,i,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),__getset(0,i,"scaleMode",function(){return this._scaleMode},function(t){this._scaleMode=t,Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,i,"alignV",function(){return this._alignV},function(t){this._alignV=t,Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,i,"bgColor",function(){return this._bgColor},function(t){this._bgColor=t,this.conchModel&&this.conchModel.bgColor(t),Render.isWebGL&&(t&&"black"!==t&&"#000000"!==t?this._wgColor=Color.create(t)._color:this._wgColor=null),t?Render.canvas.style.background=t:Render.canvas.style.background="none"}),__getset(0,i,"mouseX",function(){return Math.round(MouseManager.instance.mouseX/this.clientScaleX)}),__getset(0,i,"mouseY",function(){return Math.round(MouseManager.instance.mouseY/this.clientScaleY)}),__getset(0,i,"screenMode",function(){return this._screenMode},function(t){this._screenMode=t}),__getset(0,i,"visible",t.prototype._$get_visible,function(e){if(this.visible!==e){t.prototype._$set_visible.call(this,e);var i=Render._mainCanvas.source.style;i.visibility=e?"visible":"hidden"}}),__getset(0,i,"fullScreenEnabled",null,function(t){var e=Browser.document,i=Render.canvas;t?(i.addEventListener("mousedown",this._requestFullscreen),i.addEventListener("touchstart",this._requestFullscreen),e.addEventListener("fullscreenchange",this._fullScreenChanged),e.addEventListener("mozfullscreenchange",this._fullScreenChanged),e.addEventListener("webkitfullscreenchange",this._fullScreenChanged),e.addEventListener("msfullscreenchange",this._fullScreenChanged)):(i.removeEventListener("mousedown",this._requestFullscreen),i.removeEventListener("touchstart",this._requestFullscreen),e.removeEventListener("fullscreenchange",this._fullScreenChanged),e.removeEventListener("mozfullscreenchange",this._fullScreenChanged),e.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),e.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),e.SCALE_NOSCALE="noscale",e.SCALE_EXACTFIT="exactfit",e.SCALE_SHOWALL="showall",e.SCALE_NOBORDER="noborder",e.SCALE_FULL="full",e.SCALE_FIXED_WIDTH="fixedwidth",e.SCALE_FIXED_HEIGHT="fixedheight",e.SCALE_FIXED_AUTO="fixedauto",e.ALIGN_LEFT="left",e.ALIGN_RIGHT="right",e.ALIGN_CENTER="center",e.ALIGN_TOP="top",e.ALIGN_MIDDLE="middle",e.ALIGN_BOTTOM="bottom",e.SCREEN_NONE="none",e.SCREEN_HORIZONTAL="horizontal",e.SCREEN_VERTICAL="vertical",e.FRAME_FAST="fast",e.FRAME_SLOW="slow",e.FRAME_MOUSE="mouse",e.FRAME_SLEEP="sleep",e}(Sprite),DialogManager=function(t){function e(){this.lockLayer=null,this.popupEffect=function(t){t.scale(1,1),Tween.from(t,{x:Laya.stage.width/2,y:Laya.stage.height/2,scaleX:0,scaleY:0},300,Ease.backOut,Handler.create(this,this.doOpen,[t]))},this.closeEffect=function(t,e){Tween.to(t,{x:Laya.stage.width/2,y:Laya.stage.height/2,scaleX:0,scaleY:0},300,Ease.strongOut,Handler.create(this,this.doClose,[t,e]))},e.__super.call(this),this.maskLayer=new Sprite,this.popupEffectHandler=new Handler(this,this.popupEffect),this.closeEffectHandler=new Handler(this,this.closeEffect),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,Laya.stage.addChild(this),Laya.stage.on("resize",this,this._onResize),UIConfig.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}__class(e,"laya.ui.DialogManager",t);var i=e.prototype;return i._closeOnSide=function(){var t=this.getChildAt(this.numChildren-1);t instanceof laya.ui.Dialog&&t.close("side")},i.setLockView=function(t){this.lockLayer||(this.lockLayer=new Box,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(Laya.stage.width,Laya.stage.height)),this.lockLayer.removeChildren(),t&&(t.centerX=t.centerY=0,this.lockLayer.addChild(t))},i._onResize=function(t){var e=this.maskLayer.width=Laya.stage.width,i=this.maskLayer.height=Laya.stage.height;this.lockLayer&&this.lockLayer.size(e,i),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,e,i,UIConfig.popupBgColor),this.maskLayer.alpha=UIConfig.popupBgAlpha;for(var s=this.numChildren-1;s>-1;s--){var n=this.getChildAt(s);n.popupCenter&&this._centerDialog(n)}},i._centerDialog=function(t){t.x=Math.round((Laya.stage.width-t.width>>1)+t.pivotX),t.y=Math.round((Laya.stage.height-t.height>>1)+t.pivotY)},i.open=function(t,e){void 0===e&&(e=!1),e&&this.removeChildren(),t.popupCenter&&this._centerDialog(t),this.addChild(t),(t.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),null!=t.popupEffect?t.popupEffect.runWith(t):this.doOpen(t),this.event("open")},i.doOpen=function(t){t.onOpened()},i.lock=function(t){this.lockLayer&&(t?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},i.close=function(t,e){
null!=t.closeEffect?t.closeEffect.runWith([t,e]):this.doClose(t,e),this.event("close")},i.doClose=function(t,e){t.removeSelf(),t.isModal&&this._checkMask(),t.closeHandler&&t.closeHandler.runWith(e),t.onClosed(e)},i.closeAll=function(){this.removeChildren(),this.event("close")},i.getDialogsByGroup=function(t){for(var e=[],i=this.numChildren-1;i>-1;i--){var s=this.getChildAt(i);s.group===t&&e.push(s)}return e},i.closeByGroup=function(t){for(var e=[],i=this.numChildren-1;i>-1;i--){var s=this.getChildAt(i);s.group===t&&(s.close(),e.push(s))}return e},i._checkMask=function(){this.maskLayer.removeSelf();for(var t=this.numChildren-1;t>-1;t--){var e=this.getChildAt(t);if(e&&e.isModal)return void this.addChildAt(this.maskLayer,t)}},e}(Sprite),FileBitmap=function(t){function e(){this._src=null,this._onload=null,this._onerror=null,e.__super.call(this)}__class(e,"laya.resource.FileBitmap",t);var i=e.prototype;return __getset(0,i,"src",function(){return this._src},function(t){this._src=t}),__getset(0,i,"onload",null,function(t){}),__getset(0,i,"onerror",null,function(t){}),e}(Bitmap),HTMLCanvas=function(t){function e(t){this._is2D=!1,e.__super.call(this);var i=this;if(this._source=this,"2D"===t||"AUTO"===t&&!Render.isWebGL){this._is2D=!0,this._source=Browser.createElement("canvas");var s=this;s.getContext=function(t,e){if(i._ctx)return i._ctx;var n=i._ctx=i._source.getContext(t,e);return n&&(n._canvas=s,Render.isFlash||(n.size=function(t,e){})),n}}}__class(e,"laya.resource.HTMLCanvas",t);var i=e.prototype;return i.clear=function(){this._ctx&&this._ctx.clear()},i.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null},i.release=function(){},i._setContext=function(t){this._ctx=t},i.getContext=function(t,i){return this._ctx?this._ctx:this._ctx=e._createContext(this)},i.getMemSize=function(){return 0},i.size=function(t,e){this._w==t&&this._h==e||(this._w=t,this._h=e,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(t,e),this._source&&(this._source.height=e,this._source.width=t))},i.getCanvas=function(){return this._source},__getset(0,i,"context",function(){return this._ctx}),__getset(0,i,"asBitmap",null,function(t){}),e.create=function(t){return new e(t)},e.TYPE2D="2D",e.TYPE3D="3D",e.TYPEAUTO="AUTO",e._createContext=null,e}(Bitmap),Box=function(t){function e(){e.__super.call(this)}__class(e,"laya.ui.Box",t);var i=e.prototype;return Laya.imps(i,{"laya.ui.IBox":!0}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t;for(var e in t){var i=this.getChildByName(e);i?i.dataSource=t[e]:this.hasOwnProperty(e)&&"function"!=typeof this[e]&&(this[e]=t[e])}}),e}(Component),AutoFillRec=function(t){function e(t){this.type=0,this.preX=NaN,this.preY=NaN,e.__super.call(this)}__class(e,"laya.debug.tools.resizer.AutoFillRec",t);var i=e.prototype;return i.changeSize=function(){t.prototype.changeSize.call(this);var e=this.graphics;e.clear(),e.drawRect(0,0,this.width,this.height,"#33c5f5")},i.record=function(){this.preX=this.x,this.preY=this.y},i.getDx=function(){return this.x-this.preX},i.getDy=function(){return this.y-this.preY},e}(Component),TipManagerForDebug=function(t){function e(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,e.__super.call(this),this._tipBox=new Component,this._tipBox.addChild(this._tipText=new Text),this._tipText.x=this._tipText.y=5,this._tipText.color=e.tipTextColor,this._defaultTipHandler=this.showDefaultTip,Laya.stage.on("showtip",this,this.onStageShowTip),Laya.stage.on("hidetip",this,this.onStageHideTip)}__class(e,"laya.debug.tools.TipManagerForDebug",t);var i=e.prototype;return i.onStageHideTip=function(t){Laya.timer.clear(this,this.showTip),this.closeAll(),this.removeSelf()},i.onStageShowTip=function(t){Laya.timer.once(e.tipDelay,this,this.showTip,[t],!0)},i.showTip=function(t){if("string"==typeof t){var e=String(t);Boolean(e)&&this._defaultTipHandler(e)}else t instanceof laya.utils.Handler?t.run():"function"==typeof t&&t.apply();Laya.stage.on("mousemove",this,this.onStageMouseMove),Laya.stage.on("mousedown",this,this.onStageMouseDown),this.onStageMouseMove(null)},i.onStageMouseDown=function(t){this.closeAll()},i.onStageMouseMove=function(t){this.showToStage(this,e.offsetX,e.offsetY)},i.showToStage=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var s=t.getBounds();t.x=Laya.stage.mouseX+e,t.y=Laya.stage.mouseY+i,t.x+s.width>Laya.stage.width&&(t.x-=s.width+e),t.y+s.height>Laya.stage.height&&(t.y-=s.height+i)},i.closeAll=function(){Laya.timer.clear(this,this.showTip),Laya.stage.off("mousemove",this,this.onStageMouseMove),Laya.stage.off("mousedown",this,this.onStageMouseDown),this.removeChildren()},i.showDisTip=function(t){this.addChild(t),this.showToStage(this),Laya.stage.addChild(this)},i.showDefaultTip=function(t){this._tipText.text=t;var i=this._tipBox.graphics;i.clear(),i.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,e.tipBackColor),this.addChild(this._tipBox),this.showToStage(this),Laya.stage.addChild(this)},__getset(0,i,"defaultTipHandler",function(){return this._defaultTipHandler},function(t){this._defaultTipHandler=t}),e.offsetX=10,e.offsetY=15,e.tipTextColor="#ffffff",e.tipBackColor="#111111",e.tipDelay=200,e}(Component),Button=function(t){function e(t,i){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,e.__super.call(this),this._labelColors=Styles.buttonLabelColors,this._stateNum=Styles.buttonStateNum,void 0===i&&(i=""),this.skin=t,this.label=i}__class(e,"laya.ui.Button",t);var i=e.prototype;return Laya.imps(i,{"laya.ui.ISelect":!0}),i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(e),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},i.createChildren=function(){this.graphics=this._bitmap=new AutoBitmap},i.createText=function(){this._text||(this._text=new Text,this._text.overflow=Text.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},i.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},i.onMouse=function(t){return this.toggle===!1&&this._selected?void 0:"click"===t.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=e.stateMap[t.type]))},i.changeClips=function(){var t=Loader.getRes(this._skin);if(!t)return void console.log("lose skin",this._skin);var e=t.sourceWidth,i=t.sourceHeight/this._stateNum;t.$_GID||(t.$_GID=Utils.getGID());var s=t.$_GID+"-"+this._stateNum,n=AutoBitmap.getCache(s);if(n)this._sources=n;else{if(this._sources=[],1===this._stateNum)this._sources.push(t);else for(var o=0;o<this._stateNum;o++)this._sources.push(Texture.createFromTexture(t,0,i*o,e,i));AutoBitmap.setCache(s,this._sources)}this._autoSize?(this._bitmap.width=this._width||e,this._bitmap.height=this._height||i,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=e)},i.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var t=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[t]),this.label&&(this._text.color=this._labelColors[t],this._strokeColors&&(this._text.strokeColor=this._strokeColors[t]))},i._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},__getset(0,i,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(t){this.createText(),this._text.strokeColor=t}),__getset(0,i,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),__getset(0,i,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this.callLater(this.changeClips),this._setStateChanged())}),__getset(0,i,"state",function(){return this._state},function(t){this._state!=t&&(this._state=t,this._setStateChanged())}),__getset(0,i,"text",function(){return this.createText(),this._text}),__getset(0,i,"stateNum",function(){return this._stateNum},function(t){this._stateNum!=t&&(this._stateNum=1>t?1:t>3?3:t,this.callLater(this.changeClips))}),__getset(0,i,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(t){this._strokeColors=UIUtils.fillArray(Styles.buttonLabelColors,t,String),this._setStateChanged()}),__getset(0,i,"labelColors",function(){return this._labelColors.join(",")},function(t){this._labelColors=UIUtils.fillArray(Styles.buttonLabelColors,t,String),this._setStateChanged()}),__getset(0,i,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),__getset(0,i,"label",function(){return this._text?this._text.text:null},function(t){(this._text||t)&&(this.createText(),this._text.text!=t&&(t&&!this._text.parent&&this.addChild(this._text),this._text.text=(t+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),__getset(0,i,"selected",function(){return this._selected},function(t){this._selected!=t&&(this._selected=t,this.state=this._selected?2:0,this.event("change"))}),__getset(0,i,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(t){this.createText(),this._text.padding=UIUtils.fillArray(Styles.labelPadding,t,Number)}),__getset(0,i,"labelSize",function(){return this.createText(),this._text.fontSize},function(t){this.createText(),this._text.fontSize=t}),__getset(0,i,"labelStroke",function(){return this.createText(),this._text.stroke},function(t){this.createText(),this._text.stroke=t}),__getset(0,i,"labelBold",function(){return this.createText(),this._text.bold},function(t){this.createText(),this._text.bold=t}),__getset(0,i,"labelFont",function(){return this.createText(),this._text.font},function(t){this.createText(),this._text.font=t}),__getset(0,i,"labelAlign",function(){return this.createText(),this._text.align},function(t){this.createText(),this._text.align=t}),__getset(0,i,"clickHandler",function(){return this._clickHandler},function(t){this._clickHandler=t}),__getset(0,i,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t){this._bitmap.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,t,Number)}),__getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this._autoSize&&(this._bitmap.width=e,this._text&&(this._text.width=e))}),__getset(0,i,"height",t.prototype._$get_height,function(e){t.prototype._$set_height.call(this,e),this._autoSize&&(this._bitmap.height=e,this._text&&(this._text.height=e))}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e||"string"==typeof e?this.label=e+"":t.prototype._$set_dataSource.call(this,e)}),__getset(0,i,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(t){t?this._bitmap._offset=UIUtils.fillArray([1,1],t,Number):this._bitmap._offset=[]}),__static(e,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),e}(Component),UIViewBase=function(t){function e(){this.minHandler=null,this.maxHandler=null,this.isFirstShow=!0,this.dis=null,e.__super.call(this),this.dis=this,this.minHandler=new Handler(this,this.close),this.maxHandler=new Handler(this,this.show),this.createPanel(),this.dis&&(this.dis.on("mousedown",this,this.bringToTop),this.dis.cacheAsBitmap=!0)}__class(e,"laya.debug.view.nodeInfo.views.UIViewBase",t);var i=e.prototype;return i.show=function(){DebugInfoLayer.I.setTop(),DebugInfoLayer.I.popLayer.addChild(this.dis),this.isFirstShow&&(this.firstShowFun(),this.isFirstShow=!1)},i.firstShowFun=function(){this.dis.x=.5*(Laya.stage.width-this.dis.width),this.dis.y=.5*(Laya.stage.height-this.dis.height),DisControlTool.intFyDisPos(this.dis)},i.bringToTop=function(){DisControlTool.setTop(this.dis)},i.switchShow=function(){this.dis.parent?this.close():this.show()},i.close=function(){this.dis.removeSelf()},i.createPanel=function(){},i.getInput=function(){var t;return t=new DInput,t.size(200,30),t.fontSize=30,t},i.getButton=function(){var t;return t=new DButton,t.size(40,30),t.fontSize=30,t},e}(Component),Clip=function(t){function e(t,i,s){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._complete=null,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,e.__super.call(this),void 0===i&&(i=1),void 0===s&&(s=1),this._clipX=i,this._clipY=s,this.skin=t}__class(e,"laya.ui.Clip",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},i.dispose=function(){this.destroy(!0),Laya.loader.clearRes(this._skin)},i.createChildren=function(){this.graphics=this._bitmap=new AutoBitmap},i._onDisplay=function(t){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},i.changeClip=function(){if(this._clipChanged=!1,this._skin){var t=Loader.getRes(this._skin);t?this.loadComplete(this._skin,t):Laya.loader.load(this._skin,Handler.create(this,this.loadComplete,[this._skin]))}},i.loadComplete=function(t,e){if(t===this._skin&&e){var i=this._clipWidth||Math.ceil(e.sourceWidth/this._clipX),s=this._clipHeight||Math.ceil(e.sourceHeight/this._clipY),n=this._skin+i+s,o=AutoBitmap.getCache(n);if(o)this._sources=o;else{this._sources=[];for(var r=0;r<this._clipY;r++)for(var a=0;a<this._clipX;a++)this._sources.push(Texture.createFromTexture(e,i*a,s*r,i,s));AutoBitmap.setCache(n,this._sources)}this.index=this._index,this.event("loaded"),this.onCompResize()}},i.play=function(){this._isPlaying=!0,this.index=0,this._index++,Laya.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},i._loop=function(){this._style.visible&&this._sources&&(this.index=this._index,this._index++,this._index>=this._sources.length&&(this._index=0))},i.stop=function(){this._isPlaying=!1,Laya.timer.clear(this,this._loop)},i._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},__getset(0,i,"interval",function(){return this._interval},function(t){this._interval!=t&&(this._interval=t,this._isPlaying&&this.play())}),__getset(0,i,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,t?this._setClipChanged():this._bitmap.source=null)}),__getset(0,i,"sources",function(){return this._sources},function(t){this._sources=t,this.index=this._index,this.event("loaded")}),__getset(0,i,"clipX",function(){return this._clipX},function(t){this._clipX=t||1,this._setClipChanged()}),__getset(0,i,"clipY",function(){return this._clipY},function(t){this._clipY=t||1,this._setClipChanged()}),__getset(0,i,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),__getset(0,i,"clipWidth",function(){return this._clipWidth},function(t){this._clipWidth=t,this._setClipChanged()}),__getset(0,i,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t){this._bitmap.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,t,Number)}),__getset(0,i,"group",function(){return this._group},function(t){t&&this._skin&&Loader.setGroup(this._skin,t),this._group=t}),__getset(0,i,"clipHeight",function(){return this._clipHeight},function(t){this._clipHeight=t,this._setClipChanged()}),__getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this._bitmap.width=e}),__getset(0,i,"height",t.prototype._$get_height,function(e){t.prototype._$set_height.call(this,e),this._bitmap.height=e}),__getset(0,i,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),__getset(0,i,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),__getset(0,i,"index",function(){return this._index},function(t){this._index=t,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[t]),this.event("change")}),__getset(0,i,"autoPlay",function(){return this._autoPlay},function(t){this._autoPlay!=t&&(this._autoPlay=t,t?this.play():this.stop())}),__getset(0,i,"isPlaying",function(){return this._isPlaying},function(t){this._isPlaying=t}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e&&Math.floor(e)==e||"string"==typeof e?this.index=parseInt(e):t.prototype._$set_dataSource.call(this,e)}),__getset(0,i,"bitmap",function(){return this._bitmap}),e}(Component),ColorPicker=function(t){function e(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,e.__super.call(this)}__class(e,"laya.ui.ColorPicker",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._colorPanel&&this._colorPanel.destroy(e),this._colorButton&&this._colorButton.destroy(e),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},i.createChildren=function(){this.addChild(this._colorButton=new Button),this._colorPanel=new Box,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new Sprite),this._colorPanel.addChild(this._colorBlock=new Sprite),this._colorPanel.addChild(this._colorInput=new Input)},i.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},i.onPanelMouseDown=function(t){t.stopPropagation()},i.changePanel=function(){this._panelChanged=!1;var t=this._colorPanel.graphics;t.clear(),t.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,t=this._colorTiles.graphics,t.clear();for(var e=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],i=0;12>i;i++)for(var s=0;20>s;s++){var n=0;n=0===s?e[i]:1===s?0:51*(((3*i+s/6)%3<<0)+3*(i/6<<0))<<16|s%6*51<<8|(i<<0)%6*51;var o=UIUtils.toColor(n);this._colors.push(o);var r=s*this._gridSize,a=i*this._gridSize;t.drawRect(r,a,this._gridSize,this._gridSize,o,"#000000")}},i.onColorButtonClick=function(t){this._colorPanel.parent?this.close():this.open()},i.open=function(){var t=this.localToGlobal(new Point),e=t.x+this._colorPanel.width<=Laya.stage.width?t.x:Laya.stage.width-this._colorPanel.width,i=t.y+this._colorButton.height;i=i+this._colorPanel.height<=Laya.stage.height?i:t.y-this._colorPanel.height,this._colorPanel.pos(e,i),this._colorPanel.zOrder=1001,Laya._currentStage.addChild(this._colorPanel),Laya.stage.on("mousedown",this,this.removeColorBox)},i.close=function(){Laya.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},i.removeColorBox=function(t){this.close()},i.onColorFieldKeyDown=function(t){13==t.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),t.stopPropagation())},i.onColorInputChange=function(t){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},i.onColorTilesClick=function(t){this.selectedColor=this.getColorByMouse(),this.close()},i.onColorTilesMouseMove=function(t){this._colorInput.focus=!1;var e=this.getColorByMouse();this._colorInput.text=e,this.drawBlock(e)},i.getColorByMouse=function(){var t=this._colorTiles.getMousePoint(),e=Math.floor(t.x/this._gridSize),i=Math.floor(t.y/this._gridSize);return this._colors[20*i+e]},i.drawBlock=function(t){var e=this._colorBlock.graphics;e.clear();var i=t?t:"#ffffff";e.drawRect(0,0,50,20,i,this._borderColor),t||e.drawLine(0,0,50,20,"#ff0000")},i.changeColor=function(){var t=this.graphics;t.clear();var e=this._selectedColor||"#000000";t.drawRect(0,0,this._colorButton.width,this._colorButton.height,e)},i._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},__getset(0,i,"inputBgColor",function(){return this._inputBgColor},function(t){this._inputBgColor=t,this._setPanelChanged()}),__getset(0,i,"selectedColor",function(){return this._selectedColor},function(t){this._selectedColor!=t&&(this._selectedColor=this._colorInput.text=t,this.drawBlock(t),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",Event.EMPTY.setTo("change",this,this)))}),__getset(0,i,"skin",function(){return this._colorButton.skin},function(t){this._colorButton.skin=t,this.changeColor()}),__getset(0,i,"bgColor",function(){return this._bgColor},function(t){this._bgColor=t,this._setPanelChanged()}),__getset(0,i,"borderColor",function(){return this._borderColor},function(t){this._borderColor=t,this._setPanelChanged()}),__getset(0,i,"inputColor",function(){return this._inputColor},function(t){this._inputColor=t,this._setPanelChanged()}),e}(Component),ComboBox=function(t){function e(t,i){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,e.__super.call(this),this._itemColors=Styles.comboBoxItemColors,this.skin=t,this.labels=i}__class(e,"laya.ui.ComboBox",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._button&&this._button.destroy(e),this._list&&this._list.destroy(e),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},i.createChildren=function(){this.addChild(this._button=new Button),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},i._createList=function(){this._list=new List,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},i._setListEvent=function(t){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=Handler.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},i.onListDown=function(t){t.stopPropagation()},i.onScrollBarDown=function(t){t.stopPropagation()},i.onButtonMouseDown=function(t){this.callLater(this.switchTo,[!this._isOpen])},i.changeList=function(){this._listChanged=!1;var t=this.width-2,e=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:t,height:this._itemHeight,fontSize:this._itemSize,color:e}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},i.onlistItemMouse=function(t,e){var i=t.type;if("mouseover"===i||"mouseout"===i){if(this._isCustomList)return;var s=this._list.getCell(e);if(!s)return;var n=s.getChildByName("label");n&&("mouseover"===i?(n.bgColor=this._itemColors[0],n.color=this._itemColors[1]):(n.bgColor=null,n.color=this._itemColors[2]))}else"click"===i&&(this.selectedIndex=e,this.isOpen=!1)},i.switchTo=function(t){this.isOpen=t},i.changeOpen=function(){this.isOpen=!this._isOpen},i.changeItem=function(){if(this._itemChanged=!1,this._listHeight=this._labels.length>0?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var t=this._list.graphics;t.clear(),t.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}var e=this._list.array||[];e.length=0;for(var i=0,s=this._labels.length;s>i;i++)e.push({label:this._labels[i]});this._list.height=this._listHeight,this._list.array=e},i.changeSelected=function(){this._button.label=this.selectedLabel},i.removeList=function(t){this.isOpen=!1},__getset(0,i,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this._selectedIndex=t,this._labels.length>0?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[Event.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),__getset(0,i,"measureHeight",function(){return this._button.height}),__getset(0,i,"skin",function(){return this._button.skin},function(t){this._button.skin!=t&&(this._button.skin=t,this._listChanged=!0)}),__getset(0,i,"measureWidth",function(){return this._button.width}),__getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),__getset(0,i,"selectedLabel",function(){return this._selectedIndex>-1&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(t){this.selectedIndex=this._labels.indexOf(t)}),__getset(0,i,"labels",function(){return this._labels.join(",")},function(t){this._labels.length>0&&(this.selectedIndex=-1),t?this._labels=t.split(","):this._labels.length=0,this._itemChanged=!0}),__getset(0,i,"height",t.prototype._$get_height,function(e){t.prototype._$set_height.call(this,e),this._button.height=this._height}),__getset(0,i,"selectHandler",function(){return this._selectHandler},function(t){this._selectHandler=t}),__getset(0,i,"visibleNum",function(){return this._visibleNum},function(t){this._visibleNum=t,this._listChanged=!0}),__getset(0,i,"labelBold",function(){return this._button.text.bold},function(t){this._button.text.bold=t}),__getset(0,i,"itemColors",function(){return String(this._itemColors)},function(t){this._itemColors=UIUtils.fillArray(this._itemColors,t,String),this._listChanged=!0}),__getset(0,i,"itemSize",function(){return this._itemSize},function(t){this._itemSize=t,this._listChanged=!0}),__getset(0,i,"scrollBar",function(){return this.list.scrollBar}),__getset(0,i,"isOpen",function(){return this._isOpen},function(t){if(this._isOpen!=t)if(this._isOpen=t,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var e=this.localToGlobal(Point.TEMP.setTo(0,0)),i=e.y+this._button.height;i=i+this._listHeight<=Laya.stage.height?i:e.y-this._listHeight,this._list.pos(e.x,i),this._list.zOrder=1001,Laya._currentStage.addChild(this._list),Laya.stage.once("mousedown",this,this.removeList),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),__getset(0,i,"scrollBarSkin",function(){return this._scrollBarSkin},function(t){this._scrollBarSkin=t}),__getset(0,i,"sizeGrid",function(){return this._button.sizeGrid},function(t){this._button.sizeGrid=t}),__getset(0,i,"button",function(){return this._button}),__getset(0,i,"list",function(){return this._list||this._createList(),this._list},function(t){t&&(t.removeSelf(),this._isCustomList=!0,this._list=t,this._setListEvent(t),this._itemHeight=t.getCell(0).height+t.spaceY)}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e&&Math.floor(e)==e||"string"==typeof e?this.selectedIndex=parseInt(e):e instanceof Array?this.labels=e.join(","):t.prototype._$set_dataSource.call(this,e)}),__getset(0,i,"labelColors",function(){return this._button.labelColors},function(t){this._button.labelColors!=t&&(this._button.labelColors=t)}),__getset(0,i,"labelPadding",function(){return this._button.text.padding.join(",")},function(t){this._button.text.padding=UIUtils.fillArray(Styles.labelPadding,t,Number)}),__getset(0,i,"labelSize",function(){return this._button.text.fontSize},function(t){this._button.text.fontSize=t}),__getset(0,i,"labelFont",function(){return this._button.text.font},function(t){this._button.text.font=t}),__getset(0,i,"stateNum",function(){return this._button.stateNum},function(t){this._button.stateNum=t}),e}(Component),ScrollBar=function(t){function e(t){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,e.__super.call(this),this._showButtons=UIConfig.showButtons,this._touchScrollEnable=UIConfig.touchScrollEnable,this._mouseWheelEnable=UIConfig.mouseWheelEnable,this.skin=t,this.max=1}__class(e,"laya.ui.ScrollBar",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),this.stopScroll(),this.target=null,t.prototype.destroy.call(this,e),this.upButton&&this.upButton.destroy(e),this.downButton&&this.downButton.destroy(e),this.slider&&this.slider.destroy(e),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},i.createChildren=function(){this.addChild(this.slider=new Slider),this.addChild(this.upButton=new Button),this.addChild(this.downButton=new Button)},i.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},i.onSliderChange=function(){this.value=this.slider.value},i.onButtonMouseDown=function(t){var e=t.currentTarget===this.upButton;this.slide(e),Laya.timer.once(Styles.scrollBarDelayTime,this,this.startLoop,[e]),Laya.stage.once("mouseup",this,this.onStageMouseUp)},i.startLoop=function(t){Laya.timer.frameLoop(1,this,this.slide,[t])},i.slide=function(t){t?this.value-=this._scrollSize:this.value+=this._scrollSize},i.onStageMouseUp=function(t){Laya.timer.clear(this,this.startLoop),Laya.timer.clear(this,this.slide)},i.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions()},i.changeSize=function(){t.prototype.changeSize.call(this),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},i.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),
this.resetButtonPosition()},i.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},i.setScroll=function(t,e,i){this.runCallLater(this.changeSize),this.slider.setSlider(t,e,i),this.slider.bar.visible=e>0,!this._hide&&this.autoHide&&(this.visible=!1)},i.onTargetMouseWheel=function(t){this.value-=t.delta*this._scrollSize,this.target=this._target},i.onTargetMouseDown=function(t){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new Point),this._lastPoint.setTo(Laya.stage.mouseX,Laya.stage.mouseY),Laya.timer.clear(this,this.tweenMove),Tween.clearTween(this),Laya.stage.once("mouseup",this,this.onStageMouseUp2),Laya.stage.once("mouseout",this,this.onStageMouseUp2),Laya.timer.frameLoop(1,this,this.loop)},i.loop=function(){var t=Laya.stage.mouseY,e=Laya.stage.mouseX;if(this._lastOffset=this.isVertical?t-this._lastPoint.y:e-this._lastPoint.x,this._clickOnly){if(!(Math.abs(this._lastOffset*(this.isVertical?Laya.stage._canvasTransform.getScaleY():Laya.stage._canvasTransform.getScaleX()))>1))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=e,this._lastPoint.y=t,0!==this._lastOffset&&(this._checkElastic||(this.elasticDistance>0?this._checkElastic||0==this._lastOffset||(this._lastOffset>0&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},i.onStageMouseUp2=function(t){if(Laya.stage.off("mouseup",this,this.onStageMouseUp2),Laya.stage.off("mouseout",this,this.onStageMouseUp2),Laya.timer.clear(this,this.loop),!this._clickOnly)if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?Tween.to(this,{value:this.min},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver)):this._value>this.max&&Tween.to(this,{value:this.max},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?Laya.stage.mouseY-this._lastPoint.y:Laya.stage.mouseX-this._lastPoint.x);for(var e=0,i=Math.min(this._offsets.length,3),s=0;i>s;s++)e+=this._offsets[this._offsets.length-1-s];if(this._lastOffset=e/i,e=Math.abs(this._lastOffset),2>e)return void this.event("end");e>60&&(this._lastOffset=this._lastOffset>0?60:-60),Laya.timer.frameLoop(1,this,this.tweenMove)}},i.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&Tween.to(this,{alpha:0},500),this.event("end")},i.tweenMove=function(){this._lastOffset*=this.rollRatio;var t=NaN;if(this.elasticDistance>0&&(this._lastOffset>0&&this.value<=this.min?(this._isElastic=!0,t=.5*-(this.min-this.elasticDistance-this.value),this._lastOffset>t&&(this._lastOffset=t)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,t=.5*-(this.max+this.elasticDistance-this.value),this._lastOffset<t&&(this._lastOffset=t))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(Laya.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?Tween.to(this,{value:this.min},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver)):this._value>this.max?Tween.to(this,{value:this.max},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&Tween.to(this,{alpha:0},500)}},i.stopScroll=function(){this.onStageMouseUp2(null),Laya.timer.clear(this,this.tweenMove),Tween.clearTween(this)},__getset(0,i,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),__getset(0,i,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),__getset(0,i,"max",function(){return this.slider.max},function(t){this.slider.max=t}),__getset(0,i,"showButtons",function(){return this._showButtons},function(t){this._showButtons=t,this.callLater(this.changeScrollBar)}),__getset(0,i,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),__getset(0,i,"min",function(){return this.slider.min},function(t){this.slider.min=t}),__getset(0,i,"value",function(){return this._value},function(t){t!==this._value&&(this._isElastic?this._value=t:(this.slider.value=t,this._value=this.slider.value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value))}),__getset(0,i,"isVertical",function(){return this.slider.isVertical},function(t){this.slider.isVertical=t}),__getset(0,i,"sizeGrid",function(){return this.slider.sizeGrid},function(t){this.slider.sizeGrid=t}),__getset(0,i,"scrollSize",function(){return this._scrollSize},function(t){this._scrollSize=t}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e||"string"==typeof e?this.value=Number(e):t.prototype._$set_dataSource.call(this,e)}),__getset(0,i,"thumbPercent",function(){return this._thumbPercent},function(t){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),t=t>=1?.99:t,this._thumbPercent=t,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*t,Styles.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*t,Styles.scrollBarMinNum))}),__getset(0,i,"target",function(){return this._target},function(t){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),this._target=t,t&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),__getset(0,i,"hide",function(){return this._hide},function(t){this._hide=t,this.visible=!t}),__getset(0,i,"touchScrollEnable",function(){return this._touchScrollEnable},function(t){this._touchScrollEnable=t,this.target=this._target}),__getset(0,i,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(t){this._mouseWheelEnable=t}),__getset(0,i,"tick",function(){return this.slider.tick},function(t){this.slider.tick=t}),e}(Component),Slider=function(t){function e(t){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,e.__super.call(this),this.skin=t}__class(e,"laya.ui.Slider",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._bg&&this._bg.destroy(e),this._bar&&this._bar.destroy(e),this._progress&&this._progress.destroy(e),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},i.createChildren=function(){this.addChild(this._bg=new Image),this.addChild(this._bar=new Button)},i.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},i.onBarMouseDown=function(t){this._globalSacle||(this._globalSacle=new Point),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=Laya.stage.mouseX,this._ty=Laya.stage.mouseY,Laya.stage.on("mousemove",this,this.mouseMove),Laya.stage.once("mouseup",this,this.mouseUp),this.showValueText()},i.showValueText=function(){if(this.showLabel){var t=laya.ui.Slider.label;this.addChild(t),t.textField.changeText(this._value+""),this.isVertical?(t.x=this._bar.x+20,t.y=.5*(this._bar.height-t.height)+this._bar.y):(t.y=this._bar.y-20,t.x=.5*(this._bar.width-t.width)+this._bar.x)}},i.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},i.mouseUp=function(t){Laya.stage.off("mousemove",this,this.mouseMove),this.sendChangeEvent("changed"),this.hideValueText()},i.mouseMove=function(t){var e=this._value;this.isVertical?(this._bar.y+=(Laya.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(Laya.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=Laya.stage.mouseX,this._ty=Laya.stage.mouseY;var i=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*i)/i,this._value!=e&&this.sendChangeEvent(),this.showValueText()},i.sendChangeEvent=function(t){void 0===t&&(t="change"),this.event(t),this.changeHandler&&this.changeHandler.runWith(this._value)},i.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},i.changeSize=function(){t.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},i.setSlider=function(t,e,i){this._value=-1,this._min=t,this._max=e>t?e:t,this.value=t>i?t:i>e?e:i},i.changeValue=function(){var t=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*t)/t,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var e=this._max-this._min;0===e&&(e=1),this.isVertical?(this._bar.y=(this._value-this._min)/e*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/e*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},i.onBgMouseDown=function(t){var e=this._bg.getMousePoint();this.isVertical?this.value=e.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=e.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},__getset(0,i,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),__getset(0,i,"skin",function(){return this._skin},function(t){if(this._skin!=t){this._skin=t,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var e=this._skin.replace(".png","$progress.png");Loader.getRes(e)&&(this._progress||(this.addChild(this._progress=new Image),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=e),this.setBarPoint(),this.callLater(this.changeValue)}}),__getset(0,i,"allowClickBack",function(){return this._allowClickBack},function(t){this._allowClickBack!=t&&(this._allowClickBack=t,t?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),__getset(0,i,"max",function(){return this._max},function(t){this._max!=t&&(this._max=t,this.callLater(this.changeValue))}),__getset(0,i,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),__getset(0,i,"tick",function(){return this._tick},function(t){this._tick!=t&&(this._tick=t,this.callLater(this.changeValue))}),__getset(0,i,"sizeGrid",function(){return this._bg.sizeGrid},function(t){this._bg.sizeGrid=t,this._bar.sizeGrid=t}),__getset(0,i,"min",function(){return this._min},function(t){this._min!=t&&(this._min=t,this.callLater(this.changeValue))}),__getset(0,i,"value",function(){return this._value},function(t){if(this._value!=t){var e=this._value;this._value=t,this.changeValue(),this._value!=e&&this.sendChangeEvent()}}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e||"string"==typeof e?this.value=Number(e):t.prototype._$set_dataSource.call(this,e)}),__getset(0,i,"bar",function(){return this._bar}),__static(e,["label",function(){return this.label=new Label}]),e}(Component),Image=function(t){function e(t){this._bitmap=null,this._skin=null,this._group=null,e.__super.call(this),this.skin=t}__class(e,"laya.ui.Image",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null},i.dispose=function(){this.destroy(!0),Laya.loader.clearRes(this._skin)},i.createChildren=function(){this.graphics=this._bitmap=new AutoBitmap,this._bitmap.autoCacheCmd=!1},i.setSource=function(t,e){t===this._skin&&e&&(this.source=e,this.onCompResize())},__getset(0,i,"source",function(){return this._bitmap.source},function(t){this._bitmap&&(this._bitmap.source=t,this.event("loaded"),this.repaint())}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"string"==typeof e?this.skin=e:t.prototype._$set_dataSource.call(this,e)}),__getset(0,i,"measureHeight",function(){return this._bitmap.height}),__getset(0,i,"skin",function(){return this._skin},function(t){if(this._skin!=t)if(this._skin=t,t){var e=Loader.getRes(t);e?(this.source=e,this.onCompResize()):Laya.loader.load(this._skin,Handler.create(this,this.setSource,[this._skin]),null,"image",1,!0,this._group)}else this.source=null}),__getset(0,i,"group",function(){return this._group},function(t){t&&this._skin&&Loader.setGroup(this._skin,t),this._group=t}),__getset(0,i,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t){this._bitmap.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,t,Number)}),__getset(0,i,"measureWidth",function(){return this._bitmap.width}),__getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this._bitmap.width=0==e?1e-7:e}),__getset(0,i,"height",t.prototype._$get_height,function(e){t.prototype._$set_height.call(this,e),this._bitmap.height=0==e?1e-7:e}),e}(Component),Label=function(t){function e(t){this._tf=null,e.__super.call(this),void 0===t&&(t=""),Font.defaultColor=Styles.labelColor,this.text=t}__class(e,"laya.ui.Label",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._tf=null},i.createChildren=function(){this.addChild(this._tf=new Text)},i.changeText=function(t){this._tf.changeText(t)},__getset(0,i,"padding",function(){return this._tf.padding.join(",")},function(t){this._tf.padding=UIUtils.fillArray(Styles.labelPadding,t,Number)}),__getset(0,i,"bold",function(){return this._tf.bold},function(t){this._tf.bold=t}),__getset(0,i,"align",function(){return this._tf.align},function(t){this._tf.align=t}),__getset(0,i,"text",function(){return this._tf.text},function(t){this._tf.text!=t&&(t&&(t=UIUtils.adptString(t+"")),this._tf.text=t,this.event("change"))}),__getset(0,i,"italic",function(){return this._tf.italic},function(t){this._tf.italic=t}),__getset(0,i,"wordWrap",function(){return this._tf.wordWrap},function(t){this._tf.wordWrap=t}),__getset(0,i,"font",function(){return this._tf.font},function(t){this._tf.font=t}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e||"string"==typeof e?this.text=e+"":t.prototype._$set_dataSource.call(this,e)}),__getset(0,i,"color",function(){return this._tf.color},function(t){this._tf.color=t}),__getset(0,i,"valign",function(){return this._tf.valign},function(t){this._tf.valign=t}),__getset(0,i,"leading",function(){return this._tf.leading},function(t){this._tf.leading=t}),__getset(0,i,"fontSize",function(){return this._tf.fontSize},function(t){this._tf.fontSize=t}),__getset(0,i,"bgColor",function(){return this._tf.bgColor},function(t){this._tf.bgColor=t}),__getset(0,i,"borderColor",function(){return this._tf.borderColor},function(t){this._tf.borderColor=t}),__getset(0,i,"stroke",function(){return this._tf.stroke},function(t){this._tf.stroke=t}),__getset(0,i,"strokeColor",function(){return this._tf.strokeColor},function(t){this._tf.strokeColor=t}),__getset(0,i,"textField",function(){return this._tf}),__getset(0,i,"measureWidth",function(){return this._tf.width}),__getset(0,i,"measureHeight",function(){return this._tf.height}),__getset(0,i,"width",function(){return this._width||this._tf.text?t.prototype._$get_width.call(this):0},function(e){t.prototype._$set_width.call(this,e),this._tf.width=e}),__getset(0,i,"height",function(){return this._height||this._tf.text?t.prototype._$get_height.call(this):0},function(e){t.prototype._$set_height.call(this,e),this._tf.height=e}),__getset(0,i,"overflow",function(){return this._tf.overflow},function(t){this._tf.overflow=t}),__getset(0,i,"underline",function(){return this._tf.underline},function(t){this._tf.underline=t}),__getset(0,i,"underlineColor",function(){return this._tf.underlineColor},function(t){this._tf.underlineColor=t}),e}(Component),ProgressBar=function(t){function e(t){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,e.__super.call(this),this.skin=t}__class(e,"laya.ui.ProgressBar",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._bg&&this._bg.destroy(e),this._bar&&this._bar.destroy(e),this._bg=this._bar=null,this.changeHandler=null},i.createChildren=function(){this.addChild(this._bg=new Image),this.addChild(this._bar=new Image),this._bar._bitmap.autoCacheCmd=!1},i.changeValue=function(){if(this.sizeGrid){var t=this.sizeGrid.split(","),e=Number(t[3]),i=Number(t[1]),s=this.width-e-i,n=s*this._value;this._bar.width=e+i+n,this._bar.visible=this._bar.width>e+i}else this._bar.width=this.width*this._value},__getset(0,i,"measureHeight",function(){return this._bg.height}),__getset(0,i,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),__getset(0,i,"measureWidth",function(){return this._bg.width}),__getset(0,i,"height",t.prototype._$get_height,function(e){t.prototype._$set_height.call(this,e),this._bg.height=this._height,this._bar.height=this._height}),__getset(0,i,"bar",function(){return this._bar}),__getset(0,i,"value",function(){return this._value},function(t){this._value!=t&&(t=t>1?1:0>t?0:t,this._value=t,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(t))}),__getset(0,i,"bg",function(){return this._bg}),__getset(0,i,"sizeGrid",function(){return this._bg.sizeGrid},function(t){this._bg.sizeGrid=this._bar.sizeGrid=t}),__getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this._bg.width=this._width,this.callLater(this.changeValue)}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e||"string"==typeof e?this.value=Number(e):t.prototype._$set_dataSource.call(this,e)}),e}(Component),TipManager=function(t){function e(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,e.__super.call(this),this._tipBox=new Component,this._tipBox.addChild(this._tipText=new Text),this._tipText.x=this._tipText.y=5,this._tipText.color=e.tipTextColor,this._defaultTipHandler=this._showDefaultTip,Laya.stage.on("showtip",this,this._onStageShowTip),Laya.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}__class(e,"laya.ui.TipManager",t);var i=e.prototype;return i._onStageHideTip=function(t){Laya.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},i._onStageShowTip=function(t){Laya.timer.once(e.tipDelay,this,this._showTip,[t],!0)},i._showTip=function(t){if("string"==typeof t){var e=String(t);Boolean(e)&&this._defaultTipHandler(e)}else t instanceof laya.utils.Handler?t.run():"function"==typeof t&&t.apply();Laya.stage.on("mousemove",this,this._onStageMouseMove),Laya.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},i._onStageMouseDown=function(t){this.closeAll()},i._onStageMouseMove=function(t){this._showToStage(this,e.offsetX,e.offsetY)},i._showToStage=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var s=t.getBounds();t.x=Laya.stage.mouseX+e,t.y=Laya.stage.mouseY+i,t.x+s.width>Laya.stage.width&&(t.x-=s.width+e),t.y+s.height>Laya.stage.height&&(t.y-=s.height+i)},i.closeAll=function(){Laya.timer.clear(this,this._showTip),Laya.stage.off("mousemove",this,this._onStageMouseMove),Laya.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},i.showDislayTip=function(t){this.addChild(t),this._showToStage(this),Laya._currentStage.addChild(this)},i._showDefaultTip=function(t){this._tipText.text=t;var i=this._tipBox.graphics;i.clear(),i.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,e.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),Laya._currentStage.addChild(this)},__getset(0,i,"defaultTipHandler",function(){return this._defaultTipHandler},function(t){this._defaultTipHandler=t}),e.offsetX=10,e.offsetY=15,e.tipTextColor="#ffffff",e.tipBackColor="#111111",e.tipDelay=200,e}(Component),DButton=function(t){function e(){e.__super.call(this),this.bgColor="#ffff00",this.wordWrap=!1,this.mouseEnabled=!0}return __class(e,"laya.debug.tools.debugUI.DButton",t),e}(Text),Input=function(t){function e(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",e.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=Text.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}__class(e,"laya.display.Input",t);var i=e.prototype;return i.setSelection=function(t,e){laya.display.Input.inputElement.selectionStart=t,laya.display.Input.inputElement.selectionEnd=e},i._onUnDisplay=function(t){this.focus=!1},i._onMouseDown=function(t){this.focus=!0},i.render=function(t,e,i){laya.display.Sprite.prototype.render.call(this,t,e,i)},i._syncInputTransform=function(){var t=this.nativeInput,i=Utils.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),s=this._width-this.padding[1]-this.padding[3],n=this._height-this.padding[0]-this.padding[2];Render.isConchApp?(t.setScale(i.scaleX,i.scaleY),t.setSize(s,n),t.setPos(i.x,i.y)):(e.inputContainer.style.transform=e.inputContainer.style.webkitTransform="scale("+i.scaleX+","+i.scaleY+") rotate("+Laya.stage.canvasDegree+"deg)",t.style.width=s+"px",t.style.height=n+"px",e.inputContainer.style.left=i.x+"px",e.inputContainer.style.top=i.y+"px")},i.select=function(){this.nativeInput.select()},i._setInputMethod=function(){e.input.parentElement&&e.inputContainer.removeChild(e.input),e.area.parentElement&&e.inputContainer.removeChild(e.area),e.inputElement=this._multiline?e.area:e.input,e.inputContainer.appendChild(e.inputElement)},i._focusIn=function(){laya.display.Input.isInputting=!0;var t=this.nativeInput;this._focus=!0;var e=t.style;e.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),t.readOnly=!this._editable,Render.isConchApp&&t.setForbidEdit(!this._editable),t.maxLength=this._maxChars;this.padding;t.type=this._type,t.value=this._content,t.placeholder=this._prompt,Laya.stage.off("keydown",this,this._onKeyDown),Laya.stage.on("keydown",this,this._onKeyDown),Laya.stage.focus=this,this.event("focus"),Browser.onPC&&t.focus();this._text;this._text=null,this.typeset(),t.setColor(this._originColor),t.setFontSize(this.fontSize),t.setFontFace(this.font),Render.isConchApp&&t.setMultiAble&&t.setMultiAble(this._multiline),e.lineHeight=this.leading+this.fontSize+"px",e.fontStyle=this.italic?"italic":"normal",e.fontWeight=this.bold?"bold":"normal",e.textAlign=this.align,e.padding="0 0",this._syncInputTransform(),!Render.isConchApp&&Browser.onPC&&Laya.timer.frameLoop(1,this,this._syncInputTransform)},i._setPromptColor=function(){e.promptStyleDOM=Browser.getElementById("promptStyle"),e.promptStyleDOM||(e.promptStyleDOM=Browser.createElement("style"),e.promptStyleDOM.setAttribute("id","promptStyle"),Browser.document.head.appendChild(e.promptStyleDOM)),e.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},i._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(t.prototype._$set_text.call(this,this._content),t.prototype._$set_color.call(this,this._originColor)):(t.prototype._$set_text.call(this,this._prompt),t.prototype._$set_color.call(this,this._promptColor)),Laya.stage.off("keydown",this,this._onKeyDown),Laya.stage.focus=null,this.event("blur"),Render.isConchApp&&this.nativeInput.blur(),Browser.onPC&&Laya.timer.clear(this,this._syncInputTransform)},i._onKeyDown=function(t){13===t.keyCode&&(Browser.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},i.changeText=function(e){this._content=e,this._focus?(this.nativeInput.value=e||"",this.event("change")):t.prototype.changeText.call(this,e)},__getset(0,i,"color",t.prototype._$get_color,function(e){this._focus&&this.nativeInput.setColor(e),t.prototype._$set_color.call(this,this._content?e:this._promptColor),this._originColor=e}),__getset(0,i,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(t){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),__getset(0,i,"multiline",function(){return this._multiline},function(t){this._multiline=t,this.valign=t?"top":"middle"}),__getset(0,i,"maxChars",function(){return this._maxChars},function(t){0>=t&&(t=1e5),this._maxChars=t}),__getset(0,i,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(e){t.prototype._$set_color.call(this,this._originColor),e+="",this._focus?(this.nativeInput.value=e||"",this.event("change")):(this._multiline||(e=e.replace(/\r?\n/g,"")),this._content=e,e?t.prototype._$set_text.call(this,e):(t.prototype._$set_text.call(this,this._prompt),t.prototype._$set_color.call(this,this.promptColor)))}),__getset(0,i,"nativeInput",function(){return this._multiline?e.area:e.input}),__getset(0,i,"prompt",function(){return this._prompt},function(e){!this._text&&e&&t.prototype._$set_color.call(this,this._promptColor),this.promptColor=this._promptColor,this._text?t.prototype._$set_text.call(this,this._text==this._prompt?e:this._text):t.prototype._$set_text.call(this,e),this._prompt=Text.langPacks&&Text.langPacks[e]?Text.langPacks[e]:e}),__getset(0,i,"focus",function(){return this._focus},function(t){var i=this.nativeInput;this._focus!==t&&(t?(i.target?i.target._focusOut():this._setInputMethod(),i.target=this,this._focusIn()):(i.target=null,this._focusOut(),i.blur(),Render.isConchApp?i.setPos(-1e4,-1e4):e.inputContainer.contains(i)&&e.inputContainer.removeChild(i)))}),__getset(0,i,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(t){t?(t="[^"+t+"]",t.indexOf("^^")>-1&&(t=t.replace("^^","")),this._restrictPattern=new RegExp(t,"g")):this._restrictPattern=null}),__getset(0,i,"editable",function(){return this._editable},function(t){this._editable=t,Render.isConchApp&&e.input.setForbidEdit(!t)}),__getset(0,i,"promptColor",function(){return this._promptColor},function(e){this._promptColor=e,this._content||t.prototype._$set_color.call(this,e)}),__getset(0,i,"type",function(){return this._type},function(t){"password"==t?this._getCSSStyle().password=!0:this._getCSSStyle().password=!1,this._type=t}),__getset(0,i,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(t){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),__getset(0,i,"asPassword",function(){return this._getCSSStyle().password},function(t){this._getCSSStyle().password=t,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),e.__init__=function(){e._createInputElement(),Browser.onMobile&&Render.canvas.addEventListener(e.IOS_IFRAME?"click":"touchend",e._popupInputMethod)},e._popupInputMethod=function(t){if(laya.display.Input.isInputting){var e=laya.display.Input.inputElement;e.focus()}},e._createInputElement=function(){e._initInput(e.area=Browser.createElement("textarea")),e._initInput(e.input=Browser.createElement("input")),e.inputContainer=Browser.createElement("div"),e.inputContainer.style.position="absolute",e.inputContainer.style.zIndex=1e5,Browser.container.appendChild(e.inputContainer),e.inputContainer.setPos=function(t,i){e.inputContainer.style.left=t+"px",e.inputContainer.style.top=i+"px"}},e._initInput=function(t){var i=t.style;i.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",i.resize="none",i.backgroundColor="transparent",i.border="none",i.outline="none",i.zIndex=1,t.addEventListener("input",e._processInputting),t.addEventListener("mousemove",e._stopEvent),t.addEventListener("mousedown",e._stopEvent),t.addEventListener("touchmove",e._stopEvent),t.setFontFace=function(e){t.style.fontFamily=e},Render.isConchApp||(t.setColor=function(e){t.style.color=e},t.setFontSize=function(e){t.style.fontSize=e+"px"})},e._processInputting=function(t){var e=laya.display.Input.inputElement.target;if(e){var i=laya.display.Input.inputElement.value;e._restrictPattern&&(i=i.replace(/\u2006|\x27/g,""),e._restrictPattern.test(i)&&(i=i.replace(e._restrictPattern,""),laya.display.Input.inputElement.value=i)),e._text=i,e.event("input")}},e._stopEvent=function(t){"touchmove"==t.type&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},e.TYPE_TEXT="text",e.TYPE_PASSWORD="password",e.TYPE_EMAIL="email",e.TYPE_URL="url",e.TYPE_NUMBER="number",e.TYPE_RANGE="range",e.TYPE_DATE="date",e.TYPE_MONTH="month",e.TYPE_WEEK="week",e.TYPE_TIME="time",e.TYPE_DATE_TIME="datetime",e.TYPE_DATE_TIME_LOCAL="datetime-local",e.TYPE_SEARCH="search",e.input=null,e.area=null,e.inputElement=null,e.inputContainer=null,e.confirmButton=null,e.promptStyleDOM=null,e.inputHeight=45,e.isInputting=!1,e.stageMatrix=null,__static(e,["IOS_IFRAME",function(){return this.IOS_IFRAME=Browser.onIOS&&Browser.window.top!=Browser.window.self}]),e}(Text),ReCacheRecInfo=function(t){function e(){this.isWorking=!1,this.count=0,this.mTime=0,e.__super.call(this),this.txt.fontSize=12}__class(e,"laya.debug.view.nodeInfo.recinfos.ReCacheRecInfo",t);var i=e.prototype;return i.addCount=function(t){void 0===t&&(t=0),this.count++,this.mTime+=t,this.isWorking||(this.working=!0)},i.updates=function(){this._tar.displayedInStage||(this.working=!1,this.removeSelf()),this.txt.text=ClassTool.getNodeClassAndName(this._tar)+"\nreCache:"+this.count+"\ntime:"+this.mTime,this.count>0?(this.fresh(),Laya.timer.clear(this,this.removeSelfLater)):(this.working=!1,Laya.timer.once(3e3,this,this.removeSelfLater)),this.count=0,this.mTime=0},i.removeSelfLater=function(){this.working=!1,this.removeSelf()},__getset(0,i,"working",null,function(t){this.isWorking=t,t?Laya.timer.loop(1e3,this,this.updates):Laya.timer.clear(this,this.updates)}),e.showTime=3e3,e}(NodeRecInfo),Animation$1=function(t){function e(){this._frames=null,
this._url=null,e.__super.call(this),this._setControlNode(this)}__class(e,"laya.display.Animation",t,"Animation$1");var i=e.prototype;return i.destroy=function(t){void 0===t&&(t=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,t),this._frames=null,this._labels=null},i.play=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=!0),void 0===i&&(i=""),i&&this._setFramesFromCache(i),this._isPlaying=!0,this.index="string"==typeof t?this._getFrameByLabel(t):t,this.loop=e,this._actionName=i,this._isReverse=1==this.wrapMode,this._frames&&this.interval>0&&this.timerLoop(this.interval,this,this._frameLoop,null,!0)},i._setFramesFromCache=function(t){var i=""!=t;if(this._url&&(t=this._url+"#"+t),t&&e.framesMap[t]){var s;return s=e.framesMap[t],s instanceof Array?(this._frames=e.framesMap[t],this._count=this._frames.length):(s.nodeRoot&&(e.framesMap[t]=this._parseGraphicAnimationByData(s),s=e.framesMap[t]),this._frames=s.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=s.interval),this._labels=this._copyLabels(s.labels)),!0}return i&&console.log("ani not found:",t),!1},i._copyLabels=function(t){if(!t)return null;var e;e={};var i;for(i in t)e[i]=Utils.copyArray([],t[i]);return e},i._frameLoop=function(){this._style.visible&&this._style.alpha>.01&&t.prototype._frameLoop.call(this)},i._displayToIndex=function(t){this._frames&&(this.graphics=this._frames[t])},i.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},i.loadImages=function(t,i){return void 0===i&&(i=""),this._url="",this._setFramesFromCache(i)||(this.frames=e.framesMap[i]?e.framesMap[i]:e.createFrames(t,i)),this},i.loadAtlas=function(t,i,s){function n(n){t===n&&(o.frames=e.framesMap[s]?e.framesMap[s]:e.createFrames(t,s),i&&i.run())}void 0===s&&(s=""),this._url="";var o=this;return o._setFramesFromCache(s)||(Loader.getAtlas(t)?n(t):Laya.loader.load(t,Handler.create(null,n,[t]),null,"atlas")),this},i.loadAnimation=function(t,e,i){this._url=t;var s=this;return this._actionName||(this._actionName=""),s._setFramesFromCache("")?(s._setFramesFromCache(this._actionName),e&&e.run()):!i||Loader.getAtlas(i)?this._loadAnimationData(t,e,i):Laya.loader.load(i,Handler.create(this,this._loadAnimationData,[t,e,i]),null,"atlas"),this},i._loadAnimationData=function(t,i,s){function n(s){if(Loader.getRes(s)&&t===s){var n;if(e.framesMap[t+"#"])r._setFramesFromCache(o._actionName),o.index=0,o._checkResumePlaying();else{var a=r._parseGraphicAnimation(Loader.getRes(t));if(!a)return;var h,l=a.animationList,c=0,u=l.length;for(c=0;u>c;c++)n=l[c],e.framesMap[t+"#"+n.name]=n,h||(h=n);h&&(e.framesMap[t+"#"]=h,r._setFramesFromCache(o._actionName),o.index=0),o._checkResumePlaying()}i&&i.run()}}var o=this;if(s&&!Loader.getAtlas(s))return void console.warn("atlas load fail:"+s);var r=this;Loader.getRes(t)?n(t):Laya.loader.load(t,Handler.create(null,n,[t]),null,"json"),Loader.clearRes(t)},i._parseGraphicAnimation=function(t){return GraphicAnimation.parseAnimationData(t)},i._parseGraphicAnimationByData=function(t){return GraphicAnimation.parseAnimationByData(t)},__getset(0,i,"frames",function(){return this._frames},function(t){this._frames=t,t&&(this._count=t.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),__getset(0,i,"autoPlay",null,function(t){t?this.play():this.stop()}),__getset(0,i,"source",null,function(t){t.indexOf(".ani")>-1?this.loadAnimation(t):t.indexOf(".json")>-1||t.indexOf("als")>-1||t.indexOf("atlas")>-1?this.loadAtlas(t):this.loadImages(t.split(","))}),__getset(0,i,"autoAnimation",null,function(t){this.play(0,!0,t)}),e.createFrames=function(t,i){var s;if("string"==typeof t){var n=Loader.getAtlas(t);if(n&&n.length){s=[];for(var o=0,r=n.length;r>o;o++){var a=new Graphics;a.drawTexture(Loader.getRes(n[o]),0,0),s.push(a)}}}else if(t instanceof Array)for(s=[],o=0,r=t.length;r>o;o++)a=new Graphics,a.loadImage(t[o],0,0),s.push(a);return i&&(e.framesMap[i]=s),s},e.clearCache=function(t){var i,s=e.framesMap,n=t+"#";for(i in s)i!==t&&0!=i.indexOf(n)||delete e.framesMap[i]},e.framesMap={},e}(AnimationPlayerBase),FrameAnimation=function(t){function e(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,e.__super.call(this),null==e._sortIndexFun&&(e._sortIndexFun=MathUtil.sortByKey("index",!1,!0))}__class(e,"laya.display.FrameAnimation",t);var i=e.prototype;return i._setUp=function(t,e){this._labels=null,this._animationNewFrames=null,this._targetDic=t,this._animationData=e,this.interval=1e3/e.frameRate,e.parsed?(this._count=e.count,this._labels=e.labels,this._animationNewFrames=e.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),e.parsed=!0,e.labels=this._labels,e.count=this._count,e.animationNewFrames=this._animationNewFrames},i.clear=function(){t.prototype.clear.call(this),this._targetDic=null,this._animationData=null},i._displayToIndex=function(t){if(this._animationData){0>t&&(t=0),t>this._count&&(t=this._count);var e=this._animationData.nodes,i=0,s=e.length;for(i=0;s>i;i++)this._displayNodeToFrame(e[i],t)}},i._displayNodeToFrame=function(t,e,i){i||(i=this._targetDic);var s=i[t.target];if(s){var n,o,r,a=t.frames,h=t.keys,l=0,c=h.length;for(l=0;c>l;l++)n=h[l],o=a[n],r=o.length>e?o[e]:o[o.length-1],s[n]=r}},i._calculateDatas=function(){if(this._animationData){var t,e=this._animationData.nodes,i=0,s=e.length;for(this._count=0,i=0;s>i;i++)t=e[i],this._calculateNodeKeyFrames(t);this._count+=1}},i._calculateNodeKeyFrames=function(t){var i,s,n=t.keyframes,o=t.target;t.frames||(t.frames={}),t.keys?t.keys.length=0:t.keys=[],t.initValues||(t.initValues={});for(i in n)s=n[i],t.frames[i]||(t.frames[i]=[]),this._targetDic&&this._targetDic[o]&&(t.initValues[i]=this._targetDic[o][i]),s.sort(e._sortIndexFun),t.keys.push(i),this._calculateNodePropFrames(s,t.frames[i],i,o)},i.resetToInitState=function(){if(this._targetDic&&this._animationData){var t,e,i=this._animationData.nodes,s=0,n=i.length;for(s=0;n>s;s++)if(t=i[s],e=t.initValues){var o=this._targetDic[t.target];if(o){var r;for(r in e)o[r]=e[r]}}}},i._calculateNodePropFrames=function(t,e,i,s){var n=0,o=t.length-1;for(e.length=t[o].index+1,n=0;o>n;n++)this._dealKeyFrame(t[n]),this._calculateFrameValues(t[n],t[n+1],e);0==o&&(e[0]=t[0].value,this._animationNewFrames&&(this._animationNewFrames[t[0].index]=!0)),this._dealKeyFrame(t[n])},i._dealKeyFrame=function(t){t.label&&""!=t.label&&this.addLabel(t.label,t.index)},i._calculateFrameValues=function(t,e,i){var s,n=0,o=t.index,r=e.index,a=t.value,h=e.value-t.value,l=r-o;if(r>this._count&&(this._count=r),t.tween)for(s=Ease[t.tweenMethod],null==s&&(s=Ease.linearNone),n=o;r>n;n++)i[n]=s(n-o,a,h,l),this._animationNewFrames&&(this._animationNewFrames[n]=!0);else for(n=o;r>n;n++)i[n]=a;this._animationNewFrames&&(this._animationNewFrames[t.index]=!0,this._animationNewFrames[e.index]=!0),i[e.index]=e.value},e._sortIndexFun=null,e}(AnimationPlayerBase),HTMLImage=function(t){function e(t,i){this._recreateLock=!1,this._needReleaseAgain=!1,e.__super.call(this),this._init_(t,i)}__class(e,"laya.resource.HTMLImage",t);var i=e.prototype;return i._init_=function(t,e){this._src=t,this._source=new Browser.window.Image,e&&(e.onload&&(this.onload=e.onload),e.onerror&&(this.onerror=e.onerror),e.onCreate&&e.onCreate(this)),0!=t.indexOf("data:image")&&(this._source.crossOrigin=""),t&&(this._source.src=t)},i.recreateResource=function(){var t=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.startCreate(),this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0,this.startCreate();var e=this;this._source=new Browser.window.Image,this._source.crossOrigin="",this._source.onload=function(){return e._needReleaseAgain?(e._needReleaseAgain=!1,e._source.onload=null,void(e._source=null)):(e._source.onload=null,e.memorySize=t._w*t._h*4,e._recreateLock=!1,void e.completeCreate())},this._source.src=this._src}},i.detoryResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},i.onresize=function(){this._w=this._source.width,this._h=this._source.height},__getset(0,i,"onload",null,function(t){var e=this;this._onload=t,this._source&&(this._source.onload=null!=this._onload?function(){e.onresize(),e._onload()}:null)}),__getset(0,i,"onerror",null,function(t){var e=this;this._onerror=t,this._source&&(this._source.onerror=null!=this._onerror?function(){e._onerror()}:null)}),e.create=function(t,i){return new e(t,i)},e}(FileBitmap),View=function(t){function e(){this._idMap=null,this._aniList=null,e.__super.call(this)}__class(e,"laya.ui.View",t);var i=e.prototype;return i.createView=function(t){if(t.animations&&!this._idMap&&(this._idMap={}),e.createComp(t,this,this),t.animations){var i,s,n=[],o=t.animations,r=0,a=o.length;for(r=0;a>r;r++){switch(i=new FrameAnimation,s=o[r],i._setUp(this._idMap,s),this[s.name]=i,i._setControlNode(this),s.action){case 1:i.play(0,!1);break;case 2:i.play(0,!0)}n.push(i)}this._aniList=n}this._width>0&&null==t.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},i.loadUI=function(t){var i=e.uiMap[t];i&&this.createView(i)},i.destroy=function(t){void 0===t&&(t=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,laya.ui.Component.prototype.destroy.call(this,t)},e._regs=function(){var t;for(t in e.uiClassMap)ClassUtils.regClass(t,e.uiClassMap[t])},e.createComp=function(t,i,s){if(i=i||e.getCompInstance(t),!i)return console.warn("can not create:"+t.type),null;var n=t.child;if(n)for(var o=0,r=n.length;r>o;o++){var a=n[o];if(!i.hasOwnProperty("itemRender")||"render"!=a.props.name&&"render"!==a.props.renderType)if("Graphic"==a.type)ClassUtils.addGraphicsToSprite(a,i);else if(ClassUtils.isDrawType(a.type))ClassUtils.addGraphicToSprite(a,i,!0);else{var h=e.createComp(a,null,s);"Script"==a.type?"owner"in h?h.owner=i:"target"in h&&(h.target=i):"mask"==a.props.renderType||"mask"==a.props.name?i.mask=h:h instanceof laya.display.Sprite&&i.addChild(h)}else i.itemRender=a}var l=t.props;for(var c in l){var u=l[c];e.setCompValue(i,c,u,s)}return Laya.__typeof(i,"laya.ui.IItem")&&i.initItems(),t.compId&&s&&s._idMap&&(s._idMap[t.compId]=i),i},e.setCompValue=function(t,e,i,s){"var"===e&&s?s[i]=t:t[e]="true"===i?!0:"false"===i?!1:i},e.getCompInstance=function(t){var i,s=t.props?t.props.runtime:null;return i=s?e.viewClassMap[s]||e.uiClassMap[s]||Laya.__classmap[s]:e.uiClassMap[t.type],t.props&&t.props.hasOwnProperty("renderType")&&"instance"==t.props.renderType?i.instance:i?new i:null},e.regComponent=function(t,i){e.uiClassMap[t]=i,ClassUtils.regClass(t,i)},e.regViewRuntime=function(t,i){e.viewClassMap[t]=i},e.uiMap={},e.viewClassMap={},__static(e,["uiClassMap",function(){return this.uiClassMap={ViewStack:ViewStack,LinkButton:Button,TextArea:TextArea,ColorPicker:ColorPicker,Box:Box,Button:Button,CheckBox:CheckBox,Clip:Clip,ComboBox:ComboBox,Component:Component,HScrollBar:HScrollBar,HSlider:HSlider,Image:Image,Label:Label,List:List,Panel:Panel,ProgressBar:ProgressBar,Radio:Radio,RadioGroup:RadioGroup,ScrollBar:ScrollBar,Slider:Slider,Tab:Tab,TextInput:TextInput,View:e,VScrollBar:VScrollBar,VSlider:VSlider,Tree:Tree,HBox:HBox,VBox:VBox,Sprite:Sprite,Animation:Animation$1,Text:Text,FontClip:FontClip}}]),e.__init$=function(){e._regs()},e}(Box),ContextMenu=function(t){function e(){this._tY=0,e.__super.call(this),StyleConsts.setViewScale(this)}__class(e,"laya.debug.uicomps.ContextMenu",t);var i=e.prototype;return i.addItem=function(t){this.addChild(t),t.y=this._tY,this._tY+=t.height,t.on("mousedown",this,this.onClick)},i.onClick=function(t){this.event("select",t),this.removeSelf()},i.show=function(t,i){void 0===t&&(t=-999),void 0===i&&(i=-999),Laya.timer.once(100,this,e.showMenu,[this,t,i])},e.init=function(){Laya.stage.on("click",null,e.cleanMenu)},e.cleanMenu=function(t){var i=0,s=0;for(s=e._menuList.length,i=0;s>i;i++)e._menuList[i]&&e._menuList[i].removeSelf();e._menuList.length=0},e.showMenu=function(t,i,s){void 0===i&&(i=-999),void 0===s&&(s=-999),e.cleanMenu(),e.adptMenu(t),Laya.stage.addChild(t),DisControlTool.showToStage(t),-999!=i&&-999!=s&&t.pos(i,s),e._menuList.push(t)},e.createMenu=function(t){var i=arguments;return e.createMenuByArray(i)},e.createMenuByArray=function(t){for(var i,s=new e,n=!1,o=0,r=t.length;r>o;o++){var a=t[o],h={};"string"==typeof a?h.label=a:h=a,""!=h.label?(i=new ContextMenuItem(h.label,n),i.data=a,s.addItem(i),n=!1):(i=new ContextMenuItem("",n),i.data=a,s.addItem(i),n=!0)}return s.zOrder=9999,s},e.adptMenu=function(t){var e=80,i=80,s=0,n=t.numChildren;for(s=0;n>s;s++)e=t.getChildAt(s).width,e>i&&(i=e);for(s=0;n>s;s++)t.getChildAt(s).width=i},e._menuList=[],e}(Box),List=function(t){function e(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,e.__super.call(this),this._cells=[],this._offset=new Point}__class(e,"laya.ui.List",t);var i=e.prototype;return Laya.imps(i,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),i.destroy=function(t){void 0===t&&(t=!0),this._content&&this._content.destroy(t),this._scrollBar&&this._scrollBar.destroy(t),laya.ui.Component.prototype.destroy.call(this,t),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},i.createChildren=function(){this.addChild(this._content=new Box)},i.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=t.prototype._$get_cacheAs.call(this)),t.prototype._$set_cacheAs.call(this,"none"),this._scrollBar.once("end",this,this.onScrollEnd)},i.onScrollEnd=function(){t.prototype._$set_cacheAs.call(this,this._$P.cacheAs)},i._removePreScrollBar=function(){var t=this.removeChildByName("scrollBar");t&&t.destroy(!0)},i.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var t=this._getOneCell(),e=t.width+this._spaceX||1,i=t.height+this._spaceY||1;this._width>0&&(this._repeatX2=this._isVertical?Math.round(this._width/e):Math.ceil(this._width/e)),this._height>0&&(this._repeatY2=this._isVertical?Math.ceil(this._height/i):Math.round(this._height/i));var s=this._width?this._width:e*this.repeatX-this._spaceX,n=this._height?this._height:i*this.repeatY-this._spaceY;this._cellSize=this._isVertical?i:e,this._cellOffset=this._isVertical?i*Math.max(this._repeatY2,this._repeatY)-n-this._spaceY:e*Math.max(this._repeatX2,this._repeatX)-s-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=n:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=s),this.setContentSize(s,n);var o=this._isVertical?this.repeatX:this.repeatY,r=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,o,r),this._createdLine=r,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},i._getOneCell=function(){if(0===this._cells.length){var t=this.createItem();this._offset.setTo(t.x,t.y),this._cells.push(t)}return this._cells[0]},i._createItems=function(t,e,i){var s=this._content,n=this._getOneCell(),o=n.width+this._spaceX,r=n.height+this._spaceY;if(this.cacheContent){var a=new Box;a.cacheAsBitmap=!0,a.pos((this._isVertical?0:t)*o,(this._isVertical?t:0)*r),this._content.addChild(a),this._content.optimizeScrollRect=!0,s=a}for(var h=[],l=this._cells.length-1;l>-1;l--){var c=this._cells[l];c.removeSelf(),h.push(c)}this._cells.length=0;for(var u=t;i>u;u++)for(var _=0;e>_;_++)n=h.length?h.pop():this.createItem(),n.x=(this._isVertical?_:u)*o-s.x,n.y=(this._isVertical?u:_)*r-s.y,n.name="item"+(u*e+_),s.addChild(n),this.addCell(n)},i.createItem=function(){return"function"==typeof this._itemRender?new this._itemRender:View.createComp(this._itemRender)},i.addCell=function(t){t.on("click",this,this.onCellMouse),t.on("rightclick",this,this.onCellMouse),t.on("mouseover",this,this.onCellMouse),t.on("mouseout",this,this.onCellMouse),t.on("mousedown",this,this.onCellMouse),t.on("mouseup",this,this.onCellMouse),this._cells.push(t)},i.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;var t=0;t=0;for(var e=0;1e4>e;e++){var i=this.getChildByName("item"+e);{if(!i)break;this.addCell(i),t++}}this.repeatY=t}},i.setContentSize=function(t,e){this._content.width=t,this._content.height=e,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new Rectangle),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,t,e),this._content.conchModel&&this._content.conchModel.scrollRect(-this._offset.x,-this._offset.y,t,e)),this.event("resize")},i.onCellMouse=function(t){"mousedown"===t.type&&(this._isMoved=!1);var e=t.currentTarget,i=this._startIndex+this._cells.indexOf(e);0>i||("click"===t.type||"rightclick"===t.type?this.selectEnable&&!this._isMoved?this.selectedIndex=i:this.changeCellState(e,!0,0):"mouseover"!==t.type&&"mouseout"!==t.type||this._selectedIndex===i||this.changeCellState(e,"mouseover"===t.type,0),this.mouseHandler&&this.mouseHandler.runWith([t,i]))},i.changeCellState=function(t,e,i){var s=t.getChildByName("selectBox");s&&(this.selectEnable=!0,s.visible=e,s.index=i)},i.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},i.onScrollBarChange=function(t){this.runCallLater(this.changeCells);var e=this._scrollBar.value,i=this._isVertical?this.repeatX:this.repeatY,s=this._isVertical?this.repeatY:this.repeatX,n=Math.floor(e/this._cellSize);if(this.cacheContent)r=s+1,this._createdLine-n<r&&(this._createItems(this._createdLine,i,this._createdLine+r),this._createdLine+=r,this.renderItems(this._createdLine*i,0));else{var o=n*i,r=0;if(o>this._startIndex){r=o-this._startIndex;var a=!0,h=this._startIndex+i*(s+1);this._isMoved=!0}else o<this._startIndex&&(r=this._startIndex-o,a=!1,h=this._startIndex-1,this._isMoved=!0);for(var l=0;r>l;l++){if(a){var c=this._cells.shift();this._cells[this._cells.length]=c;var u=h+l}else c=this._cells.pop(),this._cells.unshift(c),u=h-l;var _=Math.floor(u/i)*this._cellSize;this._isVertical?c.y=_:c.x=_,this.renderItem(c,u)}this._startIndex=o,this.changeSelectStatus()}var d=this._content.scrollRect;this._isVertical?(d.y=e-this._offset.y,d.x=-this._offset.x):(d.y=-this._offset.y,d.x=e-this._offset.x),this._content.conchModel&&this._content.conchModel.scrollRect(d.x,d.y,d.width,d.height),this.repaint()},i.posCell=function(t,e){if(this._scrollBar){var i=this._isVertical?this.repeatX:this.repeatY,s=(this._isVertical?this.repeatY:this.repeatX,Math.floor(e/i)*this._cellSize);this._isVertical?t.y=s:t.x=s}},i.changeSelectStatus=function(){for(var t=0,e=this._cells.length;e>t;t++)this.changeCellState(this._cells[t],this._selectedIndex===this._startIndex+t,1)},i.renderItems=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);for(var i=t,s=e||this._cells.length;s>i;i++)this.renderItem(this._cells[i],this._startIndex+i);this.changeSelectStatus()},i.renderItem=function(t,e){this._array&&e>=0&&e<this._array.length?(t.visible=!0,t.dataSource=this._array[e],this.cacheContent||this.posCell(t,e),this.hasListener("render")&&this.event("render",[t,e]),this.renderHandler&&this.renderHandler.runWith([t,e])):(t.visible=!1,t.dataSource=null)},i.refresh=function(){this.startIndex=this._startIndex},i.getItem=function(t){return t>-1&&t<this._array.length?this._array[t]:null},i.changeItem=function(t,e){t>-1&&t<this._array.length&&(this._array[t]=e,t>=this._startIndex&&t<this._startIndex+this._cells.length&&this.renderItem(this.getCell(t),t))},i.setItem=function(t,e){this.changeItem(t,e)},i.addItem=function(t){this._array.push(t),this.array=this._array},i.addItemAt=function(t,e){this._array.splice(e,0,t),this.array=this._array},i.deleteItem=function(t){this._array.splice(t,1),this.array=this._array},i.getCell=function(t){return this.runCallLater(this.changeCells),t>-1&&this._cells?this._cells[(t-this._startIndex)%this._cells.length]:null},i.scrollTo=function(t){if(this._scrollBar){var e=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(t/e)*this._cellSize}else this.startIndex=t},i.tweenTo=function(t,e,i){if(void 0===e&&(e=200),this._scrollBar){var s=this._isVertical?this.repeatX:this.repeatY;Tween.to(this._scrollBar,{value:Math.floor(t/s)*this._cellSize},e,null,i,0,!0)}else this.startIndex=t,i&&i.run()},i._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},i.commitMeasure=function(){this.runCallLater(this.changeCells)},__getset(0,i,"cacheAs",t.prototype._$get_cacheAs,function(e){t.prototype._$set_cacheAs.call(this,e),this._scrollBar&&(this._$P.cacheAs=null,"none"!==e?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),__getset(0,i,"content",function(){return this._content}),__getset(0,i,"height",t.prototype._$get_height,function(e){e!=this._height&&(t.prototype._$set_height.call(this,e),this._setCellChanged())}),__getset(0,i,"itemRender",function(){return this._itemRender},function(t){if(this._itemRender!=t){this._itemRender=t;for(var e=this._cells.length-1;e>-1;e--)this._cells[e].destroy();this._cells.length=0,this._setCellChanged()}}),__getset(0,i,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(t){this._removePreScrollBar();var e=new VScrollBar;e.name="scrollBar",e.right=0,t&&" "!=t&&(e.skin=t),this.scrollBar=e,this.addChild(e),this._setCellChanged()}),__getset(0,i,"page",function(){return this._page},function(t){this._page=t,this._array&&(this._page=t>0?t:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),__getset(0,i,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(t){this._removePreScrollBar();var e=new HScrollBar;e.name="scrollBar",e.bottom=0,t&&" "!=t&&(e.skin=t),this.scrollBar=e,this.addChild(e),this._setCellChanged()}),__getset(0,i,"repeatX",function(){return this._repeatX>0?this._repeatX:this._repeatX2>0?this._repeatX2:1},function(t){this._repeatX=t,this._setCellChanged()}),__getset(0,i,"scrollBar",function(){return this._scrollBar},function(t){this._scrollBar!=t&&(this._scrollBar=t,t&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange)))}),__getset(0,i,"width",t.prototype._$get_width,function(e){e!=this._width&&(t.prototype._$set_width.call(this,e),this._setCellChanged())}),__getset(0,i,"repeatY",function(){return this._repeatY>0?this._repeatY:this._repeatY2>0?this._repeatY2:1},function(t){this._repeatY=t,this._setCellChanged()}),__getset(0,i,"spaceX",function(){return this._spaceX},function(t){this._spaceX=t,this._setCellChanged()}),__getset(0,i,"spaceY",function(){return this._spaceY},function(t){this._spaceY=t,this._setCellChanged()}),__getset(0,i,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this._selectedIndex=t,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(t),this.startIndex=this._startIndex)}),__getset(0,i,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(t){this.selectedIndex=this._array.indexOf(t)}),__getset(0,i,"length",function(){return this._array?this._array.length:0}),__getset(0,i,"selection",function(){return this.getCell(this._selectedIndex)},function(t){this.selectedIndex=this._startIndex+this._cells.indexOf(t)}),__getset(0,i,"startIndex",function(){return this._startIndex},function(t){this._startIndex=t>0?t:0,this.callLater(this.renderItems)}),__getset(0,i,"array",function(){return this._array},function(t){this.runCallLater(this.changeCells),this._array=t||[];var e=this._array.length;if(this.totalPage=Math.ceil(e/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<e?this._selectedIndex:e-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var i=this._isVertical?this.repeatX:this.repeatY,s=this._isVertical?this.repeatY:this.repeatX,n=Math.ceil(e/i),o=this._cellOffset>0?this.totalPage+1:this.totalPage;o>1?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=s/n,this._scrollBar.setScroll(0,(n-s)*this._cellSize+this._cellOffset,this._scrollBar.value),this._scrollBar.target=this._content):(this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content)}}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e&&Math.floor(e)==e||"string"==typeof e?this.selectedIndex=parseInt(e):e instanceof Array?this.array=e:t.prototype._$set_dataSource.call(this,e)}),__getset(0,i,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),e}(Box),Tree=function(t){function e(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,e.__super.call(this),this.width=this.height=200}__class(e,"laya.ui.Tree",t);var i=e.prototype;return Laya.imps(i,{"laya.ui.IRender":!0}),i.destroy=function(t){void 0===t&&(t=!0),laya.ui.Component.prototype.destroy.call(this,t),this._list&&this._list.destroy(t),this._list=null,this._source=null,this._renderHandler=null},i.createChildren=function(){this.addChild(this._list=new List),this._list.renderHandler=Handler.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},i.onListChange=function(t){this.event("change")},i.getArray=function(){var t,e=[];for(var i in this._source)t=this._source[i],this.getParentOpenStatus(t)&&(t.x=this._spaceLeft*this.getDepth(t),e.push(t));return e},i.getDepth=function(t,e){return void 0===e&&(e=0),null==t.nodeParent?e:this.getDepth(t.nodeParent,e+1)},i.getParentOpenStatus=function(t){var e=t.nodeParent;return null==e?!0:e.isOpen?null!=e.nodeParent?this.getParentOpenStatus(e):!0:!1},i.renderItem=function(t,e){var i=t.dataSource;if(i){t.left=i.x;var s=t.getChildByName("arrow");s&&(i.hasChild?(s.visible=!0,s.index=i.isOpen?1:0,s.tag=e,s.off("click",this,this.onArrowClick),s.on("click",this,this.onArrowClick)):s.visible=!1);var n=t.getChildByName("folder");n&&(2==n.clipY?n.index=i.isDirectory?0:1:n.index=i.isDirectory?i.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([t,e])}},i.onArrowClick=function(t){var e=t.currentTarget,i=e.tag;this._list.array[i].isOpen=!this._list.array[i].isOpen,this.event("open"),this._list.array=this.getArray()},i.setItemState=function(t,e){this._list.array[t]&&(this._list.array[t].isOpen=e,this._list.array=this.getArray())},i.fresh=function(){this._list.array=this.getArray(),this.repaint()},i.parseXml=function(t,e,i,s){var n,o=t.childNodes,r=o.length;if(!s){n={};var a,h=t.attributes;for(var l in h){a=h[l];var c=a.nodeName,u=a.nodeValue;n[c]="true"==u?!0:"false"==u?!1:u}n.nodeParent=i,r>0&&(n.isDirectory=!0),n.hasChild=r>0,e.push(n)}for(var _=0;r>_;_++){var d=o[_];this.parseXml(d,e,n,!1)}},i.parseOpenStatus=function(t,e){for(var i=0,s=e.length;s>i;i++){var n=e[i];if(n.isDirectory)for(var o=0,r=t.length;r>o;o++){var a=t[o];if(a.isDirectory&&this.isSameParent(a,n)&&n.label==a.label){n.isOpen=a.isOpen;break}}}},i.isSameParent=function(t,e){return null==t.nodeParent&&null==e.nodeParent?!0:null==t.nodeParent||null==e.nodeParent?!1:t.nodeParent.label==e.nodeParent.label?this.isSameParent(t.nodeParent,e.nodeParent):!1},i.filter=function(t){if(Boolean(t)){var e=[];this.getFilterSource(this._source,e,t),this._list.array=e}else this._list.array=this.getArray()},i.getFilterSource=function(t,e,i){i=i.toLocaleLowerCase();var s;for(var n in t)s=t[n],!s.isDirectory&&String(s.label).toLowerCase().indexOf(i)>-1&&(s.x=0,e.push(s)),s.child&&s.child.length>0&&this.getFilterSource(s.child,e,i)},__getset(0,i,"spaceBottom",function(){return this._list.spaceY},function(t){this._list.spaceY=t}),__getset(0,i,"keepStatus",function(){return this._keepStatus},function(t){this._keepStatus=t}),__getset(0,i,"itemRender",function(){return this._list.itemRender},function(t){this._list.itemRender=t}),__getset(0,i,"array",function(){return this._list.array},function(t){this._keepStatus&&this._list.array&&t&&this.parseOpenStatus(this._list.array,t),this._source=t,this._list.array=this.getArray()}),__getset(0,i,"mouseHandler",function(){return this._list.mouseHandler},function(t){this._list.mouseHandler=t}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,t.prototype._$set_dataSource.call(this,e)}),__getset(0,i,"source",function(){return this._source}),__getset(0,i,"scrollBar",function(){return this._list.scrollBar}),__getset(0,i,"list",function(){return this._list}),__getset(0,i,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(t){this._list.vScrollBarSkin=t}),__getset(0,i,"renderHandler",function(){return this._renderHandler},function(t){this._renderHandler=t}),__getset(0,i,"selectedIndex",function(){return this._list.selectedIndex},function(t){this._list.selectedIndex=t}),__getset(0,i,"spaceLeft",function(){return this._spaceLeft},function(t){this._spaceLeft=t}),__getset(0,i,"selectedItem",function(){return this._list.selectedItem},function(t){this._list.selectedItem=t}),__getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this._list.width=e}),__getset(0,i,"height",t.prototype._$get_height,function(e){t.prototype._$set_height.call(this,e),this._list.height=e}),__getset(0,i,"xml",null,function(t){var e=[];this.parseXml(t.childNodes[0],e,null,!0),this.array=e}),__getset(0,i,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),e}(Box),LayoutBox=function(t){function e(){this._space=0,this._align="none",this._itemChanged=!1,e.__super.call(this)}__class(e,"laya.ui.LayoutBox",t);var i=e.prototype;return i.addChild=function(t){return t.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,t)},i.onResize=function(t){this._setItemChanged()},i.addChildAt=function(t,e){return t.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,t,e)},i.removeChild=function(t){return t.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,t)},i.removeChildAt=function(t){return this.getChildAt(t).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,t)},i.refresh=function(){this._setItemChanged()},i.changeItems=function(){this._itemChanged=!1},i.sortItem=function(t){t&&t.sort(function(t,e){return t.y-e.y})},i._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},__getset(0,i,"space",function(){return this._space},function(t){this._space=t,this._setItemChanged()}),__getset(0,i,"align",function(){return this._align},function(t){this._align=t,this._setItemChanged()}),e}(Box),Panel=function(t){function e(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,e.__super.call(this),this.width=this.height=100,this._content.optimizeScrollRect=!0}__class(e,"laya.ui.Panel",t);var i=e.prototype;return i.destroy=function(t){void 0===t&&(t=!0),laya.ui.Component.prototype.destroy.call(this,t),this._content&&this._content.destroy(t),this._vScrollBar&&this._vScrollBar.destroy(t),this._hScrollBar&&this._hScrollBar.destroy(t),this._vScrollBar=null,this._hScrollBar=null,this._content=null},i.destroyChildren=function(){
this._content.destroyChildren()},i.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new Box)},i.addChild=function(t){return t.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(t)},i.onResize=function(){this._setScrollChanged()},i.addChildAt=function(t,e){return t.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(t,e)},i.removeChild=function(t){return t.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(t)},i.removeChildAt=function(t){return this.getChildAt(t).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(t)},i.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=2147483647);for(var i=this._content.numChildren-1;i>-1;i--)this._content.removeChildAt(i);return this._setScrollChanged(),this},i.getChildAt=function(t){return this._content.getChildAt(t)},i.getChildByName=function(t){return this._content.getChildByName(t)},i.getChildIndex=function(t){return this._content.getChildIndex(t)},i.changeScroll=function(){this._scrollChanged=!1;var t=this.contentWidth||1,e=this.contentHeight||1,i=this._vScrollBar,s=this._hScrollBar,n=i&&e>this._height,o=s&&t>this._width,r=n?this._width-i.width:this._width,a=o?this._height-s.height:this._height;i&&(i.x=this._width-i.width,i.y=0,i.height=this._height-(o?s.height:0),i.scrollSize=Math.max(.033*this._height,1),i.thumbPercent=a/e,i.setScroll(0,e-a,i.value)),s&&(s.x=0,s.y=this._height-s.height,s.width=this._width-(n?i.width:0),s.scrollSize=Math.max(.033*this._width,1),s.thumbPercent=r/t,s.setScroll(0,t-r,s.value))},i.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},i.setContentSize=function(t,e){var i=this._content;i.width=t,i.height=e,i.scrollRect||(i.scrollRect=new Rectangle),i.scrollRect.setTo(0,0,t,e),i.conchModel&&i.conchModel.scrollRect(0,0,t,e)},i.onScrollBarChange=function(t){var e=this._content.scrollRect;if(e){var i=Math.round(t.value);t.isVertical?e.y=i:e.x=i,this._content.conchModel&&this._content.conchModel.scrollRect(e.x,e.y,e.width,e.height)}},i.scrollTo=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.vScrollBar&&(this.vScrollBar.value=e),this.hScrollBar&&(this.hScrollBar.value=t)},i.refresh=function(){this.changeScroll()},i.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=t.prototype._$get_cacheAs.call(this)),t.prototype._$set_cacheAs.call(this,"none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},i.onScrollEnd=function(){t.prototype._$set_cacheAs.call(this,this._$P.cacheAs)},i._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},__getset(0,i,"numChildren",function(){return this._content.numChildren}),__getset(0,i,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(t){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new HScrollBar),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=t}),__getset(0,i,"contentWidth",function(){for(var t=0,e=this._content.numChildren-1;e>-1;e--){var i=this._content.getChildAt(e);t=Math.max(i.x+i.width*i.scaleX,t)}return t}),__getset(0,i,"contentHeight",function(){for(var t=0,e=this._content.numChildren-1;e>-1;e--){var i=this._content.getChildAt(e);t=Math.max(i.y+i.height*i.scaleY,t)}return t}),__getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this._setScrollChanged()}),__getset(0,i,"hScrollBar",function(){return this._hScrollBar}),__getset(0,i,"content",function(){return this._content}),__getset(0,i,"height",t.prototype._$get_height,function(e){t.prototype._$set_height.call(this,e),this._setScrollChanged()}),__getset(0,i,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(t){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new VScrollBar),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=t}),__getset(0,i,"vScrollBar",function(){return this._vScrollBar}),__getset(0,i,"cacheAs",t.prototype._$get_cacheAs,function(e){t.prototype._$set_cacheAs.call(this,e),this._$P.cacheAs=null,"none"!==e?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),e}(Box),UIGroup=function(t){function e(t,i){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,e.__super.call(this),this.skin=i,this.labels=t}__class(e,"laya.ui.UIGroup",t);var i=e.prototype;return Laya.imps(i,{"laya.ui.IItem":!0}),i.preinitialize=function(){this.mouseEnabled=!0},i.destroy=function(t){void 0===t&&(t=!0),laya.ui.Component.prototype.destroy.call(this,t),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},i.addItem=function(t,e){void 0===e&&(e=!0);var i=t,s=this._items.length;if(i.name="item"+s,this.addChild(i),this.initItems(),e&&s>0){var n=this._items[s-1];"horizontal"==this._direction?i.x=n.x+n.width+this._space:i.y=n.y+n.height+this._space}else e&&(i.x=0,i.y=0);return s},i.delItem=function(t,e){void 0===e&&(e=!0);var i=this._items.indexOf(t);if(-1!=i){var s=t;this.removeChild(s);for(var n=i+1,o=this._items.length;o>n;n++){var r=this._items[n];r.name="item"+(n-1),e&&("horizontal"==this._direction?r.x-=s.width+this._space:r.y-=s.height+this._space)}if(this.initItems(),this._selectedIndex>-1){var a=0;a=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=a}}},i.initItems=function(){this._items||(this._items=[]),this._items.length=0;for(var t=0;1e4>t;t++){var e=this.getChildByName("item"+t);if(null==e)break;this._items.push(e),e.selected=t===this._selectedIndex,e.clickHandler=Handler.create(this,this.itemClick,[t],!1)}},i.itemClick=function(t){this.selectedIndex=t},i.setSelect=function(t,e){this._items&&t>-1&&t<this._items.length&&(this._items[t].selected=e)},i.createItem=function(t,e){return null},i.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var t=0,e=0,i=this._items.length;i>e;e++){var s=this._items[e];this._skin&&(s.skin=this._skin),this._labelColors&&(s.labelColors=this._labelColors),this._labelSize&&(s.labelSize=this._labelSize),this._labelStroke&&(s.labelStroke=this._labelStroke),this._labelStrokeColor&&(s.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(s.strokeColors=this._strokeColors),this._labelBold&&(s.labelBold=this._labelBold),this._labelPadding&&(s.labelPadding=this._labelPadding),this._labelAlign&&(s.labelAlign=this._labelAlign),this._stateNum&&(s.stateNum=this._stateNum),this._labelFont&&(s.labelFont=this._labelFont),"horizontal"===this._direction?(s.y=0,s.x=t,t+=s.width+this._space):(s.x=0,s.y=t,t+=s.height+this._space)}this.changeSize()},i.commitMeasure=function(){this.runCallLater(this.changeLabels)},i._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},__getset(0,i,"labelStrokeColor",function(){return this._labelStrokeColor},function(t){this._labelStrokeColor!=t&&(this._labelStrokeColor=t,this._setLabelChanged())}),__getset(0,i,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._setLabelChanged())}),__getset(0,i,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=t,this.setSelect(t,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),__getset(0,i,"labels",function(){return this._labels},function(t){if(this._labels!=t){if(this._labels=t,this.removeChildren(),this._setLabelChanged(),this._labels)for(var e=this._labels.split(","),i=0,s=e.length;s>i;i++){var n=this.createItem(this._skin,e[i]);n.name="item"+i,this.addChild(n)}this.initItems()}}),__getset(0,i,"strokeColors",function(){return this._strokeColors},function(t){this._strokeColors!=t&&(this._strokeColors=t,this._setLabelChanged())}),__getset(0,i,"labelColors",function(){return this._labelColors},function(t){this._labelColors!=t&&(this._labelColors=t,this._setLabelChanged())}),__getset(0,i,"labelStroke",function(){return this._labelStroke},function(t){this._labelStroke!=t&&(this._labelStroke=t,this._setLabelChanged())}),__getset(0,i,"labelSize",function(){return this._labelSize},function(t){this._labelSize!=t&&(this._labelSize=t,this._setLabelChanged())}),__getset(0,i,"stateNum",function(){return this._stateNum},function(t){this._stateNum!=t&&(this._stateNum=t,this._setLabelChanged())}),__getset(0,i,"labelBold",function(){return this._labelBold},function(t){this._labelBold!=t&&(this._labelBold=t,this._setLabelChanged())}),__getset(0,i,"labelFont",function(){return this._labelFont},function(t){this._labelFont!=t&&(this._labelFont=t,this._setLabelChanged())}),__getset(0,i,"labelPadding",function(){return this._labelPadding},function(t){this._labelPadding!=t&&(this._labelPadding=t,this._setLabelChanged())}),__getset(0,i,"direction",function(){return this._direction},function(t){this._direction=t,this._setLabelChanged()}),__getset(0,i,"space",function(){return this._space},function(t){this._space=t,this._setLabelChanged()}),__getset(0,i,"items",function(){return this._items}),__getset(0,i,"selection",function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(t){this.selectedIndex=this._items.indexOf(t)}),__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"number"==typeof e&&Math.floor(e)==e||"string"==typeof e?this.selectedIndex=parseInt(e):e instanceof Array?this.labels=e.join(","):t.prototype._$set_dataSource.call(this,e)}),e}(Box),ViewStack=function(t){function e(){this._items=null,this._selectedIndex=0,e.__super.call(this),this._setIndexHandler=Handler.create(this,this.setIndex,null,!1)}__class(e,"laya.ui.ViewStack",t);var i=e.prototype;return Laya.imps(i,{"laya.ui.IItem":!0}),i.setItems=function(t){this.removeChildren();for(var e=0,i=0,s=t.length;s>i;i++){var n=t[i];n&&(n.name="item"+e,this.addChild(n),e++)}this.initItems()},i.addItem=function(t){t.name="item"+this._items.length,this.addChild(t),this.initItems()},i.initItems=function(){this._items=[];for(var t=0;1e4>t;t++){var e=this.getChildByName("item"+t);if(null==e)break;this._items.push(e),e.visible=t==this._selectedIndex}},i.setSelect=function(t,e){this._items&&t>-1&&t<this._items.length&&(this._items[t].visible=e)},i.setIndex=function(t){this.selectedIndex=t},__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(this._dataSource=t,"number"==typeof t&&Math.floor(t)==t||"string"==typeof t)this.selectedIndex=parseInt(t);else for(var e in this._dataSource)this.hasOwnProperty(e)&&(this[e]=this._dataSource[e])}),__getset(0,i,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=t,this.setSelect(this._selectedIndex,!0))}),__getset(0,i,"selection",function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(t){this.selectedIndex=this._items.indexOf(t)}),__getset(0,i,"items",function(){return this._items}),__getset(0,i,"setIndexHandler",function(){return this._setIndexHandler},function(t){this._setIndexHandler=t}),e}(Box),ContextMenuItem=function(t){function e(t,i){this.data=null,this.img=null,e.__super.call(this),this.img||(this.img=new Image),""!=t?(this.label=t,this.name=t):(this.label="------",this.height=5,this.mouseEnabled=!1,this.img.skin=Base64AtlasManager.base64.getAdptUrl("comp/line2.png"),this.img.sizeGrid="0,2,0,2",this.addChild(this.img)),this.labelColors="#000000,#000000,#000000,#000000",this._text.x=10,this._text.padding=[-2,0,0,0],this._text.align="left",this._text.wordWrap=!1,this._text.typeset(),this.width=this._text.width+25,this.sizeGrid="3,3,3,3",this.skin=Base64AtlasManager.base64.getAdptUrl("comp/button1.png")}__class(e,"laya.debug.uicomps.ContextMenuItem",t);var i=e.prototype;return __getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this.img.width=this.width,this.img.x=0}),e}(Button),CacheRankView=function(t){function e(){this.view=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.CacheRankView",t);var i=e.prototype;return i.createPanel=function(){this.view=new Rank,this.view.top=this.view.bottom=this.view.left=this.view.right=0,this.addChild(this.view),NodeMenu.I.setNodeListAction(this.view.itemList),this.view.closeBtn.on("click",this,this.close),this.view.freshBtn.on("click",this,this.fresh),this.view.itemList.scrollBar.hide=!0,this.view.autoUpdate.on("change",this,this.onAutoUpdateChange),this.dis=this,this.view.itemList.array=[],this.onAutoUpdateChange(),this.fresh()},i.onRightClick=function(){var t;if(t=this.view.itemList,t.selectedItem){var e;e=t.selectedItem.path,NodeMenu.I.objRightClick(e)}},i.onAutoUpdateChange=function(){this.autoUpdate=this.view.autoUpdate.selected},i.fresh=function(){CacheAnalyser.counter.updates(),this.view.title.text="ReCache排行",DebugTool.enableCacheAnalyse||(this.view.title.text="ReCache排行(未开启)",this.view.title.toolTip="DebugTool.init(true)可开启该功能");var t;t=CacheAnalyser.counter.resultNodeDic;var i,s,n,o;o=[];for(i in t)s=t[i],e.filterDebugNodes&&DisControlTool.isInTree(DebugInfoLayer.I,s)||CacheAnalyser.counter.getCount(s)<=0||(n={},n.time=CacheAnalyser.counter.getCount(s),n.path=s,n.label=ClassTool.getNodeClassAndName(s)+":"+n.time,o.push(n));o.sort(MathTools.sortByKey("time",!0,!0)),this.view.itemList.array=o},__getset(0,i,"autoUpdate",null,function(t){Laya.timer.clear(this,this.fresh),t&&(this.fresh(),Laya.timer.loop(NodeConsts.RenderCostMaxTime,this,this.fresh))}),__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e.filterDebugNodes=!0,e}(UIViewBase),DebugPanelView=function(t){function e(){this.view=null,this.dragIcon=null,this.tSelectTar=null,this._selectTip=new Sprite,e.__super.call(this),this._selectTip.setBounds(new Rectangle(0,0,0,0))}__class(e,"laya.debug.view.nodeInfo.views.DebugPanelView",t);var i=e.prototype;return i.createPanel=function(){this.view=new DebugPage,this.dis=this.view,this.view.minBtn.minHandler=this.minHandler,this.view.minBtn.maxHandler=this.maxHandler,this.view.minBtn.tar=this.view,DisControlTool.setDragingItem(this.view.bg,this.view),DisControlTool.setDragingItem(this.view.tab,this.view),DisControlTool.setDragingItem(this.view.clearBtn,this.view),this.clickSelectChange(),this.view.selectWhenClick.on("change",this,this.clickSelectChange),Notice.listen("ItemClicked",this,this.itemClicked),StyleConsts.setViewScale(this.view),this.dragIcon=this.view.dragIcon,this.dragIcon.removeSelf(),this.view.mouseAnalyseBtn.on("mousedown",this,this.mouseAnalyserMouseDown),this.dragIcon.on("dragend",this,this.mouseAnalyserDragEnd),this.view.clearBtn.on("mousedown",this,this.clearBtnClick)},i.clearBtnClick=function(){DebugTool.clearDebugLayer()},i.mouseAnalyserMouseDown=function(){var t=e.tempPos;t.setTo(0,0),t=this.view.mouseAnalyseBtn.localToGlobal(t),this.dragIcon.pos(t.x,t.y),this.dragIcon.mouseEnabled=!1,Laya.stage.addChild(this.dragIcon),this.dragIcon.startDrag()},i.mouseAnalyserDragEnd=function(){this.dragIcon.removeSelf(),this.selectTarget(DisplayHook.instance.getDisUnderMouse()),NodeToolView.I.showByNode(DisplayHook.instance.getDisUnderMouse(),!1)},i.switchToTree=function(){this.view.tab.selectedIndex=0},i.swichToSelect=function(){this.view.tab.selectedIndex=1},i.itemClicked=function(t){e.isClickSelectState&&(e.ignoreDebugTool&&DebugInfoLayer.I.isDebugItem(t)||t instanceof laya.debug.uicomps.ContextMenuItem||t.parent instanceof laya.debug.uicomps.ContextMenuItem||(ToolPanel.I.showSelectInStage(t),NodeToolView.I.showByNode(t,!1),this.view.selectWhenClick.selected=!1,DebugTool.showDisBound(t),this.clickSelectChange()))},i.selectTarget=function(t){t&&(ToolPanel.I.showSelectInStage(t),DebugTool.showDisBound(t))},i.clickSelectChange=function(){e.isClickSelectState=this.view.selectWhenClick.selected,Browser.onPC&&(this.tSelectTar=null,this.clearSelectTip(),e.isClickSelectState?Laya.timer.loop(200,this,this.updateSelectTar,null,!0):Laya.timer.clear(this,this.updateSelectTar))},i.clearSelectTip=function(){this._selectTip.removeSelf()},i.updateSelectTar=function(){if(this.clearSelectTip(),this.tSelectTar=DisplayHook.instance.getDisUnderMouse(),this.tSelectTar&&!DebugInfoLayer.I.isDebugItem(this.tSelectTar)){var t;t=this._selectTip.graphics,t.clear();var e;e=NodeUtils.getGRec(this.tSelectTar),DebugInfoLayer.I.popLayer.addChild(this._selectTip),t.drawRect(0,0,e.width,e.height,null,"#00ffff",2),this._selectTip.pos(e.x,e.y)}},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e.ignoreDebugTool=!0,e.isClickSelectState=!1,__static(e,["tempPos",function(){return this.tempPos=new Point}]),e}(UIViewBase),FilterView=function(t){function e(){this.input=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.FilterView",t);var i=e.prototype;return i.createPanel=function(){this.input=new Input,this.input.size(400,500),this.input.multiline=!0,this.input.bgColor="#ff00ff",this.input.fontSize=24,this.addChild(this.input)},i.show=function(){this.input.text=NodeInfosItem.showValues.join("\n"),t.prototype.show.call(this)},i.close=function(){t.prototype.close.call(this),NodeInfosItem.showValues=this.input.text.split("\n")},e}(UIViewBase),FindSmallView=function(t){function e(){this.view=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.FindSmallView",t);var i=e.prototype;return i.createPanel=function(){this.view=new FindNodeSmall,StyleConsts.setViewScale(this.view),DisControlTool.setDragingItem(this.view.bg,this.view),this.view.typeSelect.selectedIndex=1,this.view.closeBtn.on("click",this,this.close),this.view.findBtn.on("click",this,this.onFind),this.dis=this.view},i.onFind=function(){var t;t=this.view.findTxt.text,t=StringTool.trimSide(t);var e;e=0==this.view.typeSelect.selectedIndex?DebugTool.findNameHas(t,!1):DebugTool.findClassHas(Laya.stage,t),ToolPanel.I.showSelectItems(e),this.close()},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e}(UIViewBase),FindView=function(t){function e(){this.view=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.FindView",t);var i=e.prototype;return i.createPanel=function(){this.view=new FindNode,DisControlTool.setDragingItem(this.view.bg,this.view),this.view.result.scrollBar.hide=!0,this.view.result.array=[],this.view.typeSelect.selectedIndex=1,this.view.closeBtn.on("click",this,this.close),this.view.findBtn.on("click",this,this.onFind),NodeMenu.I.setNodeListAction(this.view.result),this.dis=this.view},i.onRightClick=function(){var t;if(t=this.view.result,t.selectedItem){var e;e=t.selectedItem.path,NodeMenu.I.objRightClick(e)}},i.onFind=function(){var t;t=this.view.findTxt.text,t=StringTool.trimSide(t);var e;e=0==this.view.typeSelect.selectedIndex?DebugTool.findNameHas(t,!1):DebugTool.findClassHas(Laya.stage,t),this.showFindResult(e)},i.showFindResult=function(t){if(t){var e=0,i=0;i=t.length;var s;s=[];var n,o;for(e=0;i>e;e++)o=t[e],n={},n.label=ClassTool.getNodeClassAndName(o),n.path=o,s.push(n);this.view.result.array=s}},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e}(UIViewBase),NodeListPanelView=function(t){function e(){this.view=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.NodeListPanelView",t);var i=e.prototype;return i.createPanel=function(){this.view=new NodeListPanel,this.addChild(this.view),DisControlTool.setDragingItem(this.view.bg,this.view),NodeMenu.I.setNodeListAction(this.view.itemList),this.view.closeBtn.on("click",this,this.close),this.view.itemList.scrollBar.hide=!0,this.dis=this,this.view.itemList.array=[]},i.showList=function(t){this.view.itemList.array=t,this.show()},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e.filterDebugNodes=!0,e}(UIViewBase),NodeToolView=function(t){function e(){this.view=null,this.dragIcon=null,this._tar=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.NodeToolView",t);var i=e.prototype;return i.show=function(){this.showByNode()},i.createPanel=function(){this.view=new NodeTool,this.addChild(this.view),this.view.on("click",this,this.onBtnClick),this.view.closeBtn.on("click",this,this.onCloseBtn),DisControlTool.setDragingItem(this.view.bg,this.view),this.dis=this.view,this.view.freshBtn.on("click",this,this.onFreshBtn),this.dragIcon=this.view.dragIcon,this.dragIcon.removeSelf(),this.dragIcon.on("dragend",this,this.mouseAnalyserDragEnd),this.view.mouseAnalyseBtn.on("mousedown",this,this.mouseAnalyserMouseDown)},i.mouseAnalyserMouseDown=function(){var t=e.tempPos;t.setTo(0,0),t=this.view.mouseAnalyseBtn.localToGlobal(t),this.dragIcon.pos(t.x,t.y),this.dragIcon.mouseEnabled=!1,Laya.stage.addChild(this.dragIcon),this.dragIcon.startDrag()},i.mouseAnalyserDragEnd=function(){this.dragIcon.removeSelf(),laya.debug.view.nodeInfo.views.NodeToolView.I.target&&MouseEventAnalyser.analyseNode(laya.debug.view.nodeInfo.views.NodeToolView.I.target)},i.onFreshBtn=function(){this._tar&&(this._tar.reCache(),this._tar.repaint())},i.onCloseBtn=function(){this.close()},i.onBtnClick=function(t){if(this._tar){var e;e=t.target,console.log("onBtnClick:",e);var i;switch(i=e.label){case"父链":DebugTool.showParentChain(this._tar),SelectInfosView.I.setSelectList(DebugTool.selectedNodes);break;case"子":DebugTool.showAllChild(this._tar),SelectInfosView.I.setSelectList(DebugTool.selectedNodes);break;case"兄弟":DebugTool.showAllBrother(this._tar),SelectInfosView.I.setSelectList(DebugTool.selectedNodes);break;case"Enable链":OutPutView.I.dTrace(DebugTool.traceDisMouseEnable(this._tar)),SelectInfosView.I.setSelectList(DebugTool.selectedNodes);break;case"Size链":OutPutView.I.dTrace(DebugTool.traceDisSizeChain(this._tar)),SelectInfosView.I.setSelectList(DebugTool.selectedNodes);break;case"隐藏旁支":NodeInfoPanel.I.recoverNodes(),NodeInfoPanel.I.hideOtherChain(this._tar);break;case"隐藏兄弟":NodeInfoPanel.I.recoverNodes(),NodeInfoPanel.I.hideBrothers(this._tar);break;case"隐藏子":NodeInfoPanel.I.recoverNodes(),NodeInfoPanel.I.hideChilds(this._tar);break;case"恢复":NodeInfoPanel.I.recoverNodes();break;case"节点树定位":ToolPanel.I.showSelectInStage(this._tar);break;case"显示边框":DebugTool.showDisBound(this._tar);break;case"输出到控制台":console.log(this._tar);break;case"显示切换":this._tar.visible=!this._tar.visible}}},i.showByNode=function(e,i){void 0===i&&(i=!0),e||(e=Laya.stage),i&&t.prototype.show.call(this),this._tar=e,this.fresh()},i.fresh=function(){this._tar&&(this.view.tarTxt.text=ClassTool.getNodeClassAndName(this._tar))},__getset(0,i,"target",function(){return this._tar}),__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,__static(e,["tempPos",function(){return this.tempPos=new Point}]),e}(UIViewBase),NodeTreeSettingView=function(t){function e(){this.view=null,this._handler=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.NodeTreeSettingView",t);var i=e.prototype;return i.createPanel=function(){t.prototype.createPanel.call(this),this.view=new NodeTreeSetting,StyleConsts.setViewScale(this.view),this.addChild(this.view),this.inits(),this.dis=this.view},i.show=function(){t.prototype.show.call(this)},i.showSetting=function(t,e,i){i instanceof laya.display.Node?this.view.showTxt.text=NodeConsts.defaultFitlerStr.split(",").join("\n"):this.view.showTxt.text=t.join("\n"),this._handler=e,this.show()},i.inits=function(){this.view.okBtn.on("click",this,this.onOkBtn),this.view.closeBtn.on("click",this,this.onCloseBtn),DisControlTool.setDragingItem(this.view.bg,this.view),this.dis=this.view},i.onCloseBtn=function(){this.close()},i.onOkBtn=function(){this.close();var t;t=this.view.showTxt.text.split("\n"),this._handler&&(this._handler.runWith([t]),this._handler=null)},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e}(UIViewBase),NodeTreeView=function(t){function e(){this.nodeTree=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.NodeTreeView",t);var i=e.prototype;return i.show=function(){this.showByNode()},i.showByNode=function(t){t||(t=Laya.stage),this.nodeTree.setDis(t)},i.createPanel=function(){t.prototype.createPanel.call(this),this.nodeTree||(this.nodeTree=new NodeTree),this.dis=null;var e;e=this.nodeTree,e.top=e.bottom=e.left=e.right=0,this.addChild(e),this.showByNode(Laya.stage)},i.showSelectInStage=function(t){this.showByNode(Laya.stage),this.nodeTree.selectByNode(t)},e}(UIViewBase),ObjectCreateView=function(t){function e(){this.view=null,this._menu=null,this._menuItems=["统计详情","增量详情"],this._tSelectKey=null,this.preInfo={},e.__super.call(this),e._I=this}__class(e,"laya.debug.view.nodeInfo.views.ObjectCreateView",t);var i=e.prototype;return i.createPanel=function(){this.view=new ObjectCreate,this.view.top=this.view.bottom=this.view.left=this.view.right=0,this.addChild(this.view),this.view.itemList.on(DebugTool.getMenuShowEvent(),this,this.onRightClick),this.view.closeBtn.on("click",this,this.close),this.view.freshBtn.on("click",this,this.fresh),this.view.itemList.scrollBar.hide=!0,this._menu=ContextMenu.createMenuByArray(this._menuItems),this._menu.on("select",this,this.onEmunSelect),this.fresh()},i.onEmunSelect=function(t){if(this._tSelectKey){var e=t.target.data;if("string"==typeof e){var i;i=e;var s;switch(i){case"统计详情":s=RunProfile.getRunInfo(this._tSelectKey),s&&OutPutView.I.showTxt(this._tSelectKey+" createInfo:\n"+s.traceSelfR());break;case"增量详情":s=RunProfile.getRunInfo(this._tSelectKey),s&&OutPutView.I.showTxt(this._tSelectKey+" createInfo:\n"+s.traceSelfR(s.changeO))}}}},i.onRightClick=function(){var t;if(t=this.view.itemList,t.selectedItem){var e;e=t.selectedItem.path,this._tSelectKey=e,this._tSelectKey&&this._menu.show()}},i.show=function(){this.fresh()},i.fresh=function(){var t;t=ClassCreateHook.I.createInfo;var e,i;i=[];var s,n;for(e in t)this.preInfo[e]||(this.preInfo[e]=0),s={},s.path=e,s.count=t[e],s.add=t[e]-this.preInfo[e],s.add>0?s.label=e+":"+t[e]+" +"+s.add:s.label=e+":"+t[e],n=RunProfile.getRunInfo(e),n&&n.record(),s.rank=1e3*s.add+s.count,this.preInfo[e]=t[e],i.push(s);i.sort(MathTools.sortByKey("rank",!0,!0)),this.view.itemList.array=i},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e}(UIViewBase),ObjectInfoView=function(t){function e(){this.view=null,this.showKeys=["x","y","width","height","renderCost"],this._closeSettingHandler=null,this._tar=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.ObjectInfoView",t);var i=e.prototype;return i.createPanel=function(){t.prototype.createPanel.call(this),this.view=new ObjectInfo,StyleConsts.setViewScale(this.view),this.addChild(this.view),this.inits()},i.inits=function(){this.view.closeBtn.on("click",this,this.close),this.view.settingBtn.on("click",this,this.onSettingBtn),this.view.autoUpdate.on("change",this,this.onAutoUpdateChange),DisControlTool.setDragingItem(this.view.bg,this.view),DisControlTool.setResizeAbleEx(this.view),this._closeSettingHandler=new Handler(this,this.closeSetting),this.dis=this.view},i.onAutoUpdateChange=function(){this.autoUpdate=this.view.autoUpdate.selected},i.onSettingBtn=function(){NodeTreeSettingView.I.showSetting(this.showKeys,this._closeSettingHandler,this._tar)},i.reset=function(){this.showKeys=["x","y","width","height","renderCost"]},i.closeSetting=function(t){this.showKeys=t,this.fresh()},i.showObjectInfo=function(t){this._tar=t,this.fresh(),this.show(),this.onAutoUpdateChange()},i.fresh=function(){this._tar?(this.view.title.text=ClassTool.getNodeClassAndName(this._tar),this.view.showTxt.text=e.getObjValueStr(this._tar,this.showKeys,!1)):(this.view.showTxt.text="",this.view.title.text="未选中对象")},i.freshKeyInfos=function(){this.fresh()},i.close=function(){t.prototype.close.call(this),this.autoUpdate=!1,Pool.recover("ObjectInfoView",this)},i.show=function(){t.prototype.show.call(this)},__getset(0,i,"autoUpdate",null,function(t){Laya.timer.clear(this,this.freshKeyInfos),t&&Laya.timer.loop(2e3,this,this.freshKeyInfos)}),e.getObjValueStr=function(t,i,s){void 0===s&&(s=!0);var n,o=0,r=0;for(e._txts.length=0,r=i.length,s&&(t.name?e._txts.push(ClassTool.getClassName(t)+"("+t.name+")"):e._txts.push(ClassTool.getClassName(t))),o=0;r>o;o++)n=i[o],e._txts.push(n+":"+e.getNodeValue(t,n));return e._txts.join("\n")},e.getNodeValue=function(t,e){var i;if(t instanceof laya.display.Sprite){var s;switch(s=t,e){case"gRec":i=NodeUtils.getGRec(s).toString();break;case"gAlpha":i=NodeUtils.getGAlpha(s)+"";break;case"cmdCount":i=NodeUtils.getNodeCmdCount(s)+"";break;case"cmdAll":i=NodeUtils.getNodeCmdTotalCount(s)+"";break;case"nodeAll":i=""+NodeUtils.getNodeCount(s);break;case"nodeVisible":i=""+NodeUtils.getNodeCount(s,!0);break;case"nodeRender":i=""+NodeUtils.getRenderNodeCount(s);break;case"nodeReCache":i=""+NodeUtils.getReFreshRenderNodeCount(s);break;case"renderCost":i=""+RenderAnalyser.I.getTime(s);break;case"renderCount":i=""+RenderAnalyser.I.getCount(s);break;default:i=t[e]+""}}else i=t[e]+"";return i},e.showObject=function(t){var i;i=Pool.getItemByClass("ObjectInfoView",e),i.reset(),i.showObjectInfo(t)},e._txts=[],e}(UIViewBase),OutPutView=function(t){function e(){this.view=null,e.__super.call(this),DebugTool._logFun=e.log}__class(e,"laya.debug.view.nodeInfo.views.OutPutView",t);var i=e.prototype;return i.createPanel=function(){this.view=new OutPut,DisControlTool.setDragingItem(this.view.txt,this.view),DisControlTool.setDragingItem(this.view.bg,this.view),StyleConsts.setViewScale(this.view),this.view.txt.textField.overflow=Text.SCROLL,this.view.txt.textField.wordWrap=!0,this.view.on("mousewheel",this,this.mouseWheel),this.view.txt.text="",DisControlTool.setResizeAbleEx(this.view),this.view.closeBtn.on("click",this,this.close),this.view.clearBtn.on("click",this,this.onClearBtn),this.dis=this.view},i.onClearBtn=function(){this.clearText()},i.mouseWheel=function(t){this.view.txt.textField.scrollY-=10*t.delta},i.showTxt=function(t){this.view.txt.text=t,this.show(),this.view.txt.textField.scrollY=this.view.txt.textField.maxScrollY},i.clearText=function(){this.view.txt.text=""},i.dTrace=function(t){var e=arguments;this.view.txt.textField.scrollY>1e3&&(this.view.txt.text="");var i,s=0,n=0;for(n=e.length,i=e[0],s=1;n>s;s++)i+=" "+e[s];this.addStr(i)},i.addStr=function(t){this.view.txt.text+="\n"+t,this.show(),this.view.txt.textField.scrollY=this.view.txt.textField.maxScrollY},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e.log=function(t){e.I.addStr(t)},e._I=null,e}(UIViewBase),RenderCostRankView=function(t){function e(){this.view=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.RenderCostRankView",t);
var i=e.prototype;return i.createPanel=function(){this.view=new Rank,this.view.top=this.view.bottom=this.view.left=this.view.right=0,this.addChild(this.view),NodeMenu.I.setNodeListAction(this.view.itemList),this.view.closeBtn.on("click",this,this.close),this.view.freshBtn.on("click",this,this.fresh),this.view.itemList.scrollBar.hide=!0,this.view.autoUpdate.on("change",this,this.onAutoUpdateChange),this.dis=this,this.view.itemList.array=[],this.onAutoUpdateChange(),this.fresh(),Laya.timer.once(5e3,this,this.fresh)},i.onRightClick=function(){var t;if(t=this.view.itemList,t.selectedItem){var e;e=t.selectedItem.path,NodeMenu.I.objRightClick(e)}},i.onAutoUpdateChange=function(){this.autoUpdate=this.view.autoUpdate.selected},i.fresh=function(){this.view.title.text="渲染用时排行("+NodeConsts.RenderCostMaxTime+"ms)";var t;t=RenderAnalyser.I.nodeDic;var i,s,n,o;o=[];for(i in t)s=t[i],e.filterDebugNodes&&DisControlTool.isInTree(DebugInfoLayer.I,s)||RenderAnalyser.I.getTime(s)<=0||(n={},n.time=RenderAnalyser.I.getTime(s),e.filterDebugNodes&&s==Laya.stage&&(n.time-=RenderAnalyser.I.getTime(DebugInfoLayer.I)),n.path=s,n.label=ClassTool.getNodeClassAndName(s)+":"+n.time,o.push(n));o.sort(MathTools.sortByKey("time",!0,!0)),this.view.itemList.array=o},__getset(0,i,"autoUpdate",null,function(t){Laya.timer.clear(this,this.fresh),t&&(this.fresh(),Laya.timer.loop(NodeConsts.RenderCostMaxTime,this,this.fresh))}),__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e.filterDebugNodes=!0,e}(UIViewBase),ResRankView=function(t){function e(){this.view=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.ResRankView",t);var i=e.prototype;return i.createPanel=function(){this.view=new Rank,this.view.top=this.view.bottom=this.view.left=this.view.right=0,this.addChild(this.view),this.view.closeBtn.on("click",this,this.close),this.view.freshBtn.on("click",this,this.fresh),this.view.itemList.scrollBar.hide=!0,this.view.autoUpdate.on("change",this,this.onAutoUpdateChange),this.dis=this,this.view.itemList.array=[],this.view.itemList.on("rightclick",this,this.onRightClick),this.onAutoUpdateChange(),this.fresh()},i.onRightClick=function(){var t;t=this.view.itemList,t.selectedItem&&console.log(t.selectedItem.url)},i.onAutoUpdateChange=function(){this.autoUpdate=this.view.autoUpdate.selected},i.fresh=function(){this.view.title.text="图片缓存列表";var t;t=ResTools.getCachedResList();var e,i;i=[];var s=0,n=0;for(n=t.length,s=0;n>s;s++){e={};var o;o=t[s],o=o.replace(URL.rootPath,""),e.label=o,e.url=o,i.push(e)}this.view.itemList.array=i},__getset(0,i,"autoUpdate",null,function(t){Laya.timer.clear(this,this.fresh),t&&(this.fresh(),Laya.timer.loop(NodeConsts.RenderCostMaxTime,this,this.fresh))}),__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e.filterDebugNodes=!0,e}(UIViewBase),SelectInfosView=function(t){function e(){this.showKeys=[],this.view=null,this.fliterTxt=null,this.itemList=null,e.__super.call(this),e._I=this,this.setSelectList(null)}__class(e,"laya.debug.view.nodeInfo.views.SelectInfosView",t);var i=e.prototype;return i.createPanel=function(){this.view=new SelectInfos,this.addChild(this.view),this.view.top=this.view.bottom=this.view.left=this.view.right=0,NodeMenu.I.setNodeListAction(this.view.selectList),this.view.closeBtn.on("click",this,this.close),this.view.selectList.scrollBar.hide=!0,this.dis=null,this.view.findBtn.on("click",this,this.onFindBtn),this.fliterTxt=this.view.fliterTxt,this.view.fliterTxt.on("enter",this,this.onFliterTxtChange),this.view.fliterTxt.on("blur",this,this.onFliterTxtChange)},i.onFliterTxtChange=function(t){var e;e=this.fliterTxt.text,""==e?0!=this.showKeys.length&&(this.showKeys.length=0,this.fresh()):e!=this.showKeys.join(",")&&(this.showKeys=e.split(","),this.fresh())},i.onFindBtn=function(){FindSmallView.I.show()},i.onRightClick=function(){var t;if(t=this.view.selectList,t.selectedItem){var e;e=t.selectedItem.path,NodeMenu.I.objRightClick(e)}},i.setSelectTarget=function(t){t&&this.setSelectList([t])},i.setSelectList=function(t){this.itemList=t,this.fresh()},i.fresh=function(){var t;if(t=this.itemList,!t||t.length<1)return void(this.view.selectList.array=[]);var e,i,s=0,n=0;n=t.length;var o;for(o=[],s=0;n>s;s++)e=t[s],i={},i.label=this.getLabelTxt(e),i.path=e,o.push(i);this.view.selectList.array=o},i.getLabelTxt=function(t){var e;e=ClassTool.getNodeClassAndName(t);var i=0,s=0;for(s=this.showKeys.length,i=0;s>i;i++)e+=","+ObjectInfoView.getNodeValue(t,this.showKeys[i]);return e},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e}(UIViewBase),ToolBarView=function(t){function e(){this.view=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.ToolBarView",t);var i=e.prototype;return i.createPanel=function(){this.view=new ToolBar,this.addChild(this.view),DisControlTool.setDragingItem(this.view.bg,this.view),this.view.on("click",this,this.onBtnClick),this.view.minBtn.minHandler=this.minHandler,this.view.minBtn.maxHandler=this.maxHandler,this.view.minBtn.tar=this.view,this.clickSelectChange(),this.view.selectWhenClick.on("change",this,this.clickSelectChange),Notice.listen("ItemClicked",this,this.itemClicked),this.dis=this.view},i.itemClicked=function(t){e.isClickSelectState&&(DisControlTool.isInTree(this.view.selectWhenClick,t)||e.ignoreDebugTool&&DebugInfoLayer.I.isDebugItem(t))},i.clickSelectChange=function(){e.isClickSelectState=this.view.selectWhenClick.selected},i.firstShowFun=function(){this.dis.x=Laya.stage.width-this.dis.width-20,this.dis.y=5},i.onBtnClick=function(t){switch(t.target){case this.view.treeBtn:ToolPanel.I.switchShow("Tree");break;case this.view.findBtn:ToolPanel.I.switchShow("Find");break;case this.view.clearBtn:DebugTool.clearDebugLayer();break;case this.view.rankBtn:RenderCostRankView.I.show();break;case this.view.nodeRankBtn:ObjectCreateView.I.show();break;case this.view.cacheBtn:NodeUtils.showCachedSpriteRecs()}},__getset(1,e,"I",function(){return e._I||(e._I=new e),e._I},laya.debug.view.nodeInfo.views.UIViewBase._$SET_I),e._I=null,e.ignoreDebugTool=!0,e.isClickSelectState=!1,e}(UIViewBase),TxtInfoView=function(t){function e(){this.input=null,this.btn=null,e.__super.call(this)}__class(e,"laya.debug.view.nodeInfo.views.TxtInfoView",t);var i=e.prototype;return i.createPanel=function(){this.input=new Input,this.input.size(200,400),this.input.multiline=!0,this.input.bgColor="#ff00ff",this.input.fontSize=12,this.input.wordWrap=!0,this.addChild(this.input),this.btn=this.getButton(),this.btn.text="关闭",this.btn.size(50,20),this.btn.align="center",this.btn.on("mousedown",this,this.onCloseBtn),this.btn.pos(5,this.input.height+5),this.addChild(this.btn)},i.showInfo=function(t){this.input.text=t,this.show()},i.show=function(){DebugInfoLayer.I.setTop(),DebugInfoLayer.I.popLayer.addChild(this),this.x=Laya.stage.width-this.width,this.y=0},i.onCloseBtn=function(){this.close()},e}(UIViewBase),DInput=function(t){function e(){e.__super.call(this),this.bgColor="#11ff00"}return __class(e,"laya.debug.tools.debugUI.DInput",t),e}(Input),CheckBox=function(t){function e(t,i){void 0===i&&(i=""),e.__super.call(this,t,i)}__class(e,"laya.ui.CheckBox",t);var i=e.prototype;return i.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},i.initialize=function(){t.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},__getset(0,i,"dataSource",t.prototype._$get_dataSource,function(e){this._dataSource=e,"boolean"==typeof e?this.selected=e:"string"==typeof e?this.selected="true"===e:t.prototype._$set_dataSource.call(this,e)}),e}(Button),Radio=function(t){function e(t,i){this._value=null,void 0===i&&(i=""),e.__super.call(this,t,i)}__class(e,"laya.ui.Radio",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._value=null},i.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},i.initialize=function(){t.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},i.onClick=function(t){this.selected=!0},__getset(0,i,"value",function(){return null!=this._value?this._value:this.label},function(t){this._value=t}),e}(Button),FontClip=function(t){function e(t,i){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,e.__super.call(this),t&&(this.skin=t),i&&(this.sheet=i)}__class(e,"laya.ui.FontClip",t);var i=e.prototype;return i.createChildren=function(){this._bitmap=new AutoBitmap,this.on("loaded",this,this._onClipLoaded)},i._onClipLoaded=function(){this.callLater(this.changeValue)},i.changeValue=function(){if(this._sources&&this._valueArr){this.graphics.clear();for(var t,e="horizontal"===this._direction,i=0,s=this._valueArr.length;s>i;i++){var n=this._indexMap[this._valueArr[i]];this.sources[n]&&(t=this.sources[n],e?this.graphics.drawTexture(t,i*(t.width+this.spaceX),0,t.width,t.height):this.graphics.drawTexture(t,0,i*(t.height+this.spaceY),t.width,t.height))}t&&(e?this.size(this._valueArr.length*(t.width+this.spaceX),t.height):this.size(t.width,(t.height+this.spaceY)*this._valueArr.length))}},i.destroy=function(e){void 0===e&&(e=!0),this._valueArr=null,this._indexMap=null,this._indexMap=null,this.graphics.clear(),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),t.prototype.destroy.call(this,e)},__getset(0,i,"sheet",function(){return this._sheet},function(t){t+="",this._sheet=t;var e=t.split(" ");this._clipX=String(e[0]).length,this.clipY=e.length,this._indexMap={};for(var i=0;i<this._clipY;i++)for(var s=e[i].split(""),n=0,o=s.length;o>n;n++)this._indexMap[s[n]]=i*this._clipX+n}),__getset(0,i,"direction",function(){return this._direction},function(t){this._direction=t,this.callLater(this.changeValue)}),__getset(0,i,"value",function(){return this._valueArr?this._valueArr.join(""):""},function(t){t+="",this._valueArr=t.split(""),this.callLater(this.changeValue)}),__getset(0,i,"spaceX",function(){return this._spaceX},function(t){this._spaceX=t,"horizontal"===this._direction&&this.callLater(this.changeValue)}),__getset(0,i,"spaceY",function(){return this._spaceY},function(t){this._spaceY=t,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),e}(Clip),HScrollBar=function(t){function e(){e.__super.call(this)}__class(e,"laya.ui.HScrollBar",t);var i=e.prototype;return i.initialize=function(){t.prototype.initialize.call(this),this.slider.isVertical=!1},e}(ScrollBar),HSlider=function(t){function e(t){e.__super.call(this,t),this.isVertical=!1}return __class(e,"laya.ui.HSlider",t),e}(Slider),VScrollBar=function(t){function e(){e.__super.call(this)}return __class(e,"laya.ui.VScrollBar",t),e}(ScrollBar),TextInput=function(t){function e(t){this._bg=null,this._skin=null,e.__super.call(this),void 0===t&&(t=""),this.text=t,this.skin=this.skin}__class(e,"laya.ui.TextInput",t);var i=e.prototype;return i.preinitialize=function(){this.mouseEnabled=!0},i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._bg&&this._bg.destroy(),this._bg=null},i.createChildren=function(){this.addChild(this._tf=new Input),this._tf.padding=Styles.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},i._onFocus=function(){this.event("focus",this)},i._onBlur=function(){this.event("blur",this)},i._onInput=function(){this.event("input",this)},i._onEnter=function(){this.event("enter",this)},i.initialize=function(){this.width=128,this.height=22},i.select=function(){this._tf.select()},i.setSelection=function(t,e){this._tf.setSelection(t,e)},__getset(0,i,"text",t.prototype._$get_text,function(t){this._tf.text!=t&&(t+="",this._tf.text=t,this.event("change"))}),__getset(0,i,"bg",function(){return this._bg},function(t){this.graphics=this._bg=t}),__getset(0,i,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(t){this._tf.inputElementYAdjuster=t}),__getset(0,i,"multiline",function(){return this._tf.multiline},function(t){this._tf.multiline=t}),__getset(0,i,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._bg||(this.graphics=this._bg=new AutoBitmap),this._bg.source=Loader.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),__getset(0,i,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(t){this._bg||(this.graphics=this._bg=new AutoBitmap),this._bg.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,t,Number)}),__getset(0,i,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(t){this._tf.inputElementXAdjuster=t}),__getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this._bg&&(this._bg.width=e)}),__getset(0,i,"height",t.prototype._$get_height,function(e){t.prototype._$set_height.call(this,e),this._bg&&(this._bg.height=e)}),__getset(0,i,"editable",function(){return this._tf.editable},function(t){this._tf.editable=t}),__getset(0,i,"restrict",function(){return this._tf.restrict},function(t){this._tf.restrict=t}),__getset(0,i,"prompt",function(){return this._tf.prompt},function(t){this._tf.prompt=t}),__getset(0,i,"promptColor",function(){return this._tf.promptColor},function(t){this._tf.promptColor=t}),__getset(0,i,"maxChars",function(){return this._tf.maxChars},function(t){this._tf.maxChars=t}),__getset(0,i,"focus",function(){return this._tf.focus},function(t){this._tf.focus=t}),__getset(0,i,"type",function(){return this._tf.type},function(t){this._tf.type=t}),__getset(0,i,"asPassword",function(){return this._tf.asPassword},function(t){this._tf.asPassword=t}),e}(Label),VSlider=function(t){function e(){e.__super.call(this)}return __class(e,"laya.ui.VSlider",t),e}(Slider),GraphicAnimation=function(t){function e(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,e.__super.call(this)}var i;__class(e,"laya.utils.GraphicAnimation",t);var s=e.prototype;return s._parseNodeList=function(t){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[t.compId]=t.props,t.compId&&this._nodeList.push(t.compId);var e=t.child;if(e){var i=0,s=e.length;for(i=0;s>i;i++)this._parseNodeList(e[i])}},s._calGraphicData=function(t){this._setUp(null,t),this._createGraphicData()},s._createGraphicData=function(){var t=[],e=0,i=this.count,s=this._animationNewFrames;s||(s=[]);var n;for(e=0;i>e;e++)!s[e]&&n||(n=this._createFrameGraphic(e)),t.push(n);this._gList=t},s._createFrameGraphic=function(t){var i=new Graphics;return e._rootMatrix||(e._rootMatrix=new Matrix),this._updateNodeGraphic(this._rootNode,t,e._rootMatrix,i),i},s._updateNodeGraphic=function(t,e,i,s,n){void 0===n&&(n=1);var o;o=this._nodeGDic[t.compId]=this._getNodeGraphicData(t.compId,e,this._nodeGDic[t.compId]),o.resultTransform||(o.resultTransform=new Matrix);var r;r=o.resultTransform,Matrix.mul(o.transform,i,r);var a,h=o.alpha*n;if(!(.01>h)){o.skin&&(a=this._getTextureByUrl(o.skin),a&&(r._checkTransform()?(s.drawTexture(a,0,0,o.width,o.height,r,h),o.resultTransform=null):s.drawTexture(a,r.tx,r.ty,o.width,o.height,null,h)));var l;if(l=t.child){var c=0,u=0;for(u=l.length,c=0;u>c;c++)this._updateNodeGraphic(l[c],e,r,s,h)}}},s._updateNoChilds=function(t,e){if(t.skin){var i=this._getTextureByUrl(t.skin);if(i){var s=t.transform;s._checkTransform();var n=!1;n=!s.bTransform,n?e.drawTexture(i,s.tx,s.ty,t.width,t.height,null,t.alpha):e.drawTexture(i,0,0,t.width,t.height,s.clone(),t.alpha)}}},s._updateNodeGraphic2=function(t,e,i){var s;if(s=this._nodeGDic[t.compId]=this._getNodeGraphicData(t.compId,e,this._nodeGDic[t.compId]),!t.child)return void this._updateNoChilds(s,i);var n=s.transform;n._checkTransform();var o=!1;o=!n.bTransform;var r=!1;r=o&&(0!=n.tx||0!=n.ty);var a=!1;a=n.bTransform||1!=s.alpha,a&&i.save(),1!=s.alpha&&i.alpha(s.alpha),o?r&&i.translate(n.tx,n.ty):i.transform(n.clone());var h;h=t.child;var l;if(s.skin&&(l=this._getTextureByUrl(s.skin),l&&i.drawTexture(l,0,0,s.width,s.height)),h){var c=0,u=0;for(u=h.length,c=0;u>c;c++)this._updateNodeGraphic2(h[c],e,i)}a?i.restore():o?r&&i.translate(-n.tx,-n.ty):i.transform(n.clone().invert())},s._calculateNodeKeyFrames=function(e){t.prototype._calculateNodeKeyFrames.call(this,e),this._nodeIDAniDic[e.target]=e},s.getNodeDataByID=function(t){return this._nodeIDAniDic[t]},s._getParams=function(t,i,s,n){var o=e._temParam;o.length=i.length;var r=0,a=i.length;for(r=0;a>r;r++)o[r]=this._getObjVar(t,i[r][0],s,i[r][1],n);return o},s._getObjVar=function(t,e,i,s,n){if(t.hasOwnProperty(e)){var o=t[e];return i>=o.length&&(i=o.length-1),t[e][i]}return n.hasOwnProperty(e)?n[e]:s},s._getNodeGraphicData=function(t,s,n){n||(n=new i),n.transform?n.transform.identity():n.transform=new Matrix;var o=this.getNodeDataByID(t);if(!o)return n;var r=o.frames,a=this._getParams(r,e._drawTextureCmd,s,this._nodeDefaultProps[t]),h=a[0],l=NaN,c=NaN,u=a[5],_=a[6],d=a[13],f=a[14],p=a[7],g=a[8],m=a[9],y=a[11],v=a[12];l=a[3],c=a[4];var w;n.skin=h,n.width=l,n.height=c,h&&(w=this._getTextureByUrl(h),w?(l||(l=w.sourceWidth),c||(c=w.sourceHeight)):console.warn("lost skin:",h,",you may load pics first")),n.alpha=a[10];var C;C=n.transform,0!=d&&(u=d*l),0!=f&&(_=f*c),0==u&&0==_||C.translate(-u,-_);var b=null;if(m||1!==p||1!==g||y||v){b=e._tempMt,b.identity(),b.bTransform=!0;var x=.0174532922222222*(m-y),S=.0174532922222222*(m+v),T=Math.cos(S),I=Math.sin(S),A=Math.sin(x),B=Math.cos(x);b.a=p*T,b.b=p*I,b.c=-g*A,b.d=g*B,b.tx=b.ty=0}return b&&(C=Matrix.mul(C,b,C)),C.translate(a[1],a[2]),n},s._getTextureByUrl=function(t){return Loader.getRes(t)},s.setAniData=function(t,i){if(t.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=t,this._parseNodeList(t);var s,n={},o=[],r=t.animations,a=0,h=r.length;for(a=0;h>a;a++)if(s=r[a],this._labels=null,(!i||i==s.name)&&s){try{this._calGraphicData(s)}catch(l){console.warn("parse animation fail:"+s.name+",empty animation created"),this._gList=[]}var c={};c.interval=1e3/s.frameRate,c.frames=this._gList,c.labels=this._labels,c.name=s.name,o.push(c),n[s.name]=c}this.animationList=o,this.animationDic=n}e._temParam.length=0},s.parseByData=function(t){var e,i;e=t.nodeRoot,i=t.aniO,delete t.nodeRoot,delete t.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=e,this._parseNodeList(e),this._labels=null;try{this._calGraphicData(i)}catch(s){console.warn("parse animation fail:"+i.name+",empty animation created"),this._gList=[]}var n=t;return n.interval=1e3/i.frameRate,n.frames=this._gList,n.labels=this._labels,n.name=i.name,n},s.setUpAniData=function(t){if(t.animations){var e,i={},s=[],n=t.animations,o=0,r=n.length;for(o=0;r>o;o++)if(e=n[o]){var a={};a.name=e.name,a.aniO=e,a.nodeRoot=t,s.push(a),i[e.name]=a}this.animationList=s,this.animationDic=i}},s._clear=function(){this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic=null},e.parseAnimationByData=function(t){e._I||(e._I=new e);var i;return i=e._I.parseByData(t),e._I._clear(),i},e.parseAnimationData=function(t){e._I||(e._I=new e),e._I.setUpAniData(t);var i;return i={},i.animationList=e._I.animationList,i.animationDic=e._I.animationDic,e._I._clear(),i},e._temParam=[],e._I=null,e._rootMatrix=null,__static(e,["_drawTextureCmd",function(){return this._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",0],["height",0],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]]},"_tempMt",function(){return this._tempMt=new Matrix}]),e.__init$=function(){i=function(){function t(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return __class(t,""),t}()},e}(FrameAnimation),CircleUI=function(t){function e(){this.m_list=null,e.__super.call(this)}__class(e,"ui.circle.CircleUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:750,height:1334},child:[{type:"Box",props:{y:0,x:0,width:750,height:1334},child:[{type:"Image",props:{x:0,width:750,skin:"comp/bg.png",sizeGrid:"28,5,5,4",height:1334}},{type:"Image",props:{y:0,x:0,width:753,skin:"schedule/dizuo.png",sizeGrid:"10,13,15,16",height:282}},{type:"TextInput",props:{y:8,x:290,width:166,text:"圈子",height:64,fontSize:50,font:"Microsoft YaHei",bold:!0,align:"center"}},{type:"TextInput",props:{y:1,x:652,width:88,text:"发布",height:62,fontSize:36,font:"Microsoft YaHei",color:"#3d599f",bold:!0,align:"center"}},{type:"TextInput",props:{y:96,x:93,width:138,text:"结伴",height:55,fontSize:40,font:"Microsoft YaHei",align:"center"}},{type:"TextInput",props:{y:96,x:522,width:130,text:"记录",height:67,fontSize:40,font:"Microsoft YaHei",align:"center"}},{type:"TextInput",props:{y:195,x:37,width:163,text:"出发时间",promptColor:"#36569a",height:65,fontSize:30,font:"Microsoft YaHei",color:"#3a9da6"}},{type:"List",props:{y:282,x:-2,width:748,"var":"m_list",vScrollBarSkin:"comp/vscroll.png",repeatY:7,repeatX:1,height:990},child:[{type:"Box",props:{y:0,x:0,width:750,name:"render",height:476,alpha:1},child:[{type:"TextInput",props:{y:3,x:168,width:182,text:"幸福人生",height:48,fontSize:36,font:"Microsoft YaHei",editable:!1}},{type:"TextInput",props:{y:71,x:169,width:125,text:"2017.1.14",height:22,fontSize:20,color:"#605d5d"}},{type:"TextInput",props:{y:68,x:327,width:104,text:"深圳出发",height:28,fontSize:20,color:"#4ba473",bgColor:"#c7d4c2",alpha:.7,align:"center"}},{type:"Image",props:{y:14,x:41,width:112,skin:"schedule/car.png",height:112}},{type:"TextInput",props:{y:18,x:656,width:82,text:"1小时前",height:22,fontSize:20,disabled:!0,color:"#716262"}},{type:"TextInput",props:{y:142,x:58,width:661,text:"6月7号深圳出发上海有结伴一起出发的",height:55,fontSize:36,font:"Microsoft YaHei",disabled:!0}},{type:"Image",props:{y:422,x:75,width:40,skin:"circle/biaozhu.png",height:44}},{type:"TextInput",props:{y:433,x:129,width:66,text:"深圳",height:22,fontSize:20,disabled:!0}},{type:"Image",props:{y:206,x:67,width:248,skin:"comp/image.png",height:203}},{type:"TextInput",props:{y:433,x:199,width:65,text:"删除",height:22,fontSize:20,disabled:!0,color:"#4a7f74"}},{type:"Label",props:{y:433,x:643,text:"1",name:"thumbs_up",fontSize:20,disabled:!0}},{type:"Label",props:{y:433,x:723,text:"1",fontSize:20,disabled:!0}},{type:"Image",props:{y:422,x:586,width:40,skin:"circle/zanl_icon.png",height:40}},{type:"Image",props:{y:422,x:669,width:40,skin:"circle/talk.png",height:40}}]}]}]}]},e}(View),ScheduleUI=function(t){function e(){this.search=null,this.searchInput=null,this.searchCombox=null,this.car=null,this.overview=null,this.start=null,this.end=null,this.man=null,e.__super.call(this)}__class(e,"ui.schedule.ScheduleUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:750,height:1334},child:[{type:"Box",props:{y:61,x:24,"var":"search"},child:[{type:"Image",props:{width:702,skin:"schedule/dizuo.png",sizeGrid:"13,19,22,21",height:96}},{type:"TextInput",props:{y:7,x:195,width:460,"var":"searchInput",text:"搜索景点",height:76,fontSize:33,color:"#a19999"}},{type:"Image",props:{y:28,x:644,skin:"schedule/ser.png"}},{type:"ComboBox",props:{y:4,x:29,width:120,"var":"searchCombox",skin:"comp/combobox.png",sizeGrid:"-1,0,0,-4",selectedIndex:0,labels:"宝安区,福田区",labelSize:34,labelColors:"0x00",height:76}}]},{type:"Image",props:{y:1050,x:584,"var":"car",skin:"schedule/car.png"}},{type:"Box",props:{y:300,x:640,"var":"overview"},child:[{type:"Image",props:{width:79,skin:"schedule/dizuo.png",sizeGrid:"11,23,18,21",height:120}},{type:"TextInput",props:{y:41,x:16,wordWrap:!0,width:52,text:"赛程总览",skin:"comp/textinput.png",height:60,fontSize:20,color:"#060404",bold:!0}}]},{type:"Image",props:{y:598,x:476,"var":"start",skin:"schedule/start.png"}},{type:"Image",props:{y:256,x:228,"var":"end",skin:"schedule/end.png"}},{type:"Image",props:{y:306,x:480,"var":"man",skin:"schedule/xingzou.png"}}]},e}(View),TestPageUI=function(t){function e(){this.btn=null,this.clip=null,this.combobox=null,this.tab=null,this.list=null,this.btn2=null,this.check=null,this.radio=null,this.box=null,e.__super.call(this)}__class(e,"ui.test.TestPageUI",t);var i=e.prototype;return i.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",child:[{props:{x:0,y:0,skin:"comp/bg.png",sizeGrid:"30,4,4,4",width:600,height:400},type:"Image"},{props:{x:41,y:56,skin:"comp/button.png",label:"点我赋值",width:150,height:37,sizeGrid:"4,4,4,4","var":"btn"},type:"Button"},{props:{x:401,y:56,skin:"comp/clip_num.png",clipX:10,"var":"clip"},type:"Clip"},{props:{x:220,y:143,skin:"comp/combobox.png",labels:"select1,select2,selecte3",selectedIndex:1,sizeGrid:"4,20,4,4",width:200,height:23,"var":"combobox"},type:"ComboBox"},{props:{x:220,y:96,skin:"comp/tab.png",labels:"tab1,tab2,tab3","var":"tab"},type:"Tab"},{props:{x:259,y:223,skin:"comp/vscroll.png",height:150},type:"VScrollBar"},{props:{x:224,y:223,skin:"comp/vslider.png",height:150},type:"VSlider"},{type:"List",child:[{type:"Box",child:[{props:{skin:"comp/label.png",text:"this is a list",x:26,y:5,width:78,height:20,fontSize:14,name:"label"},type:"Label"},{props:{x:0,y:2,skin:"comp/clip_num.png",clipX:10,name:"clip"},type:"Clip"}],props:{name:"render",x:0,y:0,width:112,height:30}}],props:{x:452,y:68,width:128,height:299,vScrollBarSkin:"comp/vscroll.png",repeatX:1,"var":"list"}},{props:{x:563,y:4,skin:"comp/btn_close.png",name:"close"},type:"Button"},{props:{x:41,y:112,skin:"comp/button.png",label:"点我赋值",width:150,height:66,sizeGrid:"4,4,4,4",labelSize:30,labelBold:!0,"var":"btn2"},type:"Button"},{props:{x:220,y:188,skin:"comp/checkbox.png",label:"checkBox1","var":"check"},type:"CheckBox"},{props:{x:220,y:61,skin:"comp/radiogroup.png",labels:"radio1,radio2,radio3","var":"radio"},type:"RadioGroup"},{type:"Panel",child:[{props:{skin:"comp/image.png"},type:"Image"}],props:{x:299,y:223,width:127,height:150,vScrollBarSkin:"comp/vscroll.png"}},{props:{x:326,y:188,skin:"comp/checkbox.png",label:"checkBox2",labelColors:"#ff0000"},type:"CheckBox"},{type:"Box",child:[{props:{y:70,skin:"comp/progress.png",width:150,height:14,sizeGrid:"4,4,4,4",name:"progress"},type:"ProgressBar"},{props:{y:103,skin:"comp/label.png",text:"This is a Label",width:137,height:26,fontSize:20,name:"label"},type:"Label"},{props:{y:148,skin:"comp/textinput.png",text:"textinput",width:150,name:"input"},type:"TextInput"},{props:{skin:"comp/hslider.png",width:150,name:"slider"},type:"HSlider"},{props:{y:34,skin:"comp/hscroll.png",width:150,name:"scroll"},type:"HScrollBar"}],props:{x:41,y:197,"var":"box"}}],props:{width:600,height:400}},e}(View),ListItemUI=function(t){function e(){e.__super.call(this)}__class(e,"laya.debug.ui.debugui.comps.ListItemUI",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},__static(e,["uiView",function(){return this.uiView={type:"View",props:{base64pic:!0,width:244,height:19},child:[{type:"Clip",props:{y:-1,skin:"comp/clip_selectBox.png",clipY:2,height:19,name:"selectBox",left:2,right:2,x:0}},{type:"Label",props:{x:25,text:"render",color:"#dcea36",width:77,height:17,name:"label",y:2,fontSize:12}},{type:"Clip",props:{skin:"comp/clip_tree_arrow.png",clipY:2,name:"arrow",x:8,y:4,mouseEnabled:!1}}]}}]),e}(View),RankListItemUI=function(t){function e(){e.__super.call(this)}__class(e,"laya.debug.ui.debugui.comps.RankListItemUI",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{y:-1,skin:"comp/clip_selectBox.png",clipY:2,height:19,name:"selectBox",left:0,right:0,x:0},type:"Clip"},{props:{text:"render",color:"#a0a0a0",height:15,name:"label",y:2,left:11,right:5,fontSize:12,x:11,width:163},type:"Label"}],props:{width:179,height:19}}}]),e}(View),DebugPanelUI=function(t){function e(){this.bg=null,this.minBtn=null,this.treePanel=null,this.selectWhenClick=null,this.profilePanel=null,this.resizeBtn=null,this.mouseAnalyseBtn=null,this.dragIcon=null,this.clearBtn=null,this.selectPanel=null,this.tab=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.DebugPanelUI",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){View.regComponent("laya.debug.view.nodeInfo.nodetree.MinBtnComp",MinBtnComp),View.regComponent("laya.debug.view.nodeInfo.views.NodeTreeView",NodeTreeView),View.regComponent("laya.debug.view.nodeInfo.nodetree.Profile",Profile),View.regComponent("laya.debug.view.nodeInfo.views.SelectInfosView",SelectInfosView)},__static(e,["uiView",function(){return this.uiView={type:"View",props:{base64pic:!0,width:260,height:400},child:[{type:"Image",props:{x:205,y:254,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,"var":"bg",sizeGrid:"5,5,5,5"}},{type:"Image",props:{y:0,skin:"view/bg_top.png",left:0,right:0}},{type:"MinBtnComp",props:{y:-3,"var":"minBtn",runtime:"laya.debug.view.nodeInfo.nodetree.MinBtnComp",right:-3,x:207}},{type:"NodeTree",props:{left:0,right:0,top:32,bottom:0,name:"节点树","var":"treePanel",runtime:"laya.debug.view.nodeInfo.views.NodeTreeView"}},{type:"CheckBox",props:{x:8,y:9,skin:"view/clickselect.png",toolTip:"点击选取","var":"selectWhenClick",mouseEnabled:!0,width:14,height:14}},{type:"Profile",props:{name:"性能",top:32,right:0,left:0,bottom:0,"var":"profilePanel",runtime:"laya.debug.view.nodeInfo.nodetree.Profile"}},{type:"Button",props:{x:169,y:247,skin:"view/resize.png",right:2,bottom:2,name:"resizeBtn","var":"resizeBtn",stateNum:3}},{type:"Clip",props:{y:9,skin:"view/clickanalyse.png","var":"mouseAnalyseBtn",toolTip:"拖动选取",left:33,x:33,clipY:3}},{type:"Clip",props:{y:0,skin:"view/clickanalyse.png","var":"dragIcon",x:33,clipY:3}},{type:"Button",props:{y:7,skin:"view/res.png",stateNum:2,toolTip:"清除边框","var":"clearBtn",right:34,x:184}},{type:"SelectInfos",props:{top:32,left:0,right:0,bottom:0,name:"选中","var":"selectPanel",runtime:"laya.debug.view.nodeInfo.views.SelectInfosView"}},{type:"Tab",props:{x:59,y:0,name:"tab","var":"tab",selectedIndex:0},child:[{type:"Button",props:{skin:"view/tab_panel.png",label:"节点",width:42,height:32,name:"item0",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:42,skin:"view/tab_panel.png",label:"查询",width:42,height:32,name:"item1",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:84,skin:"view/tab_panel.png",label:"性能",width:42,height:32,name:"item2",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}}]}]}}]),e}(View),FindNodeSmallUI=function(t){function e(){this.bg=null,this.closeBtn=null,this.title=null,this.typeSelect=null,this.findTxt=null,this.findBtn=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.FindNodeSmallUI",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:185,y:234,skin:"view/bg_tool.png",left:0,right:0,top:0,bottom:0,"var":"bg"},type:"Image"
},{props:{x:185,y:15,skin:"view/btn_close.png","var":"closeBtn",top:2,right:2},type:"Button"},{props:{x:6,y:4,text:"查找对象",width:67,height:20,color:"#288edf","var":"title"},type:"Label"},{props:{x:60,y:81,skin:"comp/combobox.png",labels:"name,class",width:63,height:21,"var":"typeSelect",sizeGrid:"5,35,5,5",labelColors:"#a0a0a0,#fffff,#ffffff#fffff"},type:"ComboBox"},{props:{x:27,y:83,text:"类型",width:27,height:20,color:"#288edf",align:"right"},type:"Label"},{props:{x:7,y:40,text:"包含内容",width:47,height:20,color:"#288edf",align:"right"},type:"Label"},{props:{x:60,y:37,skin:"comp/textinput.png",text:"Sprite",width:164,height:22,"var":"findTxt",sizeGrid:"5,5,5,5",color:"#a0a0a0"},type:"TextInput"},{props:{x:158,y:79,skin:"comp/button.png",label:"查找",width:65,height:23,"var":"findBtn",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"},type:"Button"}],props:{base64pic:!0,width:233,height:120}}}]),e}(View),FindNodeUI=function(t){function e(){this.bg=null,this.closeBtn=null,this.title=null,this.typeSelect=null,this.findTxt=null,this.result=null,this.findBtn=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.FindNodeUI",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){View.regComponent("laya.debug.uicomps.RankListItem",RankListItem)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:185,y:234,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,"var":"bg",sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:185,y:15,skin:"view/btn_close.png","var":"closeBtn",top:2,right:2},type:"Button"},{props:{x:6,y:4,text:"查找对象",width:67,height:20,color:"#88ef19","var":"title"},type:"Label"},{props:{x:52,y:75,skin:"comp/combobox.png",labels:"name,class",width:63,height:21,"var":"typeSelect",sizeGrid:"5,35,5,5",labelColors:"#a0a0a0,#fffff,#ffffff#fffff"},type:"ComboBox"},{props:{x:10,y:77,text:"类型",width:27,height:20,color:"#88ef19",align:"right"},type:"Label"},{props:{x:7,y:34,text:"包含内容",width:47,height:20,color:"#88ef19",align:"right"},type:"Label"},{props:{x:59,y:31,skin:"comp/textinput.png",text:"Sprite",width:131,height:22,"var":"findTxt",sizeGrid:"5,5,5,5",color:"#a0a0a0"},type:"TextInput"},{type:"List",child:[{type:"RankListItem",props:{y:30,left:5,right:5,name:"render",x:30,runtime:"laya.debug.uicomps.RankListItem"}}],props:{x:6,y:106,width:188,height:180,vScrollBarSkin:"comp/vscroll.png","var":"result"}},{props:{x:125,y:73,skin:"comp/button.png",label:"查找",width:65,height:23,"var":"findBtn",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"},type:"Button"}],props:{width:200,height:300,base64pic:!0}}}]),e}(View),MinBtnCompUI=function(t){function e(){this.minBtn=null,this.maxUI=null,this.bg=null,this.maxBtn=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.MinBtnCompUI",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:7,y:8,skin:"comp/minBtn.png",stateNum:"3","var":"minBtn",width:22,height:20,toolTip:"最小化"},type:"Button"},{type:"Box",child:[{props:{x:0,y:0,skin:"view/bg_panel.png","var":"bg",width:36,height:36,sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:6,y:8,skin:"view/zoom_out.png",stateNum:"2","var":"maxBtn"},type:"Button"}],props:{"var":"maxUI"}}],props:{width:36,height:36,base64pic:!0}}}]),e}(View),NodeListPanelUI=function(t){function e(){this.bg=null,this.closeBtn=null,this.title=null,this.itemList=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.NodeListPanelUI",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){View.regComponent("laya.debug.uicomps.RankListItem",RankListItem)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:235,y:284,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,"var":"bg",sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:204,y:32,skin:"view/btn_close.png","var":"closeBtn",top:2,right:2,visible:!0},type:"Button"},{props:{x:10,y:6,text:"节点信息",width:147,height:16,color:"#288edf","var":"title"},type:"Label"},{type:"List",child:[{type:"RankListItem",props:{left:5,right:5,name:"render",runtime:"laya.debug.uicomps.RankListItem"}}],props:{vScrollBarSkin:"comp/vscroll.png","var":"itemList",left:2,right:2,top:26,bottom:0,repeatX:1,x:20}}],props:{width:200,height:300}}}]),e}(View),NodeToolUI=function(t){function e(){this.bg=null,this.closeBtn=null,this.tarTxt=null,this.freshBtn=null,this.mouseAnalyseBtn=null,this.dragIcon=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.NodeToolUI",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},__static(e,["uiView",function(){return this.uiView={type:"View",props:{base64pic:!0,width:200,height:341},child:[{type:"Image",props:{x:195,y:244,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,"var":"bg",sizeGrid:"5,5,5,5"}},{type:"Label",props:{x:9,y:5,text:"当前选中对象",width:67,height:16,color:"#a0a0a0"}},{type:"Button",props:{x:195,y:25,skin:"view/btn_close.png","var":"closeBtn",top:2,right:2}},{type:"Label",props:{x:10,y:25,text:"当前对象",width:67,height:16,color:"#a0a0a0","var":"tarTxt"}},{type:"Button",props:{x:15,y:65,skin:"comp/button.png",label:"父链",width:39,height:23,mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:66,y:65,skin:"comp/button.png",label:"子",width:35,height:23,mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:112,y:65,skin:"comp/button.png",label:"兄弟",width:49,height:23,mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:13,y:117,skin:"comp/button.png",label:"Enable链",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:100,y:117,skin:"comp/button.png",label:"Size链",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Label",props:{x:14,y:97,text:"节点链信息",width:67,height:16,color:"#a0a0a0"}},{type:"Label",props:{x:15,y:45,text:"对象选取",width:67,height:16,color:"#a0a0a0"}},{type:"Label",props:{x:16,y:145,text:"节点显示",width:67,height:16,color:"#a0a0a0"}},{type:"Button",props:{x:13,y:164,skin:"comp/button.png",label:"隐藏旁支",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:100,y:164,skin:"comp/button.png",label:"隐藏兄弟",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:13,y:197,skin:"comp/button.png",label:"隐藏子",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:99,y:197,skin:"comp/button.png",label:"恢复",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Label",props:{x:15,y:228,text:"其他",width:67,height:16,color:"#a0a0a0"}},{type:"Button",props:{x:12,y:247,skin:"comp/button.png",label:"节点树定位",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:99,y:247,skin:"comp/button.png",label:"显示边框",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Label",props:{x:12,y:315,text:"Alt+A分析鼠标能否够点中对象",width:173,height:16,color:"#a0a0a0"}},{type:"Button",props:{x:156,y:1,skin:"view/refresh2.png","var":"freshBtn",left:156,toolTip:"recache节点"}},{type:"Button",props:{x:12,y:279,skin:"comp/button.png",label:"输出到控制台",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Button",props:{x:99,y:279,skin:"comp/button.png",label:"显示切换",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"}},{type:"Clip",props:{y:44,skin:"view/clickanalyse.png","var":"mouseAnalyseBtn",toolTip:"拖动到对象上方判断是否能够点中",left:84,x:84,clipY:3}},{type:"Clip",props:{y:35,skin:"view/clickanalyse.png","var":"dragIcon",x:94,clipY:3}}]}}]),e}(View),NodeTreeSettingUI=function(t){function e(){this.bg=null,this.showTxt=null,this.okBtn=null,this.closeBtn=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.NodeTreeSettingUI",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:0,y:0,skin:"view/bg_panel.png",left:0,top:0,bottom:0,right:0,"var":"bg",width:200,height:300,sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:9,y:7,text:"要显示的属性",width:76,height:16,color:"#ffffff",align:"left"},type:"Label"},{props:{x:6,y:29,skin:"comp/textinput.png",text:"x\\ny\\nwidth\\nheight",width:188,height:230,multiline:!0,"var":"showTxt",color:"#a0a0a0",sizeGrid:"5,5,5,5"},type:"TextInput"},{props:{x:57,y:269,skin:"comp/button.png",label:"确定","var":"okBtn",mouseEnabled:"true",labelColors:"#ffffff,#ffffff,#ffffff,#ffffff"},type:"Button"},{props:{x:175,y:5,skin:"view/btn_close.png","var":"closeBtn"},type:"Button"}],props:{base64pic:!0,width:200,height:300}}}]),e}(View),NodeTreeUI=function(t){function e(){this.nodeTree=null,this.controlBar=null,this.settingBtn=null,this.freshBtn=null,this.fliterTxt=null,this.closeBtn=null,this.ifShowProps=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.NodeTreeUI",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){View.regComponent("laya.debug.uicomps.TreeListItem",TreeListItem)},__static(e,["uiView",function(){return this.uiView={type:"View",props:{width:200,height:260,base64pic:!0},child:[{type:"Image",props:{x:-22,y:-47,skin:"view/bg_panel.png",width:211,height:206,left:0,right:0,top:0,bottom:0,sizeGrid:"5,5,5,5"}},{props:{y:0,skin:"view/bg_tool.png",left:0,right:0},type:"Image"},{type:"Tree",props:{x:0,scrollBarSkin:"comp/vscroll.png",width:195,height:229,"var":"nodeTree",left:0,right:0,top:38,bottom:20},child:[{type:"ListItem",props:{y:0,name:"render",left:0,right:0,runtime:"laya.debug.uicomps.TreeListItem"}}]},{type:"Box",props:{x:3,y:5,"var":"controlBar",left:3,right:3,top:5,height:23},child:[{type:"Button",props:{x:6,skin:"view/setting.png",stateNum:3,"var":"settingBtn",toolTip:"设置显示的属性",y:6}},{type:"Button",props:{y:6,skin:"view/refresh.png","var":"freshBtn",left:30,toolTip:"刷新数据"}},{type:"TextInput",props:{y:0,skin:"view/bg_top.png",height:22,"var":"fliterTxt",left:53,right:0,color:"#a0a0a0"}},{type:"Button",props:{x:172,y:2,skin:"view/btn_close.png","var":"closeBtn",right:1,visible:!1}}]},{props:{y:243,skin:"comp/checkbox.png",label:"显示属性","var":"ifShowProps",bottom:3,selected:!0,visible:!0,x:2,width:70,height:14,labelColors:"#a0a0a0,#fffff,#ffffff,#fffff"},type:"CheckBox"}]}}]),e}(View),ObjectCreateUI=function(t){function e(){this.bg=null,this.closeBtn=null,this.itemList=null,this.freshBtn=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.ObjectCreateUI",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){View.regComponent("laya.debug.uicomps.RankListItem",RankListItem)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:215,y:264,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,"var":"bg",sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:184,y:12,skin:"view/btn_close.png","var":"closeBtn",top:2,right:2,visible:!1},type:"Button"},{props:{x:11,y:5,text:"对象创建统计",width:83,height:16,color:"#288edf"},type:"Label"},{type:"List",child:[{type:"RankListItem",props:{y:0,left:5,right:5,name:"render",runtime:"laya.debug.uicomps.RankListItem"}}],props:{vScrollBarSkin:"comp/vscroll.png","var":"itemList",top:26,bottom:5,left:5,right:5,repeatX:1}},{props:{y:1,skin:"view/refresh2.png","var":"freshBtn",toolTip:"刷新数据",right:1,x:178},type:"Button"}],props:{width:200,height:300,base64pic:!0}}}]),e}(View),ObjectInfoUI=function(t){function e(){this.bg=null,this.title=null,this.showTxt=null,this.closeBtn=null,this.autoUpdate=null,this.settingBtn=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.ObjectInfoUI",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:-1,y:0,skin:"view/bg_panel.png",left:-1,right:1,top:0,bottom:0,"var":"bg",sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:7,y:5,text:"对象类型",width:67,height:20,color:"#ffffff","var":"title",left:7,right:6},type:"Label"},{props:{x:2,skin:"comp/textinput.png",text:"属性内容",width:196,height:228,left:2,right:2,"var":"showTxt",top:25,bottom:20,editable:!1,multiline:!0,sizeGrid:"5,5,5,5",color:"#a0a0a0"},type:"TextArea"},{props:{x:178,y:4,skin:"view/btn_close.png","var":"closeBtn",top:4,right:2},type:"Button"},{props:{skin:"comp/checkbox.png",label:"自动刷新属性","var":"autoUpdate",bottom:2,x:3,labelColors:"#a0a0a0,#fffff,#ffffff,#fffff"},type:"CheckBox"},{props:{x:164,skin:"view/setting.png",stateNum:"3","var":"settingBtn",y:6,top:6,right:24,toolTip:"设置显示属性"},type:"Button"},{props:{x:179,y:257,skin:"view/resize.png",right:2,bottom:2,name:"resizeBtn",stateNum:3},type:"Button"}],props:{base64pic:!0,width:200,height:200}}}]),e}(View),OutPutUI=function(t){function e(){this.bg=null,this.txt=null,this.closeBtn=null,this.clearBtn=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.OutPutUI",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){},__static(e,["uiView",function(){return this.uiView={type:"View",props:{width:300,height:200,base64pic:!0},child:[{type:"Image",props:{x:205,y:254,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,"var":"bg",sizeGrid:"5,5,5,5"}},{type:"Label",props:{skin:"comp/textarea.png",text:"TextArea",color:"#a0a0a0","var":"txt",left:5,right:5,top:22,bottom:5,mouseEnabled:!0,sizeGrid:"3,3,3,3"}},{type:"Button",props:{x:185,y:15,skin:"view/btn_close.png","var":"closeBtn",top:2,right:2}},{props:{x:253,y:1,skin:"view/re.png",stateNum:"2","var":"clearBtn",right:25},type:"Button"},{props:{x:169,y:247,skin:"view/resize.png",right:2,bottom:2,name:"resizeBtn",stateNum:3},type:"Button"}]}}]),e}(View),ProfileUI=function(t){function e(){this.renderPanel=null,this.createPanel=null,this.cachePanel=null,this.tab=null,this.resPanel=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.ProfileUI",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){View.regComponent("laya.debug.view.nodeInfo.views.RenderCostRankView",RenderCostRankView),View.regComponent("laya.debug.view.nodeInfo.views.ObjectCreateView",ObjectCreateView),View.regComponent("laya.debug.view.nodeInfo.views.CacheRankView",CacheRankView),View.regComponent("laya.debug.view.nodeInfo.views.ResRankView",ResRankView)},__static(e,["uiView",function(){return this.uiView={type:"View",props:{width:260,height:329,base64pic:!0},child:[{type:"Image",props:{y:0,skin:"view/bg_tool.png",right:0,left:0}},{type:"Rank",props:{"var":"renderPanel",top:29,runtime:"laya.debug.view.nodeInfo.views.RenderCostRankView",right:0,name:"渲染用时",left:0,bottom:0}},{type:"ObjectCreate",props:{"var":"createPanel",top:29,runtime:"laya.debug.view.nodeInfo.views.ObjectCreateView",right:0,name:"对象创建统计",left:0,bottom:0}},{type:"Rank",props:{x:10,"var":"cachePanel",top:29,runtime:"laya.debug.view.nodeInfo.views.CacheRankView",right:0,name:"cache用时",left:0,bottom:0}},{type:"Tab",props:{y:9,x:7,width:191,"var":"tab",selectedIndex:0,height:19},child:[{type:"CheckBox",props:{y:0,x:0,width:50,skin:"view/create.png",name:"item0",labelColors:"#a0a0a0,#ffffff,#ffffff,#ffffff",label:"  对象",height:17}},{type:"CheckBox",props:{y:0,x:55,width:50,skin:"view/rendertime.png",name:"item1",labelColors:"#a0a0a0,#ffffff,#ffffff,#ffffff",label:" 渲染",height:19}},{type:"CheckBox",props:{y:0,x:110,width:50,skin:"view/cache.png",name:"item2",labelColors:"#a0a0a0,#ffffff,#ffffff,#ffffff",label:" 重绘",height:16}},{type:"CheckBox",props:{y:0,x:165,width:50,skin:"view/cache.png",name:"item3",labelColors:"#a0a0a0,#ffffff,#ffffff,#ffffff",label:" 资源",height:16}}]},{type:"Rank",props:{y:40,x:50,"var":"resPanel",top:29,runtime:"laya.debug.view.nodeInfo.views.ResRankView",right:0,name:"资源缓存",left:0,bottom:0}}]}}]),e}(View),RankUI=function(t){function e(){this.bg=null,this.closeBtn=null,this.title=null,this.itemList=null,this.autoUpdate=null,this.freshBtn=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.RankUI",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){View.regComponent("laya.debug.uicomps.RankListItem",RankListItem)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:225,y:274,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,"var":"bg",sizeGrid:"5,5,5,5"},type:"Image"},{props:{x:194,y:22,skin:"view/btn_close.png","var":"closeBtn",top:2,right:2,visible:!1},type:"Button"},{props:{x:8,y:5,text:"渲染用时表(3000ms)",width:109,height:16,color:"#288edf","var":"title"},type:"Label"},{type:"List",child:[{type:"RankListItem",props:{left:5,right:5,name:"render",runtime:"laya.debug.uicomps.RankListItem"}}],props:{vScrollBarSkin:"comp/vscroll.png","var":"itemList",left:2,right:2,top:26,bottom:25,repeatX:1,x:10,y:10}},{props:{skin:"comp/checkbox.png",label:"自动刷新属性","var":"autoUpdate",bottom:3,selected:!1,visible:!0,left:2,labelColors:"#a0a0a0,#fffff,#ffffff,#fffff"},type:"CheckBox"},{props:{y:1,skin:"view/refresh2.png","var":"freshBtn",toolTip:"刷新数据",right:1},type:"Button"}],props:{width:200,height:300}}}]),e}(View),SelectInfosUI=function(t){function e(){this.bg=null,this.closeBtn=null,this.selectList=null,this.findBtn=null,this.fliterTxt=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.SelectInfosUI",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){View.regComponent("laya.debug.uicomps.RankListItem",RankListItem)},__static(e,["uiView",function(){return this.uiView={type:"View",child:[{props:{x:205,y:254,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,"var":"bg",sizeGrid:"5,5,5,5"},type:"Image"},{props:{skin:"view/btn_close.png","var":"closeBtn",top:32,visible:!1,right:2},type:"Button"},{props:{x:7,y:36,text:"当前选中列表",width:83,height:16,color:"#288edf"},type:"Label"},{type:"List",child:[{type:"RankListItem",props:{left:5,right:5,name:"render",runtime:"laya.debug.uicomps.RankListItem"}}],props:{vScrollBarSkin:"comp/vscroll.png","var":"selectList",left:5,right:5,top:56,bottom:25,repeatX:1,x:20}},{props:{x:6,text:"Alt+V选取鼠标下的对象",width:189,height:16,color:"#a0a0a0",bottom:3},type:"Label"},{type:"Image",props:{y:0,skin:"view/bg_tool.png",left:0,right:0}},{type:"Clip",props:{y:6,skin:"view/search.png",clipY:2,"var":"findBtn",right:5,toolTip:"查找",x:174}},{type:"TextInput",props:{y:6,skin:"view/bg_top.png",height:22,"var":"fliterTxt",left:8,right:45,color:"#a0a0a0",x:8,width:147}}],props:{width:200,height:300,base64pic:!0}}}]),e}(View),ToolBarUI=function(t){function e(){this.bg=null,this.treeBtn=null,this.findBtn=null,this.minBtn=null,this.selectWhenClick=null,this.clearBtn=null,this.rankBtn=null,this.nodeRankBtn=null,this.cacheBtn=null,e.__super.call(this)}__class(e,"laya.debug.ui.debugui.ToolBarUI",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists(),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},i.viewMapRegists=function(){View.regComponent("laya.debug.view.nodeInfo.nodetree.MinBtnComp",MinBtnComp)},__static(e,["uiView",function(){return this.uiView={type:"View",props:{base64pic:!0,width:250,height:30},child:[{type:"Image",props:{x:195,y:244,skin:"view/bg_panel.png",left:0,right:0,top:0,bottom:0,"var":"bg",sizeGrid:"5,5,5,5"}},{type:"Button",props:{x:2,y:6,skin:"view/save.png",stateNum:2,"var":"treeBtn",toolTip:"节点树"}},{type:"Button",props:{x:25,y:6,skin:"view/save.png",stateNum:2,"var":"findBtn",toolTip:"查找面板"}},{type:"MinBtnComp",props:{x:218,y:-3,"var":"minBtn",runtime:"laya.debug.view.nodeInfo.nodetree.MinBtnComp"}},{type:"CheckBox",props:{x:124,y:8,skin:"comp/checkbox.png",label:"点击选取","var":"selectWhenClick",labelColors:"#a0a0a0,#fffff,#ffffff,#fffff"}},{type:"Button",props:{x:193,y:5,skin:"view/res.png",stateNum:2,toolTip:"清除边框","var":"clearBtn"}},{type:"Button",props:{x:49,y:6,skin:"view/save.png",stateNum:2,"var":"rankBtn",toolTip:"渲染用时排行"}},{type:"Button",props:{x:72,y:6,skin:"view/save.png",stateNum:2,"var":"nodeRankBtn",toolTip:"创建对象排行"}},{type:"Button",props:{x:94,y:6,skin:"view/save.png",stateNum:2,"var":"cacheBtn",toolTip:"cache对象"}}]}}]),e}(View),Dialog=function(t){function e(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,e.__super.call(this)}__class(e,"laya.ui.Dialog",t);var i=e.prototype;return i.initialize=function(){this.popupEffect=e.manager.popupEffectHandler,this.closeEffect=e.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},i._dealDragArea=function(){var t=this.getChildByName("drag");t&&(this.dragArea=t.x+","+t.y+","+t.width+","+t.height,t.removeSelf())},i._onClick=function(t){var e=t.target;if(e)switch(e.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(e.name)}},i.show=function(t){void 0===t&&(t=!1),this._open(!1,t)},i.popup=function(t){void 0===t&&(t=!1),this._open(!0,t)},i._open=function(t,i){e.manager.lock(!1),this.isModal=t,e.manager.open(this,i)},i.onOpened=function(){},i.close=function(t){e.manager.close(this,t)},i.onClosed=function(t){},i._onMouseDown=function(t){var e=this.getMousePoint();this._dragArea.contains(e.x,e.y)?this.startDrag():this.stopDrag()},__getset(0,i,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(t){if(t){var e=UIUtils.fillArray([0,0,0,0],t,Number);this._dragArea=new Rectangle(e[0],e[1],e[2],e[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),__getset(0,i,"isPopup",function(){return null!=this.parent}),__getset(0,i,"zOrder",t.prototype._$get_zOrder,function(i){t.prototype._$set_zOrder.call(this,i),e.manager._checkMask()}),__getset(1,e,"manager",function(){return e._manager=e._manager||new DialogManager},function(t){e._manager=t}),e.setLockView=function(t){e.manager.setLockView(t)},e.lock=function(t){e.manager.lock(t)},e.closeAll=function(){e.manager.closeAll()},e.getDialogsByGroup=function(t){return e.manager.getDialogsByGroup(t)},e.closeByGroup=function(t){return e.manager.closeByGroup(t)},e.CLOSE="close",e.CANCEL="cancel",e.SURE="sure",e.NO="no",e.OK="ok",e.YES="yes",e._manager=null,e}(View),ListBase=function(t){function e(){e.__super.call(this)}__class(e,"laya.debug.uicomps.ListBase",t);var i=e.prototype;return __getset(0,i,"selectedIndex",t.prototype._$get_selectedIndex,function(t){if(this._selectedIndex!=t&&(this._selectedIndex=t,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(t)),this.selectEnable&&this._scrollBar){var e=this._isVertical?this.repeatX:this.repeatY;(t<this._startIndex||t+e>this._startIndex+this.repeatX*this.repeatY)&&this.scrollTo(t)}}),e}(List),TreeBase=function(t){function e(){e.__super.call(this)}__class(e,"laya.debug.uicomps.TreeBase",t);var i=e.prototype;return i.createChildren=function(){this.addChild(this._list=new ListBase),this._list.renderHandler=Handler.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},e}(Tree),HBox=function(t){function e(){e.__super.call(this)}__class(e,"laya.ui.HBox",t);var i=e.prototype;return i.sortItem=function(t){t&&t.sort(function(t,e){return t.x-e.x})},i.changeItems=function(){this._itemChanged=!1;for(var t=[],e=0,i=0,s=this.numChildren;s>i;i++){var n=this.getChildAt(i);n&&n.layoutEnabled&&(t.push(n),e=this._height?this._height:Math.max(e,n.height*n.scaleY))}this.sortItem(t);var o=0;for(i=0,s=t.length;s>i;i++)n=t[i],n.x=o,o+=n.width*n.scaleX+this._space,"top"==this._align?n.y=0:"middle"==this._align?n.y=.5*(e-n.height*n.scaleY):"bottom"==this._align&&(n.y=e-n.height*n.scaleY);this.changeSize()},__getset(0,i,"height",t.prototype._$get_height,function(e){this._height!=e&&(t.prototype._$set_height.call(this,e),this.callLater(this.changeItems))}),e.NONE="none",e.TOP="top",e.MIDDLE="middle",e.BOTTOM="bottom",e}(LayoutBox),VBox=function(t){function e(){e.__super.call(this)}__class(e,"laya.ui.VBox",t);var i=e.prototype;return i.changeItems=function(){this._itemChanged=!1;for(var t=[],e=0,i=0,s=this.numChildren;s>i;i++){var n=this.getChildAt(i);n&&n.layoutEnabled&&(t.push(n),e=this._width?this._width:Math.max(e,n.width*n.scaleX))}this.sortItem(t);var o=0;for(i=0,s=t.length;s>i;i++)n=t[i],n.y=o,o+=n.height*n.scaleY+this._space,"left"==this._align?n.x=0:"center"==this._align?n.x=.5*(e-n.width*n.scaleX):"right"==this._align&&(n.x=e-n.width*n.scaleX);this.changeSize()},__getset(0,i,"width",t.prototype._$get_width,function(e){this._width!=e&&(t.prototype._$set_width.call(this,e),this.callLater(this.changeItems))}),e.NONE="none",e.LEFT="left",e.CENTER="center",e.RIGHT="right",e}(LayoutBox),RadioGroup=function(t){function e(){e.__super.call(this)}__class(e,"laya.ui.RadioGroup",t);var i=e.prototype;return i.createItem=function(t,e){return new Radio(t,e)},e}(UIGroup),Tab=function(t){function e(){e.__super.call(this)}__class(e,"laya.ui.Tab",t);var i=e.prototype;return i.createItem=function(t,e){return new Button(t,e)},e}(UIGroup),TextArea=function(t){function e(t){this._vScrollBar=null,this._hScrollBar=null,void 0===t&&(t=""),e.__super.call(this,t)}__class(e,"laya.ui.TextArea",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},i.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},i.onVBarChanged=function(t){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},i.onHBarChanged=function(t){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},i.changeScroll=function(){var t=this._vScrollBar&&this._tf.maxScrollY>0,e=this._hScrollBar&&this._tf.maxScrollX>0,i=t?this._width-this._vScrollBar.width:this._width,s=e?this._height-this._hScrollBar.height:this._height,n=this._tf.padding||Styles.labelPadding;this._tf.width=i,this._tf.height=s,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-n[2],this._vScrollBar.y=n[1],this._vScrollBar.height=this._height-(e?this._hScrollBar.height:0)-n[1]-n[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=s/Math.max(this._tf.textHeight,s),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=t),this._hScrollBar&&(this._hScrollBar.x=n[0],this._hScrollBar.y=this._height-this._hScrollBar.height-n[3],this._hScrollBar.width=this._width-(t?this._vScrollBar.width:0)-n[0]-n[2],this._hScrollBar.scrollSize=Math.max(.033*i,1),this._hScrollBar.thumbPercent=i/Math.max(this._tf.textWidth,i),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=e)},i.scrollTo=function(t){this.commitMeasure(),this._tf.scrollY=t},__getset(0,i,"scrollY",function(){return this._tf.scrollY}),__getset(0,i,"width",t.prototype._$get_width,function(e){t.prototype._$set_width.call(this,e),this.callLater(this.changeScroll)}),__getset(0,i,"hScrollBar",function(){return this._hScrollBar}),__getset(0,i,"height",t.prototype._$get_height,function(e){t.prototype._$set_height.call(this,e),this.callLater(this.changeScroll)}),__getset(0,i,"maxScrollX",function(){return this._tf.maxScrollX}),__getset(0,i,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(t){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new VScrollBar),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=t}),__getset(0,i,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(t){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new HScrollBar),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=t}),__getset(0,i,"vScrollBar",function(){return this._vScrollBar}),__getset(0,i,"maxScrollY",function(){return this._tf.maxScrollY}),__getset(0,i,"scrollX",function(){return this._tf.scrollX}),e}(TextInput),TestView=function(t){function e(){e.__super.call(this),this.btn.on("click",this,this.onBtnClick),this.btn2.on("click",this,this.onBtn2Click)}__class(e,"view.TestView",t);var i=e.prototype;return i.onBtnClick=function(t){this.radio.selectedIndex=1,this.clip.index=8,this.tab.selectedIndex=2,this.combobox.selectedIndex=0,this.check.selected=!0},i.onBtn2Click=function(t){this.box.dataSource={slider:50,scroll:80,progress:.2,input:"This is a input",label:{color:"#ff0000",text:"Hello LayaAir"}};for(var e=[],i=0;100>i;i++)e.push({label:"item "+i,clip:i%9});this.list.array=e},i.onListRender=function(t,e){var i=t.getChildByName("label");e%2?i.color="#ff0000":i.color="#000000"},e}(TestPageUI),RankListItem=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(RankListItemUI.uiView),this.createView(RankListItemUI.uiView)}__class(e,"laya.debug.uicomps.RankListItem",t);var i=e.prototype;return i.createChildren=function(){},e}(RankListItemUI),TreeListItem=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(ListItemUI.uiView),this.createView(ListItemUI.uiView)}__class(e,"laya.debug.uicomps.TreeListItem",t);var i=e.prototype;return i.createChildren=function(){},e}(ListItemUI),DebugPage=function(t){function e(){this.views=null,e.__super.call(this),this.msRec=new Rectangle,Base64AtlasManager.replaceRes(DebugPanelUI.uiView),this.createView(DebugPanelUI.uiView),DisControlTool.setResizeAbleEx(this),this.views=[this.treePanel,this.selectPanel,this.profilePanel],this.tab.selectedIndex=0,this.tabChange(),this.tab.on("change",this,this.tabChange),this.changeSize()}__class(e,"laya.debug.view.nodeInfo.nodetree.DebugPage",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists()},i.tabChange=function(){DisControlTool.addOnlyByIndex(this.views,this.tab.selectedIndex,this),DisControlTool.setTop(this.resizeBtn)},i.changeSize=function(){this.width<245&&(this.width=245),this.height<100&&(this.height=200),laya.ui.Component.prototype.changeSize.call(this),this.msRec.setTo(0,0,this.width,this.height),this.scrollRect=this.msRec},e}(DebugPanelUI),FindNode=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(FindNodeUI.uiView),this.createView(FindNodeUI.uiView)}__class(e,"laya.debug.view.nodeInfo.nodetree.FindNode",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists()},e}(FindNodeUI),FindNodeSmall=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(FindNodeSmallUI.uiView),this.createView(FindNodeSmallUI.uiView)}__class(e,"laya.debug.view.nodeInfo.nodetree.FindNodeSmall",t);
var i=e.prototype;return i.createChildren=function(){},e}(FindNodeSmallUI),MinBtnComp=function(t){function e(){this.tar=null,this.minHandler=null,this.maxHandler=null,this.prePos=new Point,e.__super.call(this),Base64AtlasManager.replaceRes(MinBtnCompUI.uiView),this.createView(MinBtnCompUI.uiView),this.init()}__class(e,"laya.debug.view.nodeInfo.nodetree.MinBtnComp",t);var i=e.prototype;return i.createChildren=function(){},i.init=function(){this.minBtn.on("click",this,this.onMinBtn),this.maxBtn.on("click",this,this.onMaxBtn),this.minState=!1,this.maxUI.removeSelf(),DisControlTool.setDragingItem(this.bg,this.maxUI)},i.onMaxBtn=function(){this.maxUI.removeSelf(),this.maxHandler&&this.maxHandler.run(),this.tar&&(this.tar.x+=this.maxUI.x-this.prePos.x,this.tar.y+=this.maxUI.y-this.prePos.y)},i.onMinBtn=function(){if(this.displayedInStage){var t;t=Point.TEMP,t.setTo(0,0),t=this.localToGlobal(t),t=DebugInfoLayer.I.popLayer.globalToLocal(t),this.maxUI.pos(t.x,t.y),DebugInfoLayer.I.popLayer.addChild(this.maxUI),this.tar&&this.prePos.setTo(t.x,t.y),this.minHandler&&this.minHandler.run()}},__getset(0,i,"minState",null,function(t){}),e}(MinBtnCompUI),NodeListPanel=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(NodeListPanelUI.uiView),this.createView(NodeListPanelUI.uiView)}__class(e,"laya.debug.view.nodeInfo.nodetree.NodeListPanel",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists()},e}(NodeListPanelUI),NodeTool=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(NodeToolUI.uiView),this.createView(NodeToolUI.uiView)}__class(e,"laya.debug.view.nodeInfo.nodetree.NodeTool",t);var i=e.prototype;return i.createChildren=function(){},e}(NodeToolUI),NodeTree=function(t){function e(){this.showProps=!1,this._closeSettingHandler=null,this._tar=null,e.__super.call(this),Base64AtlasManager.replaceRes(NodeTreeUI.uiView),View.regComponent("Tree",TreeBase),this.createView(NodeTreeUI.uiView),View.regComponent("Tree",Tree),this.inits(),e.I=this}__class(e,"laya.debug.view.nodeInfo.nodetree.NodeTree",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists()},i.inits=function(){this.nodeTree.list.scrollBar.hide=!0,this.nodeTree.list.selectEnable=!0,this.settingBtn.on("click",this,this.onSettingBtn),this.freshBtn.on("click",this,this.fresh),this.closeBtn.on("click",this,this.onCloseBtn),this.fliterTxt.on("enter",this,this.onFliterTxtChange),this.fliterTxt.on("blur",this,this.onFliterTxtChange),NodeMenu.I.setNodeListAction(this.nodeTree.list),this.nodeTree.list.on("click",this,this.onListClick,[this.nodeTree.list]),this.nodeTree.renderHandler=new Handler(this,this.treeRender),this._closeSettingHandler=new Handler(this,this.closeSetting),this.onIfShowPropsChange(),this.ifShowProps.on("change",this,this.onIfShowPropsChange)},i.onIfShowPropsChange=function(){this.showProps=this.ifShowProps.selected,this.fresh()},i.onListClick=function(t){t.selectedItem&&t.selectedItem.isDirectory&&(t.selectedItem.isOpen=!t.selectedItem.isOpen,this.nodeTree.fresh())},i.onFindBtn=function(){FindSmallView.I.show()},i.onCloseBtn=function(){this.removeSelf()},i.onTreeDoubleClick=function(t){if(this.nodeTree.selectedItem){var e;e=this.nodeTree.selectedItem.path,NodeMenu.I.objRightClick(e)}},i.onTreeRightMouseDown=function(t){if(this.nodeTree.selectedItem){var e;e=this.nodeTree.selectedItem.path,NodeMenu.I.objRightClick(e)}},i.onSettingBtn=function(){NodeTreeSettingView.I.showSetting(e.showKeys,this._closeSettingHandler,this._tar)},i.closeSetting=function(t){e.showKeys=t,this.fresh()},i.onFliterTxtChange=function(t){var i;i=this.fliterTxt.text,""!=i&&i!=e.showKeys.join(",")&&(e.showKeys=i.split(","),this.fresh())},i.selecteByFile=function(t){var e;e=this.nodeTree.source;var i;if(i=DebugTool.findNameHas(t,!1),i&&i.length>0){var s;s=i[0],this.parseOpen(e,s)}},i.showSelectInStage=function(t){this.setDis(Laya.stage),this.selectByNode(t)},i.selectByNode=function(t){if(t){var e;e=this.nodeTree.source,this.parseOpen(e,t)}},i.showNodeList=function(t){if(t){var e=0,i=0;i=t.length;var s;s=[];var n,o;for(e=0;i>e;e++)o=t[e],n={},n.label=ClassTool.getNodeClassAndName(o),n.path=o,s.push(n);this.nodeTree.array=s}},i.parseOpen=function(t,e){if(!(t.length<1)&&e){var i=0,s=0;s=t.length;var n;for(i=0;s>i;i++)if(n=t[i],n.path==e){var o;for(o=n;n;)n.isOpen=!0,this.nodeTree.fresh(),n=n.nodeParent;return void(this.nodeTree.selectedItem=o)}}},i.getFilterSource=function(t,e,i){i=i.toLocaleLowerCase();var s;for(var n in t)s=t[n],s.isDirectory&&String(s.label).toLowerCase().indexOf(i)>-1&&(s.x=0,e.push(s)),s.child&&s.child.length>0&&this.getFilterSource(s.child,e,i)},i.onControlDown=function(){this.startDrag()},i.setDis=function(t){this._tar=t,this.fresh()},i.fresh=function(){var t;if(this.nodeTree.selectedItem){var i;for(i=this.nodeTree.selectedItem;i&&!(i.path instanceof laya.display.Sprite);)i=i.nodeParent;i&&i.path&&(t=i.path)}this._tar?this.nodeTree.array=NodeUtils.getNodeTreeData(this._tar,this.showProps?e.showKeys:e.emptyShowKey):this.nodeTree.array=[],t&&this.selectByNode(t)},i.treeRender=function(t,e){var i=t.dataSource;if(i){var s=(i.child||i.isDirectory,t.getChildByName("label"));i.path instanceof laya.display.Node?s.color="#09a4f6":i.isChilds?s.color="#00ff11":s.color="#838bc5"}},e.I=null,e.emptyShowKey=[],__static(e,["showKeys",function(){return this.showKeys=["x","y","width","height","renderCost"]}]),e}(NodeTreeUI),NodeTreeSetting=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(NodeTreeSettingUI.uiView),this.createView(NodeTreeSettingUI.uiView)}__class(e,"laya.debug.view.nodeInfo.nodetree.NodeTreeSetting",t);var i=e.prototype;return i.createChildren=function(){},e}(NodeTreeSettingUI),ObjectCreate=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(ObjectCreateUI.uiView),this.createView(ObjectCreateUI.uiView)}__class(e,"laya.debug.view.nodeInfo.nodetree.ObjectCreate",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists()},e}(ObjectCreateUI),ObjectInfo=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(ObjectInfoUI.uiView),this.createView(ObjectInfoUI.uiView)}__class(e,"laya.debug.view.nodeInfo.nodetree.ObjectInfo",t);var i=e.prototype;return i.createChildren=function(){},e}(ObjectInfoUI),OutPut=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(OutPutUI.uiView),this.createView(OutPutUI.uiView)}__class(e,"laya.debug.view.nodeInfo.nodetree.OutPut",t);var i=e.prototype;return i.createChildren=function(){},e}(OutPutUI),Profile=function(t){function e(){this.views=null,e.__super.call(this),Base64AtlasManager.replaceRes(ProfileUI.uiView),this.createView(ProfileUI.uiView),this.views=[this.createPanel,this.renderPanel,this.cachePanel,this.resPanel],this.tab.selectedIndex=0,this.tabChange(),this.tab.on("change",this,this.tabChange)}__class(e,"laya.debug.view.nodeInfo.nodetree.Profile",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists()},i.tabChange=function(){DisControlTool.addOnlyByIndex(this.views,this.tab.selectedIndex,this)},e}(ProfileUI),Rank=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(RankUI.uiView),this.createView(RankUI.uiView)}__class(e,"laya.debug.view.nodeInfo.nodetree.Rank",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists()},e}(RankUI),SelectInfos=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(SelectInfosUI.uiView),this.createView(SelectInfosUI.uiView)}__class(e,"laya.debug.view.nodeInfo.nodetree.SelectInfos",t);var i=e.prototype;return i.createChildren=function(){this.viewMapRegists()},e}(SelectInfosUI),ToolBar=function(t){function e(){e.__super.call(this),Base64AtlasManager.replaceRes(ToolBarUI.uiView),this.createView(ToolBarUI.uiView)}__class(e,"laya.debug.view.nodeInfo.nodetree.ToolBar",t);var i=e.prototype;return i.createChildren=function(){},e}(ToolBarUI),AsynDialog=function(t){function e(){this._uiView=null,this.isCloseOther=!1,e.__super.call(this)}__class(e,"laya.ui.AsynDialog",t);var i=e.prototype;return i.createView=function(t){this._uiView=t},i._open=function(t,e){this.isModal=t,this.isCloseOther=e,Dialog.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},i.onCreated=function(){this.createUI(),this.onOpen()},i.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},i.onOpen=function(){Dialog.manager.open(this,this.isCloseOther),Dialog.manager.lock(!1)},i.close=function(t){Dialog.manager.close(this),this.onClose()},i.onClose=function(){},i.destroy=function(t){void 0===t&&(t=!0),laya.ui.View.prototype.destroy.call(this,t),this._uiView=null,this.onDestroy()},i.onDestroy=function(){},e}(Dialog);Laya.__init([Browser,LoaderManager,EventDispatcher,Render,View,Timer,GraphicAnimation,LocalStorage]),new LayaUISample}(window,document,Laya);